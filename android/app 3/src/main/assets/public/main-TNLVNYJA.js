import{a as B,b as _e,c as Tb,e as R}from"./chunk-6MDQTQU3.js";var Lt=null,ph=!1,Km=1,Fk=null,Sn=Symbol("SIGNAL");function oe(t){let e=Lt;return Lt=t,e}function gh(){return Lt}var mh={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function yh(t){if(ph)throw new Error("");if(Lt===null)return;Lt.consumerOnSignalRead(t);let e=Lt.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=Lt.recomputing;if(r&&(n=e!==void 0?e.nextProducer:Lt.producers,n!==void 0&&n.producer===t)){Lt.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===Lt&&(!r||jk(i,Lt)))return;let o=ka(Lt),s={producer:t,consumer:Lt,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};Lt.producersTail=s,e!==void 0?e.nextProducer=s:Lt.producers=s,o&&Db(t,s)}function bb(){Km++}function Sb(t){if(!(ka(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Km)){if(!t.producerMustRecompute(t)&&!vh(t)){Wm(t);return}t.producerRecomputeValue(t),Wm(t)}}function Qm(t){if(t.consumers===void 0)return;let e=ph;ph=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||Uk(r)}}finally{ph=e}}function Ym(){return Lt?.consumerAllowSignalWrites!==!1}function Uk(t){t.dirty=!0,Qm(t),t.consumerMarkedDirty?.(t)}function Wm(t){t.dirty=!1,t.lastCleanEpoch=Km}function _h(t){return t&&Cb(t),oe(t)}function Cb(t){t.producersTail=void 0,t.recomputing=!0}function Jm(t,e){oe(e),t&&Ab(t)}function Ab(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(ka(t))do n=Xm(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function vh(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(Sb(n),r!==n.version))return!0}return!1}function Nu(t){if(ka(t)){let e=t.producers;for(;e!==void 0;)e=Xm(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function Db(t,e){let n=t.consumersTail,r=ka(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)Db(i.producer,i)}function Xm(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!ka(e)){let o=e.producers;for(;o!==void 0;)o=Xm(o)}return n}function ka(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function Rb(t){Fk?.(t)}function jk(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function xb(t,e){return Object.is(t,e)}function Bk(){throw new Error}var Pb=Bk;function Nb(t){Pb(t)}function Zm(t){Pb=t}var $k=null;function ey(t,e){let n=Object.create(Eh);n.value=t,e!==void 0&&(n.equal=e);let r=()=>Mb(n);return r[Sn]=n,Rb(n),[r,s=>Mu(n,s),s=>kb(n,s)]}function Mb(t){return yh(t),t.value}function Mu(t,e){Ym()||Nb(t),t.equal(t.value,e)||(t.value=e,zk(t))}function kb(t,e){Ym()||Nb(t),Mu(t,e(t.value))}var Eh=_e(B({},mh),{equal:xb,value:void 0,kind:"signal"});function zk(t){t.version++,bb(),Qm(t),$k?.(t)}function ty(t){let e=oe(null);try{return t()}finally{oe(e)}}function ce(t){return typeof t=="function"}function Oa(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ih=Oa(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ku(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var St=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ce(r))try{r()}catch(o){e=o instanceof Ih?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Ob(o)}catch(s){e=e??[],s instanceof Ih?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ih(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Ob(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ku(n,e)}remove(e){let{_finalizers:n}=this;n&&ku(n,e),e instanceof t&&e._removeParent(this)}};St.EMPTY=(()=>{let t=new St;return t.closed=!0,t})();var ny=St.EMPTY;function wh(t){return t instanceof St||t&&"closed"in t&&ce(t.remove)&&ce(t.add)&&ce(t.unsubscribe)}function Ob(t){ce(t)?t():t.unsubscribe()}var Hn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var La={setTimeout(t,e,...n){let{delegate:r}=La;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=La;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Th(t){La.setTimeout(()=>{let{onUnhandledError:e}=Hn;if(e)e(t);else throw t})}function Ou(){}var Lb=ry("C",void 0,void 0);function Vb(t){return ry("E",void 0,t)}function Fb(t){return ry("N",t,void 0)}function ry(t,e,n){return{kind:t,value:e,error:n}}var es=null;function Va(t){if(Hn.useDeprecatedSynchronousErrorHandling){let e=!es;if(e&&(es={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=es;if(es=null,n)throw r}}else t()}function Ub(t){Hn.useDeprecatedSynchronousErrorHandling&&es&&(es.errorThrown=!0,es.error=t)}var ts=class extends St{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,wh(e)&&e.add(this)):this.destination=Gk}static create(e,n,r){return new Fa(e,n,r)}next(e){this.isStopped?oy(Fb(e),this):this._next(e)}error(e){this.isStopped?oy(Vb(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?oy(Lb,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},qk=Function.prototype.bind;function iy(t,e){return qk.call(t,e)}var sy=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){bh(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){bh(r)}else bh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){bh(n)}}},Fa=class extends ts{constructor(e,n,r){super();let i;if(ce(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Hn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&iy(e.next,o),error:e.error&&iy(e.error,o),complete:e.complete&&iy(e.complete,o)}):i=e}this.destination=new sy(i)}};function bh(t){Hn.useDeprecatedSynchronousErrorHandling?Ub(t):Th(t)}function Hk(t){throw t}function oy(t,e){let{onStoppedNotification:n}=Hn;n&&La.setTimeout(()=>n(t,e))}var Gk={closed:!0,next:Ou,error:Hk,complete:Ou};var Ua=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Gn(t){return t}function ay(...t){return cy(t)}function cy(t){return t.length===0?Gn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var we=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=Kk(n)?n:new Fa(n,r,i);return Va(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=jb(r),new r((i,o)=>{let s=new Fa({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ua](){return this}pipe(...n){return cy(n)(this)}toPromise(n){return n=jb(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function jb(t){var e;return(e=t??Hn.Promise)!==null&&e!==void 0?e:Promise}function Wk(t){return t&&ce(t.next)&&ce(t.error)&&ce(t.complete)}function Kk(t){return t&&t instanceof ts||Wk(t)&&wh(t)}function Qk(t){return ce(t?.lift)}function Ne(t){return e=>{if(Qk(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ve(t,e,n,r,i){return new uy(t,e,n,r,i)}var uy=class extends ts{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Bb=Oa(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Vt=(()=>{class t extends we{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Sh(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Bb}next(n){Va(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Va(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Va(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?ny:(this.currentObservers=null,o.push(n),new St(()=>{this.currentObservers=null,ku(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new we;return n.source=this,n}}return t.create=(e,n)=>new Sh(e,n),t})(),Sh=class extends Vt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:ny}};var Ct=class extends Vt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var At=new we(t=>t.complete());function $b(t){return t&&ce(t.schedule)}function zb(t){return t[t.length-1]}function qb(t){return ce(zb(t))?t.pop():void 0}function eo(t){return $b(zb(t))?t.pop():void 0}function ly(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Gb(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(p){try{d(r.next(p))}catch(v){s(v)}}function l(p){try{d(r.throw(p))}catch(v){s(v)}}function d(p){p.done?o(p.value):i(p.value).then(a,l)}d((r=r.apply(t,e||[])).next())})}function Hb(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ns(t){return this instanceof ns?(this.v=t,this):new ns(t)}function Wb(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(D){return function(P){return Promise.resolve(P).then(D,v)}}function a(D,P){r[D]&&(i[D]=function(O){return new Promise(function(L,z){o.push([D,O,L,z])>1||l(D,O)})},P&&(i[D]=P(i[D])))}function l(D,P){try{d(r[D](P))}catch(O){S(o[0][3],O)}}function d(D){D.value instanceof ns?Promise.resolve(D.value.v).then(p,v):S(o[0][2],D)}function p(D){l("next",D)}function v(D){l("throw",D)}function S(D,P){D(P),o.shift(),o.length&&l(o[0][0],o[0][1])}}function Kb(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Hb=="function"?Hb(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,l){s=t[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(d){o({value:d,done:a})},s)}}var Ch=t=>t&&typeof t.length=="number"&&typeof t!="function";function Ah(t){return ce(t?.then)}function Dh(t){return ce(t[Ua])}function Rh(t){return Symbol.asyncIterator&&ce(t?.[Symbol.asyncIterator])}function xh(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Yk(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ph=Yk();function Nh(t){return ce(t?.[Ph])}function Mh(t){return Wb(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield ns(n.read());if(i)return yield ns(void 0);yield yield ns(r)}}finally{n.releaseLock()}})}function kh(t){return ce(t?.getReader)}function mt(t){if(t instanceof we)return t;if(t!=null){if(Dh(t))return Jk(t);if(Ch(t))return Xk(t);if(Ah(t))return Zk(t);if(Rh(t))return Qb(t);if(Nh(t))return eO(t);if(kh(t))return tO(t)}throw xh(t)}function Jk(t){return new we(e=>{let n=t[Ua]();if(ce(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Xk(t){return new we(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Zk(t){return new we(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Th)})}function eO(t){return new we(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Qb(t){return new we(e=>{nO(t,e).catch(n=>e.error(n))})}function tO(t){return Qb(Mh(t))}function nO(t,e){var n,r,i,o;return Gb(this,void 0,void 0,function*(){try{for(n=Kb(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Yt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Oh(t,e=0){return Ne((n,r)=>{n.subscribe(Ve(r,i=>Yt(r,t,()=>r.next(i),e),()=>Yt(r,t,()=>r.complete(),e),i=>Yt(r,t,()=>r.error(i),e)))})}function Lh(t,e=0){return Ne((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Yb(t,e){return mt(t).pipe(Lh(e),Oh(e))}function Jb(t,e){return mt(t).pipe(Lh(e),Oh(e))}function Xb(t,e){return new we(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Zb(t,e){return new we(n=>{let r;return Yt(n,e,()=>{r=t[Ph](),Yt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>ce(r?.return)&&r.return()})}function Vh(t,e){if(!t)throw new Error("Iterable cannot be null");return new we(n=>{Yt(n,e,()=>{let r=t[Symbol.asyncIterator]();Yt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function eS(t,e){return Vh(Mh(t),e)}function tS(t,e){if(t!=null){if(Dh(t))return Yb(t,e);if(Ch(t))return Xb(t,e);if(Ah(t))return Jb(t,e);if(Rh(t))return Vh(t,e);if(Nh(t))return Zb(t,e);if(kh(t))return eS(t,e)}throw xh(t)}function yt(t,e){return e?tS(t,e):mt(t)}function pe(...t){let e=eo(t);return yt(t,e)}function dy(t,e){let n=ce(t)?t:()=>t,r=i=>i.error(n());return new we(e?i=>e.schedule(r,0,i):r)}function Fh(t){return!!t&&(t instanceof we||ce(t.lift)&&ce(t.subscribe))}var rs=Oa(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Ke(t,e){return Ne((n,r)=>{let i=0;n.subscribe(Ve(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:rO}=Array;function iO(t,e){return rO(e)?t(...e):t(e)}function nS(t){return Ke(e=>iO(t,e))}var{isArray:oO}=Array,{getPrototypeOf:sO,prototype:aO,keys:cO}=Object;function rS(t){if(t.length===1){let e=t[0];if(oO(e))return{args:e,keys:null};if(uO(e)){let n=cO(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function uO(t){return t&&typeof t=="object"&&sO(t)===aO}function iS(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function hy(...t){let e=eo(t),n=qb(t),{args:r,keys:i}=rS(t);if(r.length===0)return yt([],e);let o=new we(lO(r,e,i?s=>iS(i,s):Gn));return n?o.pipe(nS(n)):o}function lO(t,e,n=Gn){return r=>{oS(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)oS(e,()=>{let d=yt(t[l],e),p=!1;d.subscribe(Ve(r,v=>{o[l]=v,p||(p=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function oS(t,e,n){t?Yt(n,t,e):e()}function sS(t,e,n,r,i,o,s,a){let l=[],d=0,p=0,v=!1,S=()=>{v&&!l.length&&!d&&e.complete()},D=O=>d<r?P(O):l.push(O),P=O=>{o&&e.next(O),d++;let L=!1;mt(n(O,p++)).subscribe(Ve(e,z=>{i?.(z),o?D(z):e.next(z)},()=>{L=!0},void 0,()=>{if(L)try{for(d--;l.length&&d<r;){let z=l.shift();s?Yt(e,s,()=>P(z)):P(z)}S()}catch(z){e.error(z)}}))};return t.subscribe(Ve(e,D,()=>{v=!0,S()})),()=>{a?.()}}function Bt(t,e,n=1/0){return ce(e)?Bt((r,i)=>Ke((o,s)=>e(r,o,i,s))(mt(t(r,i))),n):(typeof e=="number"&&(n=e),Ne((r,i)=>sS(r,i,t,n)))}function aS(t=1/0){return Bt(Gn,t)}function cS(){return aS(1)}function ja(...t){return cS()(yt(t,eo(t)))}function Lu(t){return new we(e=>{mt(t()).subscribe(e)})}function Kr(t,e){return Ne((n,r)=>{let i=0;n.subscribe(Ve(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Vu(t){return Ne((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Ve(n,void 0,void 0,s=>{o=mt(t(s,Vu(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Uh(t,e){return ce(e)?Bt(t,e,1):Bt(t,1)}function uS(t){return Ne((e,n)=>{let r=!1;e.subscribe(Ve(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Qr(t){return t<=0?()=>At:Ne((e,n)=>{let r=0;e.subscribe(Ve(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function lS(t=dO){return Ne((e,n)=>{let r=!1;e.subscribe(Ve(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function dO(){return new rs}function fy(t){return Ne((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Yr(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Kr((i,o)=>t(i,o,r)):Gn,Qr(1),n?uS(e):lS(()=>new rs))}function jh(t){return t<=0?()=>At:Ne((e,n)=>{let r=[];e.subscribe(Ve(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function py(...t){let e=eo(t);return Ne((n,r)=>{(e?ja(t,n,e):ja(t,n)).subscribe(r)})}function Jr(t,e){return Ne((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Ve(r,l=>{i?.unsubscribe();let d=0,p=o++;mt(t(l,p)).subscribe(i=Ve(r,v=>r.next(e?e(l,v,p,d++):v),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Fu(t){return Ne((e,n)=>{mt(t).subscribe(Ve(n,()=>n.complete(),Ou)),!n.closed&&e.subscribe(n)})}function gr(t,e,n){let r=ce(t)||e||n?{next:t,error:e,complete:n}:t;return r?Ne((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Ve(o,l=>{var d;(d=r.next)===null||d===void 0||d.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,l),o.error(l)},()=>{var l,d;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):Gn}var gy;function Bh(){return gy}function mr(t){let e=gy;return gy=t,e}var dS=Symbol("NotFound");function Ba(t){return t===dS||t?.name==="\u0275NotFound"}var os=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Py=new os("21.1.3");var Ny="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Q=class extends Error{code;constructor(e,n){super(io(e,n)),this.code=e}};function gO(t){return`NG0${Math.abs(t)}`}function io(t,e){return`${gO(t)}${e?": "+e:""}`}function Me(t){for(let e in t)if(t[e]===Me)return e;throw Error("")}function Zr(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(Zr).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function My(t,e){return t?e?`${t} ${e}`:t:e||""}var mO=Me({__forward_ref__:Me});function Wh(t){return t.__forward_ref__=Wh,t.toString=function(){return Zr(this())},t}function Jt(t){return ky(t)?t():t}function ky(t){return typeof t=="function"&&t.hasOwnProperty(mO)&&t.__forward_ref__===Wh}function X(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function qu(t){return yO(t,Kh)}function Oy(t){return qu(t)!==null}function yO(t,e){return t.hasOwnProperty(e)&&t[e]||null}function _O(t){let e=t?.[Kh]??null;return e||null}function yy(t){return t&&t.hasOwnProperty(zh)?t[zh]:null}var Kh=Me({\u0275prov:Me}),zh=Me({\u0275inj:Me}),H=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=X({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Ly(t){return t&&!!t.\u0275providers}var Vy=Me({\u0275cmp:Me}),Fy=Me({\u0275dir:Me}),Uy=Me({\u0275pipe:Me}),jy=Me({\u0275mod:Me}),ju=Me({\u0275fac:Me}),us=Me({__NG_ELEMENT_ID__:Me}),hS=Me({__NG_ENV_ID__:Me});function By(t){return Yh(t,"@NgModule"),t[jy]||null}function ei(t){return Yh(t,"@Component"),t[Vy]||null}function Qh(t){return Yh(t,"@Directive"),t[Fy]||null}function $y(t){return Yh(t,"@Pipe"),t[Uy]||null}function Yh(t,e){if(t==null)throw new Q(-919,!1)}function mS(t){return typeof t=="string"?t:t==null?"":String(t)}var yS=Me({ngErrorCode:Me}),vO=Me({ngErrorMessage:Me}),EO=Me({ngTokenPath:Me});function zy(t,e){return _S("",-200,e)}function Jh(t,e){throw new Q(-201,!1)}function _S(t,e,n){let r=new Q(e,t);return r[yS]=e,r[vO]=t,n&&(r[EO]=n),r}function IO(t){return t[yS]}var _y;function vS(){return _y}function hn(t){let e=_y;return _y=t,e}function qy(t,e,n){let r=qu(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Jh(t,"")}var wO={},is=wO,vy="__NG_DI_FLAG__",Ey=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=ss(n)||0;try{return this.injector.get(e,r&8?null:is,r)}catch(i){if(Ba(i))return i;throw i}}};function TO(t,e=0){let n=Bh();if(n===void 0)throw new Q(-203,!1);if(n===null)return qy(t,void 0,e);{let r=bO(e),i=n.retrieve(t,r);if(Ba(i)){if(r.optional)return null;throw i}return i}}function de(t,e=0){return(vS()||TO)(Jt(t),e)}function V(t,e){return de(t,ss(e))}function ss(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function bO(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Iy(t){let e=[];for(let n=0;n<t.length;n++){let r=Jt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new Q(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],l=SO(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}e.push(de(i,o))}else e.push(de(r))}return e}function ES(t,e){return t[vy]=e,t.prototype[vy]=e,t}function SO(t){return t[vy]}function as(t,e){let n=t.hasOwnProperty(ju);return n?t[ju]:null}function Xh(t,e){t.forEach(n=>Array.isArray(n)?Xh(n,e):e(n))}function Hy(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Hu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function IS(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function wS(t,e,n){let r=za(t,e);return r>=0?t[r|1]=n:(r=~r,IS(t,r,e,n)),r}function Zh(t,e){let n=za(t,e);if(n>=0)return t[n|1]}function za(t,e){return CO(t,e,1)}function CO(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var ls={},to=[],_r=new H(""),Gy=new H("",-1),Wy=new H(""),Bu=class{get(e,n=is){if(n===is){let i=_S("",-201);throw i.name="\u0275NotFound",i}return n}};function Xt(t){return{\u0275providers:t}}function TS(t){return Xt([{provide:_r,multi:!0,useValue:t}])}function bS(...t){return{\u0275providers:ef(!0,t),\u0275fromNgModule:!0}}function ef(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Xh(e,s=>{let a=s;qh(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&SS(i,o),n}function SS(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Ky(i,o=>{e(o,r)})}}function qh(t,e,n,r){if(t=Jt(t),!t)return!1;let i=null,o=yy(t),s=!o&&ei(t);if(!o&&!s){let l=t.ngModule;if(o=yy(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let d of l)qh(d,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let d;Xh(o.imports,p=>{qh(p,e,n,r)&&(d||=[],d.push(p))}),d!==void 0&&SS(d,e)}if(!a){let d=as(i)||(()=>new i);e({provide:i,useFactory:d,deps:to},i),e({provide:Wy,useValue:i,multi:!0},i),e({provide:_r,useValue:()=>de(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let d=t;Ky(l,p=>{e(p,d)})}}else return!1;return i!==t&&t.providers!==void 0}function Ky(t,e){for(let n of t)Ly(n)&&(n=n.\u0275providers),Array.isArray(n)?Ky(n,e):e(n)}var AO=Me({provide:String,useValue:Me});function CS(t){return t!==null&&typeof t=="object"&&AO in t}function DO(t){return!!(t&&t.useExisting)}function RO(t){return!!(t&&t.useFactory)}function Hh(t){return typeof t=="function"}var Gu=new H(""),$h={},fS={},my;function Wu(){return my===void 0&&(my=new Bu),my}var et=class{},cs=class extends et{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Ty(e,s=>this.processProvider(s)),this.records.set(Gy,$a(void 0,this)),i.has("environment")&&this.records.set(et,$a(void 0,this));let o=this.records.get(Gu);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Wy,to,{self:!0}))}retrieve(e,n){let r=ss(n)||0;try{return this.get(e,is,r)}catch(i){if(Ba(i))return i;throw i}}destroy(){Uu(this),this._destroyed=!0;let e=oe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),oe(e)}}onDestroy(e){return Uu(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Uu(this);let n=mr(this),r=hn(void 0),i;try{return e()}finally{mr(n),hn(r)}}get(e,n=is,r){if(Uu(this),e.hasOwnProperty(hS))return e[hS](this);let i=ss(r),o,s=mr(this),a=hn(void 0);try{if(!(i&4)){let d=this.records.get(e);if(d===void 0){let p=kO(e)&&qu(e);p&&this.injectableDefInScope(p)?d=$a(wy(e),$h):d=null,this.records.set(e,d)}if(d!=null)return this.hydrate(e,d,i)}let l=i&2?Wu():this.parent;return n=i&8&&n===is?null:n,l.get(e,n)}catch(l){let d=IO(l);throw d===-200||d===-201?new Q(d,null):l}finally{hn(a),mr(s)}}resolveInjectorInitializers(){let e=oe(null),n=mr(this),r=hn(void 0),i;try{let o=this.get(_r,to,{self:!0});for(let s of o)s()}finally{mr(n),hn(r),oe(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Zr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Jt(e);let n=Hh(e)?e:Jt(e&&e.provide),r=PO(e);if(!Hh(e)&&e.multi===!0){let i=this.records.get(n);i||(i=$a(void 0,$h,!0),i.factory=()=>Iy(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=oe(null);try{if(n.value===fS)throw zy(Zr(e));return n.value===$h&&(n.value=fS,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&MO(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{oe(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Jt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function wy(t){let e=qu(t),n=e!==null?e.factory:as(t);if(n!==null)return n;if(t instanceof H)throw new Q(204,!1);if(t instanceof Function)return xO(t);throw new Q(204,!1)}function xO(t){if(t.length>0)throw new Q(204,!1);let n=_O(t);return n!==null?()=>n.factory(t):()=>new t}function PO(t){if(CS(t))return $a(void 0,t.useValue);{let e=AS(t);return $a(e,$h)}}function AS(t,e,n){let r;if(Hh(t)){let i=Jt(t);return as(i)||wy(i)}else if(CS(t))r=()=>Jt(t.useValue);else if(RO(t))r=()=>t.useFactory(...Iy(t.deps||[]));else if(DO(t))r=(i,o)=>de(Jt(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Jt(t&&(t.useClass||t.provide));if(NO(t))r=()=>new i(...Iy(t.deps));else return as(i)||wy(i)}return r}function Uu(t){if(t.destroyed)throw new Q(205,!1)}function $a(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function NO(t){return!!t.deps}function MO(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function kO(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Ty(t,e){for(let n of t)Array.isArray(n)?Ty(n,e):n&&Ly(n)?Ty(n.\u0275providers,e):e(n)}function Rt(t,e){let n;t instanceof cs?(Uu(t),n=t):n=new Ey(t);let r,i=mr(n),o=hn(void 0);try{return e()}finally{mr(i),hn(o)}}function DS(){return vS()!==void 0||Bh()!=null}var zt=0,ee=1,le=2,it=3,Cn=4,An=5,Zt=6,qa=7,tt=8,fn=9,ti=10,Be=11,Ha=12,Qy=13,ds=14,qt=15,hs=16,fs=17,ps=18,ni=19,Yy=20,Xr=21,tf=22,Ku=23,pn=24,gs=25,ms=26,Ue=27,RS=1,Wn=6,vr=7,Qu=8,Yu=9,Qe=10;function Dn(t){return Array.isArray(t)&&typeof t[RS]=="object"}function gn(t){return Array.isArray(t)&&t[RS]===!0}function Jy(t){return(t.flags&4)!==0}function oo(t){return t.componentOffset>-1}function nf(t){return(t.flags&1)===1}function ys(t){return!!t.template}function _s(t){return(t[le]&512)!==0}function so(t){return(t[le]&256)===256}var xS="svg",PS="math";function mn(t){for(;Array.isArray(t);)t=t[zt];return t}function Xy(t,e){return mn(e[t])}function Er(t,e){return mn(e[t.index])}function Ga(t,e){return t.data[e]}function NS(t,e){return t[e]}function Ir(t,e){let n=e[t];return Dn(n)?n:n[zt]}function rf(t){return(t[le]&128)===128}function MS(t){return gn(t[it])}function ao(t,e){return e==null?null:t[e]}function Zy(t){t[fs]=0}function e_(t){t[le]&1024||(t[le]|=1024,rf(t)&&Wa(t))}function kS(t,e){for(;t>0;)e=e[ds],t--;return e}function Ju(t){return!!(t[le]&9216||t[pn]?.dirty)}function of(t){t[ti].changeDetectionScheduler?.notify(8),t[le]&64&&(t[le]|=1024),Ju(t)&&Wa(t)}function Wa(t){t[ti].changeDetectionScheduler?.notify(0);let e=no(t);for(;e!==null&&!(e[le]&8192||(e[le]|=8192,!rf(e)));)e=no(e)}function t_(t,e){if(so(t))throw new Q(911,!1);t[Xr]===null&&(t[Xr]=[]),t[Xr].push(e)}function OS(t,e){if(t[Xr]===null)return;let n=t[Xr].indexOf(e);n!==-1&&t[Xr].splice(n,1)}function no(t){let e=t[it];return gn(e)?e[it]:e}function LS(t){return t[qa]??=[]}function VS(t){return t.cleanup??=[]}var he={lFrame:tC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var by=!1;function FS(){return he.lFrame.elementDepthCount}function US(){he.lFrame.elementDepthCount++}function jS(){he.lFrame.elementDepthCount--}function BS(){return he.bindingsEnabled}function n_(){return he.skipHydrationRootTNode!==null}function $S(t){return he.skipHydrationRootTNode===t}function zS(t){he.skipHydrationRootTNode=t}function qS(){he.skipHydrationRootTNode=null}function $e(){return he.lFrame.lView}function ri(){return he.lFrame.tView}function en(t){return he.lFrame.contextLView=t,t[tt]}function tn(t){return he.lFrame.contextLView=null,t}function wr(){let t=r_();for(;t!==null&&t.type===64;)t=t.parent;return t}function r_(){return he.lFrame.currentTNode}function HS(){let t=he.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ka(t,e){let n=he.lFrame;n.currentTNode=t,n.isParent=e}function i_(){return he.lFrame.isParent}function GS(){he.lFrame.isParent=!1}function WS(){return he.lFrame.contextLView}function o_(){return by}function s_(t){let e=by;return by=t,e}function KS(t){return he.lFrame.bindingIndex=t}function sf(){return he.lFrame.bindingIndex++}function QS(t){let e=he.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function YS(){return he.lFrame.inI18n}function JS(t,e){let n=he.lFrame;n.bindingIndex=n.bindingRootIndex=t,af(e)}function XS(){return he.lFrame.currentDirectiveIndex}function af(t){he.lFrame.currentDirectiveIndex=t}function ZS(t){let e=he.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function a_(t){he.lFrame.currentQueryIndex=t}function OO(t){let e=t[ee];return e.type===2?e.declTNode:e.type===1?t[An]:null}function c_(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=OO(o),i===null||(o=o[ds],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=he.lFrame=eC();return r.currentTNode=e,r.lView=t,!0}function cf(t){let e=eC(),n=t[ee];he.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function eC(){let t=he.lFrame,e=t===null?null:t.child;return e===null?tC(t):e}function tC(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function nC(){let t=he.lFrame;return he.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var u_=nC;function uf(){let t=nC();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function rC(t){return(he.lFrame.contextLView=kS(t,he.lFrame.contextLView))[tt]}function co(){return he.lFrame.selectedIndex}function uo(t){he.lFrame.selectedIndex=t}function l_(){return he.lFrame.currentNamespace}var iC=!0;function lf(){return iC}function ii(t){iC=t}function Sy(t,e=null,n=null,r){let i=d_(t,e,n,r);return i.resolveInjectorInitializers(),i}function d_(t,e=null,n=null,r,i=new Set){let o=[n||to,bS(t)];return r=r||(typeof t=="object"?void 0:Zr(t)),new cs(o,e||Wu(),r||null,i)}var Dt=class t{static THROW_IF_NOT_FOUND=is;static NULL=new Bu;static create(e,n){if(Array.isArray(e))return Sy({name:""},n,e,"");{let r=e.name??"";return Sy({name:r},e.parent,e.providers,r)}}static \u0275prov=X({token:t,providedIn:"any",factory:()=>de(Gy)});static __NG_ELEMENT_ID__=-1},Ye=new H(""),Tr=(()=>{class t{static __NG_ELEMENT_ID__=LO;static __NG_ENV_ID__=n=>n}return t})(),Cy=class extends Tr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return so(this._lView)}onDestroy(e){let n=this._lView;return t_(n,e),()=>OS(n,e)}};function LO(){return new Cy($e())}var oC=!1,sC=new H(""),br=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ct(!1);debugTaskTracker=V(sC,{optional:!0});get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new we(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),this.debugTaskTracker?.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.debugTaskTracker?.remove(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=X({token:t,providedIn:"root",factory:()=>new t})}return t})(),Ay=class extends Vt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,DS()&&(this.destroyRef=V(Tr,{optional:!0})??void 0,this.pendingTasks=V(br,{optional:!0})??void 0)}emit(e){let n=oe(null);try{super.next(e)}finally{oe(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof St&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},$t=Ay;function Gh(...t){}function h_(t){let e,n;function r(){t=Gh;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch(i){}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function aC(t){return queueMicrotask(()=>t()),()=>{t=Gh}}var f_="isAngularZone",$u=f_+"_ID",VO=0,Ge=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new $t(!1);onMicrotaskEmpty=new $t(!1);onStable=new $t(!1);onError=new $t(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=oC}=e;if(typeof Zone>"u")throw new Q(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,jO(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(f_)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new Q(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new Q(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,FO,Gh,Gh);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},FO={};function p_(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function UO(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){h_(()=>{t.callbackScheduled=!1,Dy(t),t.isCheckStableRunning=!0,p_(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Dy(t)}function jO(t){let e=()=>{UO(t)},n=VO++;t._inner=t._inner.fork({name:"angular",properties:{[f_]:!0,[$u]:n,[$u+n]:!0},onInvokeTask:(r,i,o,s,a,l)=>{if(BO(l))return r.invokeTask(o,s,a,l);try{return pS(t),r.invokeTask(o,s,a,l)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),gS(t)}},onInvoke:(r,i,o,s,a,l,d)=>{try{return pS(t),r.invoke(o,s,a,l,d)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!$O(l)&&e(),gS(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Dy(t),p_(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Dy(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function pS(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function gS(t){t._nesting--,p_(t)}var zu=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new $t;onMicrotaskEmpty=new $t;onStable=new $t;onError=new $t;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function BO(t){return cC(t,"__ignore_ng_zone__")}function $O(t){return cC(t,"__scheduler_tick__")}function cC(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var yr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Kn=new H("",{factory:()=>{let t=V(Ge),e=V(et),n;return r=>{t.runOutsideAngular(()=>{e.destroyed&&!n?setTimeout(()=>{throw r}):(n??=e.get(yr),n.handleError(r))})}}}),uC={provide:_r,useValue:()=>{let t=V(yr,{optional:!0})},multi:!0},zO=new H("",{factory:()=>{let t=V(Ye).defaultView;if(!t)return;let e=V(Kn),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),V(Tr).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function g_(){return Xt([TS(()=>{V(zO)})])}function ze(t,e){let[n,r,i]=ey(t,e?.equal),o=n,s=o[Sn];return o.set=r,o.update=i,o.asReadonly=lC.bind(o),o}function lC(){let t=this[Sn];if(t.readonlyFn===void 0){let e=()=>this();e[Sn]=t,t.readonlyFn=e}return t.readonlyFn}var df=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=qO}return t})();function qO(){return new df($e(),wr())}var ro=class{},Xu=new H("",{factory:()=>!0});var m_=new H(""),hf=(()=>{class t{internalPendingTasks=V(br);scheduler=V(ro);errorHandler=V(Kn);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=X({token:t,providedIn:"root",factory:()=>new t})}return t})(),y_=(()=>{class t{static \u0275prov=X({token:t,providedIn:"root",factory:()=>new Ry})}return t})(),Ry=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},xy=class{[Sn];constructor(e){this[Sn]=e}destroy(){this[Sn].destroy()}};function oi(t){return ty(t)}var ff={JSACTION:"jsaction"};function al(t){return{toString:t}.toString()}var pf="__parameters__";function ZO(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function e1(t,e,n){return al(()=>{let r=ZO(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(l,d,p){let v=l.hasOwnProperty(pf)?l[pf]:Object.defineProperty(l,pf,{value:[]})[pf];for(;v.length<=p;)v.push(null);return(v[p]=v[p]||[]).push(s),l}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Cr=ES(e1("Optional"),8);function t1(t){return typeof t=="function"}function QC(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var If=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},Z_=(()=>{let t=()=>YC;return t.ngInherit=!0,t})();function YC(t){return t.type.prototype.ngOnChanges&&(t.setInput=r1),n1}function n1(){let t=XC(this),e=t?.current;if(e){let n=t.previous;if(n===ls)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function r1(t,e,n,r,i){let o=this.declaredInputs[r],s=XC(t)||i1(t,{previous:ls,current:null}),a=s.current||(s.current={}),l=s.previous,d=l[o];a[o]=new If(d&&d.currentValue,n,l===ls),QC(t,e,i,n)}var JC="__ngSimpleChanges__";function XC(t){return t[JC]||null}function i1(t,e){return t[JC]=e}var dC=[];var Ae=function(t,e=null,n){for(let r=0;r<dC.length;r++){let i=dC[r];i(t,e,n)}},me=(function(t){return t[t.TemplateCreateStart=0]="TemplateCreateStart",t[t.TemplateCreateEnd=1]="TemplateCreateEnd",t[t.TemplateUpdateStart=2]="TemplateUpdateStart",t[t.TemplateUpdateEnd=3]="TemplateUpdateEnd",t[t.LifecycleHookStart=4]="LifecycleHookStart",t[t.LifecycleHookEnd=5]="LifecycleHookEnd",t[t.OutputStart=6]="OutputStart",t[t.OutputEnd=7]="OutputEnd",t[t.BootstrapApplicationStart=8]="BootstrapApplicationStart",t[t.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",t[t.BootstrapComponentStart=10]="BootstrapComponentStart",t[t.BootstrapComponentEnd=11]="BootstrapComponentEnd",t[t.ChangeDetectionStart=12]="ChangeDetectionStart",t[t.ChangeDetectionEnd=13]="ChangeDetectionEnd",t[t.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",t[t.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",t[t.AfterRenderHooksStart=16]="AfterRenderHooksStart",t[t.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",t[t.ComponentStart=18]="ComponentStart",t[t.ComponentEnd=19]="ComponentEnd",t[t.DeferBlockStateStart=20]="DeferBlockStateStart",t[t.DeferBlockStateEnd=21]="DeferBlockStateEnd",t[t.DynamicComponentStart=22]="DynamicComponentStart",t[t.DynamicComponentEnd=23]="DynamicComponentEnd",t[t.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",t[t.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",t})(me||{});function o1(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=YC(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function s1(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:d,ngOnDestroy:p}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),d&&((t.viewHooks??=[]).push(n,d),(t.viewCheckHooks??=[]).push(n,d)),p!=null&&(t.destroyHooks??=[]).push(n,p)}}function mf(t,e,n){ZC(t,e,3,n)}function yf(t,e,n,r){(t[le]&3)===n&&ZC(t,e,n,r)}function __(t,e){let n=t[le];(n&3)===e&&(n&=16383,n+=1,t[le]=n)}function ZC(t,e,n,r){let i=r!==void 0?t[fs]&65535:0,o=r??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(t[fs]+=65536),(a<o||o==-1)&&(a1(t,n,e,l),t[fs]=(t[fs]&4294901760)+l+2),l++}function hC(t,e){Ae(me.LifecycleHookStart,t,e);let n=oe(null);try{e.call(t)}finally{oe(n),Ae(me.LifecycleHookEnd,t,e)}}function a1(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[le]>>14<t[fs]>>16&&(t[le]&3)===e&&(t[le]+=16384,hC(a,o)):hC(a,o)}var Ya=-1,tl=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function c1(t){return(t.flags&8)!==0}function u1(t){return(t.flags&16)!==0}function l1(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];h1(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function d1(t){return t===3||t===4||t===6}function h1(t){return t.charCodeAt(0)===64}function ev(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?fC(t,n,i,null,e[++r]):fC(t,n,i,null,null))}}return t}function fC(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function eA(t){return t!==Ya}function wf(t){return t&32767}function f1(t){return t>>16}function Tf(t,e){let n=f1(t),r=e;for(;n>0;)r=r[ds],n--;return r}var R_=!0;function pC(t){let e=R_;return R_=t,e}var p1=256,tA=p1-1,nA=5,g1=0,Sr={};function m1(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(us)&&(r=n[us]),r==null&&(r=n[us]=g1++);let i=r&tA,o=1<<i;e.data[t+(i>>nA)]|=o}function rA(t,e){let n=iA(t,e);if(n!==-1)return n;let r=e[ee];r.firstCreatePass&&(t.injectorIndex=e.length,v_(r.data,t),v_(e,null),v_(r.blueprint,null));let i=tv(t,e),o=t.injectorIndex;if(eA(i)){let s=wf(i),a=Tf(i,e),l=a[ee].data;for(let d=0;d<8;d++)e[o+d]=a[s+d]|l[s+d]}return e[o+8]=i,o}function v_(t,e){t.push(0,0,0,0,0,0,0,0,e)}function iA(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function tv(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=uA(i),r===null)return Ya;if(n++,i=i[ds],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ya}function y1(t,e,n){m1(t,e,n)}function oA(t,e,n){if(n&8||t!==void 0)return t;Jh(e,"NodeInjector")}function sA(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[fn],o=hn(void 0);try{return i?i.get(e,r,n&8):qy(e,r,n&8)}finally{hn(o)}}return oA(r,e,n)}function aA(t,e,n,r=0,i){if(t!==null){if(e[le]&2048&&!(r&2)){let s=w1(t,e,n,r,Sr);if(s!==Sr)return s}let o=cA(t,e,n,r,Sr);if(o!==Sr)return o}return sA(e,n,r,i)}function cA(t,e,n,r,i){let o=E1(n);if(typeof o=="function"){if(!c_(e,t,r))return r&1?oA(i,n,r):sA(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Jh(n);else return s}finally{u_()}}else if(typeof o=="number"){let s=null,a=iA(t,e),l=Ya,d=r&1?e[qt][An]:null;for((a===-1||r&4)&&(l=a===-1?tv(t,e):e[a+8],l===Ya||!mC(r,!1)?a=-1:(s=e[ee],a=wf(l),e=Tf(l,e)));a!==-1;){let p=e[ee];if(gC(o,a,p.data)){let v=_1(a,e,n,s,r,d);if(v!==Sr)return v}l=e[a+8],l!==Ya&&mC(r,e[ee].data[a+8]===d)&&gC(o,a,e)?(s=p,a=wf(l),e=Tf(l,e)):a=-1}}return i}function _1(t,e,n,r,i,o){let s=e[ee],a=s.data[t+8],l=r==null?oo(a)&&R_:r!=s&&(a.type&3)!==0,d=i&1&&o===a,p=v1(a,s,n,l,d);return p!==null?x_(e,s,p,a,i):Sr}function v1(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,l=t.directiveStart,d=t.directiveEnd,p=o>>20,v=r?a:a+p,S=i?a+p:d;for(let D=v;D<S;D++){let P=s[D];if(D<l&&n===P||D>=l&&P.type===n)return D}if(i){let D=s[l];if(D&&ys(D)&&D.type===n)return l}return null}function x_(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof tl){let a=o;if(a.resolving)throw zy("");let l=pC(a.canSeeViewProviders);a.resolving=!0;let d=s[n].type||s[n],p,v=a.injectImpl?hn(a.injectImpl):null,S=c_(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&o1(n,s[n],e)}finally{v!==null&&hn(v),pC(l),a.resolving=!1,u_()}}return o}function E1(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(us)?t[us]:void 0;return typeof e=="number"?e>=0?e&tA:I1:e}function gC(t,e,n){let r=1<<t;return!!(n[e+(t>>nA)]&r)}function mC(t,e){return!(t&2)&&!(t&1&&e)}var Es=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return aA(this._tNode,this._lView,e,ss(r),n)}};function I1(){return new Es(wr(),$e())}function Ff(t){return al(()=>{let e=t.prototype.constructor,n=e[ju]||P_(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[ju]||P_(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function P_(t){return ky(t)?()=>{let e=P_(Jt(t));return e&&e()}:as(t)}function w1(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[le]&2048&&!_s(s);){let a=cA(o,s,n,r|2,Sr);if(a!==Sr)return a;let l=o.parent;if(!l){let d=s[Yy];if(d){let p=d.get(n,Sr,r);if(p!==Sr)return p}l=uA(s),s=s[ds]}o=l}return i}function uA(t){let e=t[ee],n=e.type;return n===2?e.declTNode:n===1?t[An]:null}function T1(){return nv(wr(),$e())}function nv(t,e){return new lA(Er(t,e))}var lA=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=T1}return t})();var dA="ngSkipHydration",b1="ngskiphydration";function hA(t){let e=t.mergedAttrs;if(e===null)return!1;for(let n=0;n<e.length;n+=2){let r=e[n];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===b1)return!0}return!1}function fA(t){return t.hasAttribute(dA)}function bf(t){return(t.flags&128)===128}function pA(t){if(bf(t))return!0;let e=t.parent;for(;e;){if(bf(t)||hA(e))return!0;e=e.parent}return!1}var rv=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(rv||{}),gA=new Map,S1=0;function C1(){return S1++}function A1(t){gA.set(t[ni],t)}function N_(t){gA.delete(t[ni])}var yC="__ngContext__";function Za(t,e){Dn(e)?(t[yC]=e[ni],A1(e)):t[yC]=e}function mA(t){return _A(t[Ha])}function yA(t){return _A(t[Cn])}function _A(t){for(;t!==null&&!gn(t);)t=t[Cn];return t}var M_;function iv(t){M_=t}function vA(){if(M_!==void 0)return M_;if(typeof document<"u")return document;throw new Q(210,!1)}var Ar=new H("",{factory:()=>D1}),D1="ng";var Uf=new H(""),Ss=new H("",{providedIn:"platform",factory:()=>"unknown"});var jf=new H("",{factory:()=>V(Ye).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var ic=(()=>{class t{static \u0275prov=X({token:t,providedIn:"root",factory:()=>{let n=new t;return n.store=R1(V(Ye),V(Ar)),n}});store={};onSerializeCallbacks={};get(n,r){return this.store[n]!==void 0?this.store[n]:r}set(n,r){this.store[n]=r}remove(n){delete this.store[n]}hasKey(n){return this.store.hasOwnProperty(n)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(n,r){this.onSerializeCallbacks[n]=r}toJson(){for(let n in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(n))try{this.store[n]=this.onSerializeCallbacks[n]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return t})();function R1(t,e){let n=t.getElementById(e+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var EA="h",IA="b",x1="f",P1="n",wA="e",TA="t",Bf="c",ov="x",nl="r",bA="i",SA="n",sv="d";var CA="di",AA="s",DA="p";var cl=new H(""),RA=!1,av=new H("",{factory:()=>RA});var cv=new H(""),xA=!1,PA=new H("",{factory:()=>[]}),NA=new H(""),uv=new H("",{factory:()=>new Map});var ul="ngb";var MA=(t,e,n)=>{let r=t,i=r.__jsaction_fns??new Map,o=i.get(e)??[];o.push(n),i.set(e,o),r.__jsaction_fns=i},kA=(t,e)=>{let n=t,r=n.getAttribute(ul)??"",i=e.get(r)??new Set;i.has(n)||i.add(n),e.set(r,i)};var OA=t=>{t.removeAttribute(ff.JSACTION),t.removeAttribute(ul),t.__jsaction_fns=void 0},LA=new H("",{factory:()=>({})});function lv(t,e){let n=e?.__jsaction_fns?.get(t.type);if(!(!n||!e?.isConnected))for(let r of n)r(t)}var k_=new Map;function VA(t,e){return k_.set(t,e),()=>k_.delete(t)}var _C=!1,FA=(t,e,n,r)=>{};function N1(t,e,n,r){FA(t,e,n,r)}function UA(){_C||(FA=(t,e,n,r)=>{let i=t[fn].get(Ar);k_.get(i)?.(e,n,r)},_C=!0)}var $f=new H("");function zf(t){return(t.flags&32)===32}var M1="__nghData__",dv=M1,k1="__nghDeferData__",jA=k1;var _f="ngh",BA="nghm",$A=()=>null;function O1(t,e,n=!1){let r=t.getAttribute(_f);if(r==null)return null;let[i,o]=r.split("|");if(r=n?o:i,!r)return null;let s=o?`|${o}`:"",a=n?i:s,l={};if(r!==""){let p=e.get(ic,null,{optional:!0});p!==null&&(l=p.get(dv,[])[Number(r)])}let d={data:l,firstChild:t.firstChild??null};return n&&(d.firstChild=t,qf(d,0,t.nextSibling)),a?t.setAttribute(_f,a):t.removeAttribute(_f),d}function zA(){$A=O1}function qA(t,e,n=!1){return $A(t,e,n)}function HA(t){let e=t._lView;return e[ee].type===2?null:(_s(e)&&(e=e[Ue]),e)}function L1(t){return t.textContent?.replace(/\s/gm,"")}function V1(t){let e=vA(),n=e.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=L1(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=n.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function qf(t,e,n){t.segmentHeads??={},t.segmentHeads[e]=n}function O_(t,e){return t.segmentHeads?.[e]??null}function GA(t){return t.get(NA,!1,{optional:!0})}function F1(t,e){let n=t.data,r=n[wA]?.[e]??null;return r===null&&n[Bf]?.[e]&&(r=hv(t,e)),r}function WA(t,e){return t.data[Bf]?.[e]??null}function hv(t,e){let n=WA(t,e)??[],r=0;for(let i of n)r+=i[nl]*(i[ov]??1);return r}function U1(t){if(typeof t.disconnectedNodes>"u"){let e=t.data[sv];t.disconnectedNodes=e?new Set(e):null}return t.disconnectedNodes}function KA(t,e){if(typeof t.disconnectedNodes>"u"){let n=t.data[sv];t.disconnectedNodes=n?new Set(n):null}return!!U1(t)?.has(e)}function Hf(t,e){let n=t[Zt];return n!==null&&!n_()&&!zf(e)&&!KA(n,e.index-Ue)}function j1(t,e){let n=e.get($f),i=e.get(ic).get(jA,{}),o=!1,s=t,a=null,l=[];for(;!o&&s;){o=n.has(s);let d=n.hydrating.get(s);if(a===null&&d!=null){a=d.promise;break}l.unshift(s),s=i[s][DA]}return{parentBlockPromise:a,hydrationQueue:l}}function E_(t){return!!t&&t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===BA}function vC(t){for(;t&&t.nodeType===Node.TEXT_NODE;)t=t.previousSibling;return t}function QA(t){for(let r of t.body.childNodes)if(E_(r))return;let e=vC(t.body.previousSibling);if(E_(e))return;let n=vC(t.head.lastChild);if(!E_(n))throw new Q(-507,!1)}function YA(t,e){let n=t.contentQueries;if(n!==null){let r=oe(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];a_(o),a.contentQueries(2,e[s],s)}}}finally{oe(r)}}}function L_(t,e,n){a_(0);let r=oe(null);try{e(t,n)}finally{oe(r)}}function JA(t,e,n){if(Jy(e)){let r=oe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let l=n[s];a.contentQueries(1,l,s)}}}finally{oe(r)}}}var Yn=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})(Yn||{});var V_=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ny})`}};function fv(t){return t instanceof V_?t.changingThisBreaksApplicationSecurity:t}var B1=/^>|^->|<!--|-->|--!>|<!-$/g,$1=/(<|>)/g,z1="\u200B$1\u200B";function q1(t){return t.replace(B1,e=>e.replace($1,z1))}function XA(t,e){return t.createText(e)}function H1(t,e,n){t.setValue(e,n)}function ZA(t,e){return t.createComment(q1(e))}function pv(t,e,n){return t.createElement(e,n)}function Sf(t,e,n,r,i){t.insertBefore(e,n,r,i)}function e0(t,e,n){t.appendChild(e,n)}function EC(t,e,n,r,i){r!==null?Sf(t,e,n,r,i):e0(t,e,n)}function gv(t,e,n,r){t.removeChild(null,e,n,r)}function t0(t){t.textContent=""}function G1(t,e,n){t.setAttribute(e,"style",n)}function W1(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function n0(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&l1(t,e,r),i!==null&&W1(t,e,i),o!==null&&G1(t,e,o)}function r0(t){return t.ownerDocument.body}function i0(t){return t instanceof Function?t():t}function K1(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var o0="ng-template";function Q1(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&K1(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(mv(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function mv(t){return t.type===4&&t.value!==o0}function Y1(t,e,n){let r=t.type===4&&!n?o0:t.value;return e===r}function J1(t,e,n){let r=4,i=t.attrs,o=i!==null?eL(i):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!Qn(r)&&!Qn(l))return!1;if(s&&Qn(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!Y1(t,l,n)||l===""&&e.length===1){if(Qn(r))return!1;s=!0}}else if(r&8){if(i===null||!Q1(t,i,l,n)){if(Qn(r))return!1;s=!0}}else{let d=e[++a],p=X1(l,i,mv(t),n);if(p===-1){if(Qn(r))return!1;s=!0;continue}if(d!==""){let v;if(p>o?v="":v=i[p+1].toLowerCase(),r&2&&d!==v){if(Qn(r))return!1;s=!0}}}}return Qn(r)||s}function Qn(t){return(t&1)===0}function X1(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return tL(e,t)}function Z1(t,e,n=!1){for(let r=0;r<e.length;r++)if(J1(t,e[r],n))return!0;return!1}function eL(t){for(let e=0;e<t.length;e++){let n=t[e];if(d1(n))return e}return t.length}function tL(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function IC(t,e){return t?":not("+e.trim()+")":e}function nL(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Qn(s)&&(e+=IC(o,i),i=""),r=s,o=o||!Qn(r);n++}return i!==""&&(e+=IC(o,i)),e}function rL(t){return t.map(nL).join(",")}function iL(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Qn(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var ai={};function yv(t,e,n,r,i,o,s,a,l,d,p){let v=Ue+r,S=v+i,D=oL(v,S),P=typeof d=="function"?d():d;return D[ee]={type:t,blueprint:D,template:n,queries:null,viewQuery:a,declTNode:e,data:D.slice().fill(null,v),bindingStartIndex:v,expandoStartIndex:S,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:P,incompleteFirstPass:!1,ssrId:p}}function oL(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:ai);return n}function sL(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=yv(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function _v(t,e,n,r,i,o,s,a,l,d,p){let v=e.blueprint.slice();return v[zt]=i,v[le]=r|4|128|8|64|1024,(d!==null||t&&t[le]&2048)&&(v[le]|=2048),Zy(v),v[it]=v[ds]=t,v[tt]=n,v[ti]=s||t&&t[ti],v[Be]=a||t&&t[Be],v[fn]=l||t&&t[fn]||null,v[An]=o,v[ni]=C1(),v[Zt]=p,v[Yy]=d,v[qt]=e.type==2?t[qt]:v,v}function aL(t,e,n){let r=Er(e,t),i=sL(n),o=t[ti].rendererFactory,s=vv(t,_v(t,i,null,s0(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function s0(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function a0(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function vv(t,e){return t[Ha]?t[Qy][Cn]=e:t[Ha]=e,t[Qy]=e,e}function ye(t=1){c0(ri(),$e(),co()+t,!1)}function c0(t,e,n,r){if(!r)if((e[le]&3)===3){let o=t.preOrderCheckHooks;o!==null&&mf(e,o,n)}else{let o=t.preOrderHooks;o!==null&&yf(e,o,0,n)}uo(n)}var Gf=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(Gf||{});function F_(t,e,n,r){let i=oe(null);try{let[o,s,a]=t.inputs[n],l=null;(s&Gf.SignalBased)!==0&&(l=e[o][Sn]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,l,r,n,o):QC(e,l,o,r)}finally{oe(i)}}var si=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(si||{}),cL;function Ev(t,e){return cL(t,e)}var Is=new Set,Wf=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Wf||{}),lo=new H(""),wC=new Set;function Rn(t){wC.has(t)||(wC.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Iv=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=X({token:t,providedIn:"root",factory:()=>new t})}return t})(),u0=[0,1,2,3],l0=(()=>{class t{ngZone=V(Ge);scheduler=V(ro);errorHandler=V(yr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){V(lo,{optional:!0})}execute(){let n=this.sequences.size>0;n&&Ae(me.AfterRenderHooksStart),this.executing=!0;for(let r of u0)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&Ae(me.AfterRenderHooksEnd)}register(n){let{view:r}=n;r!==void 0?((r[gs]??=[]).push(n),Wa(r),r[le]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Wf.AFTER_NEXT_RENDER,n):n()}static \u0275prov=X({token:t,providedIn:"root",factory:()=>new t})}return t})(),Cf=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[gs];e&&(this.view[gs]=e.filter(n=>n!==this))}};function oc(t,e){let n=e?.injector??V(Dt);return Rn("NgAfterNextRender"),lL(t,n,e,!0)}function uL(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function lL(t,e,n,r){let i=e.get(Iv);i.impl??=e.get(l0);let o=e.get(lo,null,{optional:!0}),s=n?.manualCleanup!==!0?e.get(Tr):null,a=e.get(df,null,{optional:!0}),l=new Cf(i.impl,uL(t),a?.view,r,s,o?.snapshot(null));return i.impl.register(l),l}var wv=new H("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:V(et)})});function d0(t,e,n){let r=t.get(wv);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function dL(t,e){let n=t.get(wv);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function hL(t,e){for(let[n,r]of e)d0(t,r.animateFns)}function fL(t,e){let n=t.get(wv);if(Array.isArray(e))for(let r of e)n.queue.delete(r);else n.queue.delete(e)}function TC(t,e,n,r){let i=t?.[ms]?.enter;e!==null&&i&&i.has(n.index)&&hL(r,i)}function Qa(t,e,n,r,i,o,s,a){if(i!=null){let l,d=!1;gn(i)?l=i:Dn(i)&&(d=!0,i=i[zt]);let p=mn(i);t===0&&r!==null?(TC(a,r,o,n),s==null?e0(e,r,p):Sf(e,r,p,s||null,!0)):t===1&&r!==null?(TC(a,r,o,n),Sf(e,r,p,s||null,!0)):t===2?bC(a,o,n,v=>{gv(e,p,d,v)}):t===3&&bC(a,o,n,()=>{e.destroyNode(p)}),l!=null&&CL(e,t,n,l,o,r,s)}}function pL(t,e){h0(t,e),e[zt]=null,e[An]=null}function gL(t,e,n,r,i,o){r[zt]=i,r[An]=e,Qf(t,r,n,1,i,o)}function h0(t,e){e[ti].changeDetectionScheduler?.notify(9),Qf(t,e,e[Be],2,null,null)}function mL(t){let e=t[Ha];if(!e)return I_(t[ee],t);for(;e;){let n=null;if(Dn(e))n=e[Ha];else{let r=e[Qe];r&&(n=r)}if(!n){for(;e&&!e[Cn]&&e!==t;)Dn(e)&&I_(e[ee],e),e=e[it];e===null&&(e=t),Dn(e)&&I_(e[ee],e),n=e&&e[Cn]}e=n}}function Tv(t,e){let n=t[Yu],r=n.indexOf(e);n.splice(r,1)}function Kf(t,e){if(so(e))return;let n=e[Be];n.destroyNode&&Qf(t,e,n,3,null,null),mL(e)}function I_(t,e){if(so(e))return;let n=oe(null);try{e[le]&=-129,e[le]|=256,e[pn]&&Nu(e[pn]),vL(t,e),_L(t,e),e[ee].type===1&&e[Be].destroy();let r=e[hs];if(r!==null&&gn(e[it])){r!==e[it]&&Tv(r,e);let i=e[ps];i!==null&&i.detachView(t)}N_(e)}finally{oe(n)}}function bC(t,e,n,r){let i=t?.[ms];if(i?.enter?.has(e.index)&&fL(n,i.enter.get(e.index).animateFns),i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&Is.add(t[ni]),d0(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let l=0;l<s.animateFns.length;l++){let d=s.animateFns[l],{promise:p}=d();a.push(p)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),yL(t,r)}else t&&Is.delete(t[ni]),r(!1)},i)}function yL(t,e){let n=t[ms]?.running;if(n){n.then(()=>{t[ms].running=void 0,Is.delete(t[ni]),e(!0)});return}e(!1)}function _L(t,e){let n=t.cleanup,r=e[qa];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[qa]=null);let i=e[Xr];if(i!==null){e[Xr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Ku];if(o!==null){e[Ku]=null;for(let s of o)s.destroy()}}function vL(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof tl)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];Ae(me.LifecycleHookStart,a,l);try{l.call(a)}finally{Ae(me.LifecycleHookEnd,a,l)}}else{Ae(me.LifecycleHookStart,i,o);try{o.call(i)}finally{Ae(me.LifecycleHookEnd,i,o)}}}}}function EL(t,e,n){return IL(t,e.parent,n)}function IL(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[zt];if(oo(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Yn.None||i===Yn.Emulated)return null}return Er(r,n)}function wL(t,e,n){return bL(t,e,n)}function TL(t,e,n){return t.type&40?Er(t,n):null}var bL=TL,SC;function bv(t,e,n,r){let i=EL(t,r,e),o=e[Be],s=r.parent||e[An],a=wL(s,r,e);if(i!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)EC(o,i,n[l],a,!1);else EC(o,i,n,a,!1);SC!==void 0&&SC(o,r,e,n,i)}function Zu(t,e){if(e!==null){let n=e.type;if(n&3)return Er(e,t);if(n&4)return U_(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Zu(t,r);{let i=t[e.index];return gn(i)?U_(-1,i):mn(i)}}else{if(n&128)return Zu(t,e.next);if(n&32)return Ev(e,t)()||mn(t[e.index]);{let r=f0(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=no(t[qt]);return Zu(i,r)}else return Zu(t,e.next)}}}return null}function f0(t,e){if(e!==null){let r=t[qt][An],i=e.projection;return r.projection[i]}return null}function U_(t,e){let n=Qe+t+1;if(n<e.length){let r=e[n],i=r[ee].firstChild;if(i!==null)return Zu(r,i)}return e[vr]}function Sv(t,e,n,r,i,o,s){for(;n!=null;){let a=r[fn];if(n.type===128){n=n.next;continue}let l=r[n.index],d=n.type;if(s&&e===0&&(l&&Za(mn(l),r),n.flags|=2),!zf(n))if(d&8)Sv(t,e,n.child,r,i,o,!1),Qa(e,t,a,i,l,n,o,r);else if(d&32){let p=Ev(n,r),v;for(;v=p();)Qa(e,t,a,i,v,n,o,r);Qa(e,t,a,i,l,n,o,r)}else d&16?SL(t,e,r,n,i,o):Qa(e,t,a,i,l,n,o,r);n=s?n.projectionNext:n.next}}function Qf(t,e,n,r,i,o){Sv(n,r,t.firstChild,e,i,o,!1)}function SL(t,e,n,r,i,o){let s=n[qt],l=s[An].projection[r.projection];if(Array.isArray(l))for(let d=0;d<l.length;d++){let p=l[d];Qa(e,t,n[fn],i,p,r,o,n)}else{let d=l,p=s[it];bf(r)&&(d.flags|=128),Sv(t,e,d,p,i,o,!0)}}function CL(t,e,n,r,i,o,s){let a=r[vr],l=mn(r);a!==l&&Qa(e,t,n,o,a,i,s);for(let d=Qe;d<r.length;d++){let p=r[d];Qf(p[ee],p,t,e,o,a)}}function AL(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:si.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=si.Important),t.setStyle(n,r,i,o))}}function p0(t,e,n,r,i){let o=co(),s=r&2;try{uo(-1),s&&e.length>Ue&&c0(t,e,Ue,!1);let a=s?me.TemplateUpdateStart:me.TemplateCreateStart;Ae(a,i,n),n(r,i)}finally{uo(o);let a=s?me.TemplateUpdateEnd:me.TemplateCreateEnd;Ae(a,i,n)}}function g0(t,e,n){PL(t,e,n),(n.flags&64)===64&&NL(t,e,n)}function m0(t,e,n=Er){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function DL(t,e,n,r){let o=r.get(av,RA)||n===Yn.ShadowDom||n===Yn.ExperimentalIsolatedShadowDom,s=t.selectRootElement(e,o);return RL(s),s}function RL(t){y0(t)}var y0=()=>null;function xL(t){fA(t)?t0(t):V1(t)}function _0(){y0=xL}function PL(t,e,n){let r=n.directiveStart,i=n.directiveEnd;oo(n)&&aL(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||rA(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],l=x_(e,t,s,n);if(Za(l,e),o!==null&&OL(e,s-r,l,a,n,o),ys(a)){let d=Ir(n.index,e);d[tt]=x_(e,t,s,n)}}}function NL(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=XS();try{uo(o);for(let a=r;a<i;a++){let l=t.data[a],d=e[a];af(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&ML(l,d)}}finally{uo(-1),af(s)}}function ML(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function kL(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];Z1(e,o.selectors,!1)&&(r??=[],ys(o)?r.unshift(o):r.push(o))}return r}function OL(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],d=s[a+1];F_(r,n,l,d)}}function LL(t,e,n,r,i){let o=Ue+n,s=e[ee],a=i(s,e,t,r,n);e[o]=a,Ka(t,!0);let l=t.type===2;return l?(n0(e[Be],a,t),(FS()===0||nf(t))&&Za(a,e),US()):Za(a,e),lf()&&(!l||!zf(t))&&bv(s,e,a,t),t}function VL(t){let e=t;return i_()?GS():(e=e.parent,Ka(e,!1)),e}function Cv(t,e){let n=t[fn];if(!n)return;let r;try{r=n.get(Kn,null)}catch(i){r=null}r?.(e)}function v0(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let l=0;l<s.length;l+=2){let d=s[l],p=s[l+1],v=e.data[d];F_(v,n[d],p,i),a=!0}if(o)for(let l of o){let d=n[l],p=e.data[l];F_(p,d,r,i),a=!0}return a}function FL(t,e){let n=Ir(e,t),r=n[ee];UL(r,n);let i=n[zt];i!==null&&n[Zt]===null&&(n[Zt]=qA(i,n[fn])),Ae(me.ComponentStart);try{Av(r,n,n[tt])}finally{Ae(me.ComponentEnd,n[tt])}}function UL(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Av(t,e,n){cf(e);try{let r=t.viewQuery;r!==null&&L_(1,r,n);let i=t.template;i!==null&&p0(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[ps]?.finishViewCreation(t),t.staticContentQueries&&YA(t,e),t.staticViewQueries&&L_(2,t.viewQuery,n);let o=t.components;o!==null&&jL(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[le]&=-5,uf()}}function jL(t,e){for(let n=0;n<e.length;n++)FL(t,e[n])}function Yf(t,e,n,r){let i=oe(null);try{let o=e.tView,a=t[le]&4096?4096:16,l=_v(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=t[e.index];l[hs]=d;let p=t[ps];return p!==null&&(l[ps]=p.createEmbeddedView(o)),Av(o,l,n),l}finally{oe(i)}}function ec(t,e){return!e||e.firstChild===null||bf(t)}function rl(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(mn(o)),gn(o)&&E0(o,r);let s=n.type;if(s&8)rl(t,e,n.child,r);else if(s&32){let a=Ev(n,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=f0(e,n);if(Array.isArray(a))r.push(...a);else{let l=no(e[qt]);rl(l[ee],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function E0(t,e){for(let n=Qe;n<t.length;n++){let r=t[n],i=r[ee].firstChild;i!==null&&rl(r[ee],r,i,e)}t[vr]!==t[zt]&&e.push(t[vr])}function I0(t){if(t[gs]!==null){for(let e of t[gs])e.impl.addSequence(e);t[gs].length=0}}var w0=[];function BL(t){return t[pn]??$L(t)}function $L(t){let e=w0.pop()??Object.create(qL);return e.lView=t,e}function zL(t){t.lView[pn]!==t&&(t.lView=null,w0.push(t))}var qL=_e(B({},mh),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Wa(t.lView)},consumerOnSignalRead(){this.lView[pn]=this}});function HL(t){let e=t[pn]??Object.create(GL);return e.lView=t,e}var GL=_e(B({},mh),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=no(t.lView);for(;e&&!T0(e[ee]);)e=no(e);e&&e_(e)},consumerOnSignalRead(){this.lView[pn]=this}});function T0(t){return t.type!==2}function b0(t){if(t[Ku]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Ku])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[le]&8192)}}var WL=100;function S0(t,e=0){let r=t[ti].rendererFactory,i=!1;i||r.begin?.();try{KL(t,e)}finally{i||r.end?.()}}function KL(t,e){let n=o_();try{s_(!0),j_(t,e);let r=0;for(;Ju(t);){if(r===WL)throw new Q(103,!1);r++,j_(t,1)}}finally{s_(n)}}function QL(t,e,n,r){if(so(e))return;let i=e[le],o=!1,s=!1;cf(e);let a=!0,l=null,d=null;o||(T0(t)?(d=BL(e),l=_h(d)):gh()===null?(a=!1,d=HL(e),l=_h(d)):e[pn]&&(Nu(e[pn]),e[pn]=null));try{Zy(e),KS(t.bindingStartIndex),n!==null&&p0(t,e,n,2,r);let p=(i&3)===3;if(!o)if(p){let D=t.preOrderCheckHooks;D!==null&&mf(e,D,null)}else{let D=t.preOrderHooks;D!==null&&yf(e,D,0,null),__(e,0)}if(s||YL(e),b0(e),C0(e,0),t.contentQueries!==null&&YA(t,e),!o)if(p){let D=t.contentCheckHooks;D!==null&&mf(e,D)}else{let D=t.contentHooks;D!==null&&yf(e,D,1),__(e,1)}XL(t,e);let v=t.components;v!==null&&D0(e,v,0);let S=t.viewQuery;if(S!==null&&L_(2,S,r),!o)if(p){let D=t.viewCheckHooks;D!==null&&mf(e,D)}else{let D=t.viewHooks;D!==null&&yf(e,D,2),__(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[tf]){for(let D of e[tf])D();e[tf]=null}o||(I0(e),e[le]&=-73)}catch(p){throw o||Wa(e),p}finally{d!==null&&(Jm(d,l),a&&zL(d)),uf()}}function C0(t,e){for(let n=mA(t);n!==null;n=yA(n))for(let r=Qe;r<n.length;r++){let i=n[r];A0(i,e)}}function YL(t){for(let e=mA(t);e!==null;e=yA(e)){if(!(e[le]&2))continue;let n=e[Yu];for(let r=0;r<n.length;r++){let i=n[r];e_(i)}}}function JL(t,e,n){Ae(me.ComponentStart);let r=Ir(e,t);try{A0(r,n)}finally{Ae(me.ComponentEnd,r[tt])}}function A0(t,e){rf(t)&&j_(t,e)}function j_(t,e){let r=t[ee],i=t[le],o=t[pn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&vh(o)),s||=!1,o&&(o.dirty=!1),t[le]&=-9217,s)QL(r,t,r.template,t[tt]);else if(i&8192){let a=oe(null);try{b0(t),C0(t,1);let l=r.components;l!==null&&D0(t,l,1),I0(t)}finally{oe(a)}}}function D0(t,e,n){for(let r=0;r<e.length;r++)JL(t,e[r],n)}function XL(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)uo(~i);else{let o=i,s=n[++r],a=n[++r];JS(s,o);let l=e[o];Ae(me.HostBindingsUpdateStart,l);try{a(2,l)}finally{Ae(me.HostBindingsUpdateEnd,l)}}}}finally{uo(-1)}}function Jf(t,e){let n=o_()?64:1088;for(t[ti].changeDetectionScheduler?.notify(e);t;){t[le]|=n;let r=no(t);if(_s(t)&&!r)return t;t=r}return null}function R0(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function x0(t,e){let n=Qe+e;if(n<t.length)return t[n]}function ll(t,e,n,r=!0){let i=e[ee];if(ZL(i,e,t,n),r){let s=U_(n,t),a=e[Be],l=a.parentNode(t[vr]);l!==null&&gL(i,t[An],a,e,l,s)}let o=e[Zt];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Dv(t,e){let n=il(t,e);return n!==void 0&&Kf(n[ee],n),n}function il(t,e){if(t.length<=Qe)return;let n=Qe+e,r=t[n];if(r){let i=r[hs];i!==null&&i!==t&&Tv(i,r),e>0&&(t[n-1][Cn]=r[Cn]);let o=Hu(t,Qe+e);pL(r[ee],r);let s=o[ps];s!==null&&s.detachView(o[ee]),r[it]=null,r[Cn]=null,r[le]&=-129}return r}function ZL(t,e,n,r){let i=Qe+r,o=n.length;r>0&&(n[i-1][Cn]=e),r<o-Qe?(e[Cn]=n[i],Hy(n,Qe+r,e)):(n.push(e),e[Cn]=null),e[it]=n;let s=e[hs];s!==null&&n!==s&&P0(s,e);let a=e[ps];a!==null&&a.insertView(t),of(e),e[le]|=128}function P0(t,e){let n=t[Yu],r=e[it];if(Dn(r))t[le]|=2;else{let i=r[it][qt];e[qt]!==i&&(t[le]|=2)}n===null?t[Yu]=[e]:n.push(e)}var ws=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[ee];return rl(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[tt]}set context(e){this._lView[tt]=e}get destroyed(){return so(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[it];if(gn(e)){let n=e[Qu],r=n?n.indexOf(this):-1;r>-1&&(il(e,r),Hu(n,r))}this._attachedToViewContainer=!1}Kf(this._lView[ee],this._lView)}onDestroy(e){t_(this._lView,e)}markForCheck(){Jf(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[le]&=-129}reattach(){of(this._lView),this._lView[le]|=128}detectChanges(){this._lView[le]|=1024,S0(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=_s(this._lView),n=this._lView[hs];n!==null&&!e&&Tv(n,this._lView),h0(this._lView[ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Q(902,!1);this._appRef=e;let n=_s(this._lView),r=this._lView[hs];r!==null&&!n&&P0(r,this._lView),of(this._lView)}};function Rv(t,e,n,r,i){let o=t.data[e];if(o===null)o=eV(t,e,n,r,i),YS()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=HS();o.injectorIndex=s===null?-1:s.injectorIndex}return Ka(o,!0),o}function eV(t,e,n,r,i){let o=r_(),s=i_(),a=s?o:o&&o.parent,l=t.data[e]=nV(t,a,n,e,r,i);return tV(t,l,o,s),l}function tV(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function nV(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return n_()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var rV=new RegExp(`^(\\d+)*(${IA}|${EA})*(.*)`);function iV(t){let e=t.match(rV),[n,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[l,d,p]of o.matchAll(/(f|n)(\d*)/g)){let v=parseInt(p,10)||1;a.push(d,v)}return[s,...a]}function oV(t){return!t.prev&&t.parent?.type===8}function w_(t){return t.index-Ue}function sV(t,e){let n=t.i18nNodes;if(n)return n.get(e)}function Xf(t,e,n,r){let i=w_(r),o=sV(t,i);if(o===void 0){let s=t.data[SA];if(s?.[i])o=cV(s[i],n);else if(e.firstChild===r)o=t.firstChild;else{let a=r.prev===null,l=r.prev??r.parent;if(oV(r)){let d=w_(r.parent);o=O_(t,d)}else{let d=Er(l,n);if(a)o=d.firstChild;else{let p=w_(l),v=O_(t,p);if(l.type===2&&v){let D=hv(t,p)+1;o=Zf(D,v)}else o=d.nextSibling}}}}return o}function Zf(t,e){let n=e;for(let r=0;r<t;r++)n=n.nextSibling;return n}function aV(t,e){let n=t;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case x1:n=n.firstChild;break;case P1:n=n.nextSibling;break}}return n}function cV(t,e){let[n,...r]=iV(t),i;if(n===EA)i=e[qt][zt];else if(n===IA)i=r0(e[qt][zt]);else{let o=Number(n);i=mn(e[o+Ue])}return aV(i,r)}var uV=!1;function N0(t){uV=t}function lV(t){let e=t[Zt];if(e){let{i18nNodes:n,dehydratedIcuData:r}=e;if(n&&r){let i=t[Be];for(let o of r.values())dV(i,n,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function dV(t,e,n){for(let r of n.node.cases[n.case]){let i=e.get(r.index-Ue);i&&gv(t,i,!1)}}function ep(t){let e=t[Wn]??[],r=t[it][Be],i=[];for(let o of e)o.data[CA]!==void 0?i.push(o):M0(o,r);t[Wn]=i}function hV(t){let{lContainer:e}=t,n=e[Wn];if(n===null)return;let i=e[it][Be];for(let o of n)M0(o,i)}function M0(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[nl];for(;n<i;){let o=r.nextSibling;gv(e,r,!1),r=o,n++}}}function tp(t){ep(t);let e=t[zt];Dn(e)&&Af(e);for(let n=Qe;n<t.length;n++)Af(t[n])}function Af(t){lV(t);let e=t[ee];for(let n=Ue;n<e.bindingStartIndex;n++)if(gn(t[n])){let r=t[n];tp(r)}else Dn(t[n])&&Af(t[n])}function xv(t){let e=t._views;for(let n of e){let r=HA(n);r!==null&&r[zt]!==null&&(Dn(r)?Af(r):tp(r))}}function fV(t,e,n,r){t!==null&&(n.cleanup(e),tp(t.lContainer),xv(r))}function pV(t,e){let n=[];for(let r of e)for(let i=0;i<(r[ov]??1);i++){let o={data:r,firstChild:null};r[nl]>0&&(o.firstChild=t,t=Zf(r[nl],t)),n.push(o)}return[t,n]}var k0=()=>null,O0=()=>null;function L0(){k0=gV,O0=mV}function gV(t,e){return F0(t,e)?t[Wn].shift():(ep(t),null)}function Df(t,e){return k0(t,e)}function mV(t,e,n){if(e.tView.ssrId===null)return null;let r=Df(t,e.tView.ssrId);return n[ee].firstUpdatePass&&r===null&&yV(n,e),r}function V0(t,e,n){return O0(t,e,n)}function yV(t,e){let n=e;for(;n;){if(CC(t,n))return;if((n.flags&256)===256)break;n=n.prev}for(n=e.next;n&&(n.flags&512)===512;){if(CC(t,n))return;n=n.next}}function F0(t,e){let n=t[Wn];return!e||n===null||n.length===0?!1:n[0].data[bA]===e}function CC(t,e){let n=e.tView?.ssrId;if(n==null)return!1;let r=t[e.index];return gn(r)&&F0(r,n)?(ep(r),!0):!1}var U0=class{},np=class{},B_=class{resolveComponentFactory(e){throw new Q(917,!1)}},dl=class{static NULL=new B_},Ts=class{};var j0=(()=>{class t{static \u0275prov=X({token:t,providedIn:"root",factory:()=>null})}return t})();var vf={},Ja=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,vf,r);return i!==vf||n===vf?i:this.parentInjector.get(e,n,r)}};function AC(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=My(i,a);else if(o==2){let l=a,d=e[++s];r=My(r,l+": "+d+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function B0(t,e=0){let n=$e();if(n===null)return de(t,e);let r=wr();return aA(r,n,Jt(t),e)}function _V(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,l=null,d=null;for(let p of s)if(p.resolveHostDirectives!==null){[a,l,d]=p.resolveHostDirectives(s);break}IV(t,e,n,a,o,l,d)}o!==null&&r!==null&&vV(n,r,o)}function vV(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new Q(-301,!1);r.push(e[i],o)}}function EV(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function IV(t,e,n,r,i,o,s){let a=r.length,l=null;for(let S=0;S<a;S++){let D=r[S];l===null&&ys(D)&&(l=D,EV(t,n,S)),y1(rA(n,e),t,D.type)}AV(n,t.data.length,a),l?.viewProvidersResolver&&l.viewProvidersResolver(l);for(let S=0;S<a;S++){let D=r[S];D.providersResolver&&D.providersResolver(D)}let d=!1,p=!1,v=a0(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let S=0;S<a;S++){let D=r[S];if(n.mergedAttrs=ev(n.mergedAttrs,D.hostAttrs),TV(t,n,e,v,D),CV(v,D,i),s!==null&&s.has(D)){let[O,L]=s.get(D);n.directiveToIndex.set(D.type,[v,O+n.directiveStart,L+n.directiveStart])}else(o===null||!o.has(D))&&n.directiveToIndex.set(D.type,v);D.contentQueries!==null&&(n.flags|=4),(D.hostBindings!==null||D.hostAttrs!==null||D.hostVars!==0)&&(n.flags|=64);let P=D.type.prototype;!d&&(P.ngOnChanges||P.ngOnInit||P.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),d=!0),!p&&(P.ngOnChanges||P.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),p=!0),v++}wV(t,n,o)}function wV(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))DC(0,e,i,r),DC(1,e,i,r),xC(e,r,!1);else{let o=n.get(i);RC(0,e,o,r),RC(1,e,o,r),xC(e,r,!0)}}}function DC(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),$0(e,o)}}function RC(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),$0(e,s)}}function $0(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function xC(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||mv(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!n&&i.hasOwnProperty(l)){let d=i[l];for(let p of d)if(p===e){s??=[],s.push(l,r[a+1]);break}}else if(n&&o.hasOwnProperty(l)){let d=o[l];for(let p=0;p<d.length;p+=2)if(d[p]===e){s??=[],s.push(d[p+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function TV(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=as(i.type,!0)),s=new tl(o,ys(i),B0,null);t.blueprint[r]=s,n[r]=s,bV(t,e,r,a0(t,n,i.hostVars,ai),i)}function bV(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;SV(s)!=a&&s.push(a),s.push(n,r,o)}}function SV(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function CV(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ys(e)&&(n[""]=t)}}function AV(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function z0(t,e,n,r,i,o,s,a){let l=e[ee],d=l.consts,p=ao(d,s),v=Rv(l,t,n,r,p);return o&&_V(l,e,v,ao(d,a),i),v.mergedAttrs=ev(v.mergedAttrs,v.attrs),v.attrs!==null&&AC(v,v.attrs,!1),v.mergedAttrs!==null&&AC(v,v.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,v),v}function q0(t,e){s1(t,e),Jy(e)&&t.queries.elementEnd(e)}function rp(t,e,n){if(n===ai)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function T_(t,e,n){return function r(i){let o=oo(t)?Ir(t.index,e):e;Jf(o,5);let s=e[tt],a=PC(e,s,n,i),l=r.__ngNextListenerFn__;for(;l;)a=PC(e,s,l,i)&&a,l=l.__ngNextListenerFn__;return a}}function PC(t,e,n,r){let i=oe(null);try{return Ae(me.OutputStart,e,n),n(r)!==!1}catch(o){return Cv(t,o),!1}finally{Ae(me.OutputEnd,e,n),oe(i)}}function DV(t,e,n,r,i,o,s,a){let l=nf(t),d=!1,p=null;if(!r&&l&&(p=xV(e,n,o,t.index)),p!==null){let v=p.__ngLastListenerFn__||p;v.__ngNextListenerFn__=s,p.__ngLastListenerFn__=s,d=!0}else{let v=Er(t,n),S=r?r(v):v;N1(n,S,o,a);let D=i.listen(S,o,a);if(!RV(o)){let P=r?O=>r(mn(O[t.index])):t.index;H0(P,e,n,o,a,D,!1)}}return d}function RV(t){return t.startsWith("animation")||t.startsWith("transition")}function xV(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[qa],l=i[o+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function H0(t,e,n,r,i,o,s){let a=e.firstCreatePass?VS(e):null,l=LS(n),d=l.length;l.push(i,o),a&&a.push(r,t,d,(d+1)*(s?-1:1))}function NC(t,e,n,r,i,o){let s=e[n],a=e[ee],d=a.data[n].outputs[r],v=s[d].subscribe(o);H0(t.index,a,e,i,o,v,!0)}var $_=Symbol("BINDING");var Rf=class extends dl{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ei(e);return new tc(n,this.ngModule)}};function PV(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&Gf.SignalBased)!==0};return i&&(o.transform=i),o})}function NV(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function MV(t,e,n){let r=e instanceof et?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new Ja(n,r):n}function kV(t){let e=t.get(Ts,null);if(e===null)throw new Q(407,!1);let n=t.get(j0,null),r=t.get(ro,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function OV(t,e){let n=G0(t);return pv(e,n,n==="svg"?xS:n==="math"?PS:null)}function G0(t){return(t.selectors[0][0]||"div").toLowerCase()}var tc=class extends np{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=PV(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=NV(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=rL(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){Ae(me.DynamicComponentStart);let a=oe(null);try{let l=this.componentDef,d=LV(r,l,s,o),p=MV(l,i||this.ngModule,e),v=kV(p),S=v.rendererFactory.createRenderer(null,l),D=r?DL(S,r,l.encapsulation,p):OV(l,S),P=s?.some(MC)||o?.some(z=>typeof z!="function"&&z.bindings.some(MC)),O=_v(null,d,null,512|s0(l),null,null,v,S,p,null,qA(D,p,!0));O[Ue]=D,cf(O);let L=null;try{let z=z0(Ue,O,2,"#host",()=>d.directiveRegistry,!0,0);n0(S,D,z),Za(D,O),g0(d,O,z),JA(d,z,O),q0(d,z),n!==void 0&&FV(z,this.ngContentSelectors,n),L=Ir(z.index,O),O[tt]=L[tt],Av(d,O,null)}catch(z){throw L!==null&&N_(L),N_(O),z}finally{Ae(me.DynamicComponentEnd),uf()}return new xf(this.componentType,O,!!P)}finally{oe(a)}}};function LV(t,e,n,r){let i=t?["ng-version","21.1.3"]:iL(e.selectors[0]),o=null,s=null,a=0;if(n)for(let p of n)a+=p[$_].requiredVars,p.create&&(p.targetIdx=0,(o??=[]).push(p)),p.update&&(p.targetIdx=0,(s??=[]).push(p));if(r)for(let p=0;p<r.length;p++){let v=r[p];if(typeof v!="function")for(let S of v.bindings){a+=S[$_].requiredVars;let D=p+1;S.create&&(S.targetIdx=D,(o??=[]).push(S)),S.update&&(S.targetIdx=D,(s??=[]).push(S))}}let l=[e];if(r)for(let p of r){let v=typeof p=="function"?p:p.type,S=Qh(v);l.push(S)}return yv(0,null,VV(o,s),1,a,l,null,null,null,[i],null)}function VV(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function MC(t){let e=t[$_].kind;return e==="input"||e==="twoWay"}var xf=class extends U0{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Ga(n[ee],Ue),this.location=nv(this._tNode,n),this.instance=Ir(this._tNode.index,n)[tt],this.hostView=this.changeDetectorRef=new ws(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=v0(r,i[ee],i,e,n);this.previousInputValues.set(e,n);let s=Ir(r.index,i);Jf(s,1)}get injector(){return new Es(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function FV(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var ip=(()=>{class t{static __NG_ELEMENT_ID__=UV}return t})();function UV(){let t=wr();return BV(t,$e())}var jV=ip,W0=class extends jV{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return nv(this._hostTNode,this._hostLView)}get injector(){return new Es(this._hostTNode,this._hostLView)}get parentInjector(){let e=tv(this._hostTNode,this._hostLView);if(eA(e)){let n=Tf(e,this._hostLView),r=wf(e),i=n[ee].data[r+8];return new Es(i,n)}else return new Es(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=kC(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Qe}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Df(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,ec(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let l=e&&!t1(e),d;if(l)d=n;else{let L=n||{};d=L.index,r=L.injector,i=L.projectableNodes,o=L.environmentInjector||L.ngModuleRef,s=L.directives,a=L.bindings}let p=l?e:new tc(ei(e)),v=r||this.parentInjector;if(!o&&p.ngModule==null){let z=(l?v:this.parentInjector).get(et,null);z&&(o=z)}let S=ei(p.componentType??{}),D=Df(this._lContainer,S?.id??null),P=D?.firstChild??null,O=p.create(v,i,P,o,s,a);return this.insertImpl(O.hostView,d,ec(this._hostTNode,D)),O}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(MS(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[it],d=new W0(l,l[An],l[it]);d.detach(d.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return ll(s,i,o,r),e.attachToViewContainerRef(),Hy(b_(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=kC(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=il(this._lContainer,n);r&&(Hu(b_(this._lContainer),n),Kf(r[ee],r))}detach(e){let n=this._adjustIndex(e,-1),r=il(this._lContainer,n);return r&&Hu(b_(this._lContainer),n)!=null?new ws(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function kC(t){return t[Qu]}function b_(t){return t[Qu]||(t[Qu]=[])}function BV(t,e){let n,r=e[t.index];return gn(r)?n=r:(n=R0(r,e,null,t),e[t.index]=n,vv(e,n)),K0(n,e,t,r),new W0(n,t,e)}function $V(t,e){let n=t[Be],r=n.createComment(""),i=Er(e,t),o=n.parentNode(i);return Sf(n,o,r,n.nextSibling(i),!1),r}var K0=Q0,Pv=()=>!1;function zV(t,e,n){return Pv(t,e,n)}function Q0(t,e,n,r){if(t[vr])return;let i;n.type&8?i=mn(r):i=$V(e,n),t[vr]=i}function qV(t,e,n){if(t[vr]&&t[Wn])return!0;let r=n[Zt],i=e.index-Ue;if(!r||pA(e)||KA(r,i))return!1;let s=O_(r,i),a=r.data[Bf]?.[i],[l,d]=pV(s,a);return t[vr]=l,t[Wn]=d,!0}function HV(t,e,n,r){Pv(t,n,e)||Q0(t,e,n,r)}function Y0(){K0=HV,Pv=qV}var nc=class{},op=class{};var Pf=class extends nc{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Rf(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=By(e);this._bootstrapComponents=i0(o.bootstrap),this._r3Injector=d_(e,n,[{provide:nc,useValue:this},{provide:dl,useValue:this.componentFactoryResolver},...r],Zr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Nf=class extends op{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Pf(this.moduleType,e,[])}};var ol=class extends nc{injector;componentFactoryResolver=new Rf(this);instance=null;constructor(e){super();let n=new cs([...e.providers,{provide:nc,useValue:this},{provide:dl,useValue:this.componentFactoryResolver}],e.parent||Wu(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function sc(t,e,n=null){return new ol({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var GV=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=ef(!1,n.type),i=r.length>0?sc([r],this._injector,""):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=X({token:t,providedIn:"environment",factory:()=>new t(de(et))})}return t})();function hl(t){return al(()=>{let e=J0(t),n=_e(B({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===rv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(GV).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Yn.Emulated,styles:t.styles||to,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Rn("NgStandalone"),X0(n);let r=t.dependencies;return n.directiveDefs=OC(r,WV),n.pipeDefs=OC(r,$y),n.id=YV(n),n})}function WV(t){return ei(t)||Qh(t)}function KV(t,e){if(t==null)return ls;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,l;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,l=i[3]||null):(o=i,s=i,a=Gf.None,l=null),n[o]=[r,a,l],e[o]=s}return n}function QV(t){if(t==null)return ls;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Nv(t){return al(()=>{let e=J0(t);return X0(e),e})}function J0(t){let e={};return{type:t.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||ls,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||to,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:KV(t.inputs,e),outputs:QV(t.outputs),debugInfo:null}}function X0(t){t.features?.forEach(e=>e(t))}function OC(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function YV(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function JV(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=ev(t.mergedAttrs,t.attrs);let p=t.tView=yv(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),p.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),Ka(t,!1);let l=Z0(n,e,t,r);lf()&&bv(n,e,l,t),Za(l,e);let d=R0(l,e,l,t);e[r+Ue]=d,vv(e,d),zV(d,t,e)}function Mf(t,e,n,r,i,o,s,a,l,d,p){let v=n+Ue,S;if(e.firstCreatePass){if(S=Rv(e,v,4,s||null,a||null),d!=null){let D=ao(e.consts,d);S.localNames=[];for(let P=0;P<D.length;P+=2)S.localNames.push(D[P],-1)}}else S=e.data[v];return JV(S,t,e,n,r,i,o,l),d!=null&&m0(t,S,p),S}var Z0=eD;function eD(t,e,n,r){return ii(!0),e[Be].createComment("")}function XV(t,e,n,r){let i=!Hf(e,n);ii(i);let o=e[Zt]?.data[TA]?.[r]??null;if(o!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=o),i)return eD(t,e);let s=e[Zt],a=Xf(s,t,e,n);qf(s,r,a);let l=hv(s,r);return Zf(l,a)}function tD(){Z0=XV}var yn=(function(t){return t[t.NOT_STARTED=0]="NOT_STARTED",t[t.IN_PROGRESS=1]="IN_PROGRESS",t[t.COMPLETE=2]="COMPLETE",t[t.FAILED=3]="FAILED",t})(yn||{}),LC=0,ZV=1,ot=(function(t){return t[t.Placeholder=0]="Placeholder",t[t.Loading=1]="Loading",t[t.Complete=2]="Complete",t[t.Error=3]="Error",t})(ot||{});var eF=0,fl=1;var tF=4,nF=5;var rF=7,Xa=8,iF=9,Mv=(function(t){return t[t.Manual=0]="Manual",t[t.Playthrough=1]="Playthrough",t})(Mv||{});function Ef(t,e){let n=sF(t),r=e[n];if(r!==null){for(let i of r)i();e[n]=null}}function oF(t){Ef(1,t),Ef(0,t),Ef(2,t)}function sF(t){let e=tF;return t===1?e=nF:t===2&&(e=iF),e}function nD(t){return t+1}function ac(t,e){let n=t[ee],r=nD(e.index);return t[r]}function pl(t,e){let n=nD(e.index);return t.data[n]}function aF(t,e,n){let r=e[ee],i=pl(r,n);switch(t){case ot.Complete:return i.primaryTmplIndex;case ot.Loading:return i.loadingTmplIndex;case ot.Error:return i.errorTmplIndex;case ot.Placeholder:return i.placeholderTmplIndex;default:return null}}function VC(t,e){return e===ot.Placeholder?t.placeholderBlockConfig?.[LC]??null:e===ot.Loading?t.loadingBlockConfig?.[LC]??null:null}function cF(t){return t.loadingBlockConfig?.[ZV]??null}function FC(t,e){if(!t||t.length===0)return e;let n=new Set(t);for(let r of e)n.add(r);return t.length===n.size?t:Array.from(n)}function uF(t,e){let n=e.primaryTmplIndex+Ue;return Ga(t,n)}var lF=(()=>{class t{cachedInjectors=new Map;getOrCreateInjector(n,r,i,o){if(!this.cachedInjectors.has(n)){let s=i.length>0?sc(i,r,o):null;this.cachedInjectors.set(n,s)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=X({token:t,providedIn:"environment",factory:()=>new t})}return t})();var rD=new H("");function S_(t,e,n){return t.get(lF).getOrCreateInjector(e,t,n,"")}function dF(t,e,n){if(t instanceof Ja){let i=t.injector,o=t.parentInjector,s=S_(o,e,n);return new Ja(i,s)}let r=t.get(et);if(r!==t){let i=S_(r,e,n);return new Ja(t,i)}return S_(t,e,n)}function vs(t,e,n,r=!1){let i=n[it],o=i[ee];if(so(i))return;let s=ac(i,e),a=s[fl],l=s[rF];if(!(l!==null&&t<l)&&UC(a,t)&&UC(s[eF]??-1,t)){let d=pl(o,e),v=!r&&!0&&(cF(d)!==null||VC(d,ot.Loading)!==null||VC(d,ot.Placeholder))?pF:fF;try{v(t,s,n,e,i)}catch(S){Cv(i,S)}}}function hF(t,e){let n=t[Wn]?.findIndex(i=>i.data[AA]===e[fl])??-1;return{dehydratedView:n>-1?t[Wn][n]:null,dehydratedViewIx:n}}function fF(t,e,n,r,i){Ae(me.DeferBlockStateStart);let o=aF(t,i,r);if(o!==null){e[fl]=t;let s=i[ee],a=o+Ue,l=Ga(s,a),d=0;Dv(n,d);let p;if(t===ot.Complete){let P=pl(s,r),O=P.providers;O&&O.length>0&&(p=dF(i[fn],P,O))}let{dehydratedView:v,dehydratedViewIx:S}=hF(n,e),D=Yf(i,l,null,{injector:p,dehydratedView:v});if(ll(n,D,d,ec(l,v)),Jf(D,2),S>-1&&n[Wn]?.splice(S,1),(t===ot.Complete||t===ot.Error)&&Array.isArray(e[Xa])){for(let P of e[Xa])P();e[Xa]=null}}Ae(me.DeferBlockStateEnd)}function UC(t,e){return t<e}function jC(t,e,n){t.loadingPromise.then(()=>{t.loadingState===yn.COMPLETE?vs(ot.Complete,e,n):t.loadingState===yn.FAILED&&vs(ot.Error,e,n)})}var pF=null;var sp=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var kv=new H("");function gl(t){return!!t&&typeof t.then=="function"}function iD(t){return!!t&&typeof t.subscribe=="function"}var oD=new H("");var Ov=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=V(oD,{optional:!0})??[];injector=V(Dt);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Rt(this.injector,i);if(gl(o))n.push(o);else if(iD(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ho=new H("");function sD(){Zm(()=>{let t="";throw new Q(600,t)})}function aD(t){return t.isBoundToModule}var gF=10;var _n=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=V(Kn);afterRenderManager=V(Iv);zonelessEnabled=V(Xu);rootEffectScheduler=V(y_);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Vt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=V(br);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ke(n=>!n))}constructor(){V(lo,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=V(et);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Dt.NULL){return this._injector.get(Ge).run(()=>{Ae(me.BootstrapComponentStart);let s=n instanceof np;if(!this._injector.get(Ov).done){let P="";throw new Q(405,P)}let l;s?l=n:l=this._injector.get(dl).resolveComponentFactory(n),this.componentTypes.push(l.componentType);let d=aD(l)?void 0:this._injector.get(nc),p=r||l.selector,v=l.create(i,[],p,d),S=v.location.nativeElement,D=v.injector.get(kv,null);return D?.registerApplication(S),v.onDestroy(()=>{this.detachView(v.hostView),el(this.components,v),D?.unregisterApplication(S)}),this._loadComponent(v),Ae(me.BootstrapComponentEnd,v),v})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ae(me.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Wf.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw Ae(me.ChangeDetectionEnd),new Q(101,!1);let n=oe(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,oe(n),this.afterTick.next(),Ae(me.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ts,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<gF;){Ae(me.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{Ae(me.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Ju(i))continue;let o=r&&!this.zonelessEnabled?0:1;S0(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Ju(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;el(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(ho,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>el(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new Q(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function el(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Lv(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}}function cD(t,e,n){let r=e[fn],i=e[ee];if(t.loadingState!==yn.NOT_STARTED)return t.loadingPromise??Promise.resolve();let o=ac(e,n),s=uF(i,t);t.loadingState=yn.IN_PROGRESS,Ef(1,o);let a=t.dependencyResolverFn,l=r.get(hf).add();return a?(t.loadingPromise=Promise.allSettled(a()).then(d=>{let p=!1,v=[],S=[];for(let D of d)if(D.status==="fulfilled"){let P=D.value,O=ei(P)||Qh(P);if(O)v.push(O);else{let L=$y(P);L&&S.push(L)}}else{p=!0;break}if(p){if(t.loadingState=yn.FAILED,t.errorTmplIndex===null){let P=new Q(-750,!1);Cv(e,P)}}else{t.loadingState=yn.COMPLETE;let D=s.tView;if(v.length>0){D.directiveRegistry=FC(D.directiveRegistry,v);let P=v.map(L=>L.type),O=ef(!1,...P);t.providers=O}S.length>0&&(D.pipeRegistry=FC(D.pipeRegistry,S))}}),t.loadingPromise.finally(()=>{t.loadingPromise=null,l()})):(t.loadingPromise=Promise.resolve().then(()=>{t.loadingPromise=null,t.loadingState=yn.COMPLETE,l()}),t.loadingPromise)}function mF(t,e){return e[fn].get(rD,null,{optional:!0})?.behavior!==Mv.Manual}function yF(t,e,n){let r=e[ee],i=e[n.index];if(!mF(t,e))return;let o=ac(e,n),s=pl(r,n);switch(oF(o),s.loadingState){case yn.NOT_STARTED:vs(ot.Loading,n,i),cD(s,e,n),s.loadingState===yn.IN_PROGRESS&&jC(s,n,i);break;case yn.IN_PROGRESS:vs(ot.Loading,n,i),jC(s,n,i);break;case yn.COMPLETE:vs(ot.Complete,n,i);break;case yn.FAILED:vs(ot.Error,n,i);break;default:}}function uD(t,e,n){return R(this,null,function*(){let r=t.get($f);if(r.hydrating.has(e))return;let{parentBlockPromise:o,hydrationQueue:s}=j1(e,t);if(s.length===0)return;o!==null&&s.shift(),EF(r,s),o!==null&&(yield o);let a=s[0];r.has(a)?yield BC(t,s,n):r.awaitParentBlock(a,()=>R(null,null,function*(){return yield BC(t,s,n)}))})}function BC(t,e,n){return R(this,null,function*(){let r=t.get($f),i=r.hydrating,o=t.get(br),s=o.add();for(let l=0;l<e.length;l++){let d=e[l],p=r.get(d);if(p!=null){if(yield wF(p),yield IF(t),_F(p)){hV(p),$C(e.slice(l),r);break}i.get(d).resolve()}else{vF(l,e,r),$C(e.slice(l),r);break}}let a=e[e.length-1];yield i.get(a)?.promise,o.remove(s),n&&n(e),fV(r.get(a),e,r,t.get(_n))})}function _F(t){return ac(t.lView,t.tNode)[fl]===ot.Error}function vF(t,e,n){let r=t-1,i=r>-1?n.get(e[r]):null;i&&tp(i.lContainer)}function $C(t,e){let n=e.hydrating;for(let r in t)n.get(r)?.reject();e.cleanup(t)}function EF(t,e){for(let n of e)t.hydrating.set(n,Lv())}function IF(t){return new Promise(e=>oc(e,{injector:t}))}function wF(t){return R(this,null,function*(){let{tNode:e,lView:n}=t,r=ac(n,e);return new Promise(i=>{TF(r,i),yF(2,n,e)})})}function TF(t,e){Array.isArray(t[Xa])||(t[Xa]=[]),t[Xa].push(e)}var F7=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var z_=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function C_(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function bF(t,e,n,r){let i,o,s=0,a=t.length-1,l=void 0;if(Array.isArray(e)){oe(r);let d=e.length-1;for(oe(null);s<=a&&s<=d;){let p=t.at(s),v=e[s],S=C_(s,p,s,v,n);if(S!==0){S<0&&t.updateValue(s,v),s++;continue}let D=t.at(a),P=e[d],O=C_(a,D,d,P,n);if(O!==0){O<0&&t.updateValue(a,P),a--,d--;continue}let L=n(s,p),z=n(a,D),K=n(s,v);if(Object.is(K,z)){let ne=n(d,P);Object.is(ne,L)?(t.swap(s,a),t.updateValue(a,P),d--,a--):t.move(a,s),t.updateValue(s,v),s++;continue}if(i??=new kf,o??=qC(t,s,a,n),q_(t,i,s,K))t.updateValue(s,v),s++,a++;else if(o.has(K))i.set(L,t.detach(s)),a--;else{let ne=t.create(s,e[s]);t.attach(s,ne),s++,a++}}for(;s<=d;)zC(t,i,n,s,e[s]),s++}else if(e!=null){oe(r);let d=e[Symbol.iterator]();oe(null);let p=d.next();for(;!p.done&&s<=a;){let v=t.at(s),S=p.value,D=C_(s,v,s,S,n);if(D!==0)D<0&&t.updateValue(s,S),s++,p=d.next();else{i??=new kf,o??=qC(t,s,a,n);let P=n(s,S);if(q_(t,i,s,P))t.updateValue(s,S),s++,a++,p=d.next();else if(!o.has(P))t.attach(s,t.create(s,S)),s++,a++,p=d.next();else{let O=n(s,v);i.set(O,t.detach(s)),a--}}}for(;!p.done;)zC(t,i,n,t.length,p.value),p=d.next()}for(;s<=a;)t.destroy(t.detach(a--));i?.forEach(d=>{t.destroy(d)})}function q_(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function zC(t,e,n,r,i){if(q_(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function qC(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var kf=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function _t(t,e,n,r,i,o,s,a){Rn("NgControlFlow");let l=$e(),d=ri(),p=ao(d.consts,o);return Mf(l,d,t,e,n,r,i,p,256,s,a),Vv}function Vv(t,e,n,r,i,o,s,a){Rn("NgControlFlow");let l=$e(),d=ri(),p=ao(d.consts,o);return Mf(l,d,t,e,n,r,i,p,512,s,a),Vv}function vt(t,e){Rn("NgControlFlow");let n=$e(),r=sf(),i=n[r]!==ai?n[r]:-1,o=i!==-1?Of(n,Ue+i):void 0,s=0;if(rp(n,r,t)){let a=oe(null);try{if(o!==void 0&&Dv(o,s),t!==-1){let l=Ue+t,d=Of(n,l),p=K_(n[ee],l),v=V0(d,p,n),S=Yf(n,p,e,{dehydratedView:v});ll(d,S,s,ec(p,v))}}finally{oe(a)}}else if(o!==void 0){let a=x0(o,s);a!==void 0&&(a[tt]=e)}}var H_=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Qe}};var G_=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Fv(t,e,n,r,i,o,s,a,l,d,p,v,S){Rn("NgControlFlow");let D=$e(),P=ri(),O=l!==void 0,L=$e(),z=a?s.bind(L[qt][tt]):s,K=new G_(O,z);L[Ue+t]=K,Mf(D,P,t+1,e,n,r,i,ao(P.consts,o),256),O&&Mf(D,P,t+2,l,d,p,v,ao(P.consts,S),512)}var W_=class extends z_{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-Qe}at(e){return this.getLView(e)[tt].$implicit}attach(e,n){let r=n[Zt];this.needsIndexUpdate||=e!==this.length,ll(this.lContainer,n,e,ec(this.templateTNode,r)),SF(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,CF(this.lContainer,e),AF(this.lContainer,e)}create(e,n){let r=Df(this.lContainer,this.templateTNode.tView.ssrId);return Yf(this.hostLView,this.templateTNode,new H_(this.lContainer,n,e),{dehydratedView:r})}destroy(e){Kf(e[ee],e)}updateValue(e,n){this.getLView(e)[tt].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[tt].$index=e}getLView(e){return DF(this.lContainer,e)}};function Uv(t){let e=oe(null),n=co();try{let r=$e(),i=r[ee],o=r[n],s=n+1,a=Of(r,s);if(o.liveCollection===void 0){let d=K_(i,s);o.liveCollection=new W_(a,r,d)}else o.liveCollection.reset();let l=o.liveCollection;if(bF(l,t,o.trackByFn,e),l.updateIndexes(),o.hasEmptyBlock){let d=sf(),p=l.length===0;if(rp(r,d,p)){let v=n+2,S=Of(r,v);if(p){let D=K_(i,v),P=V0(S,D,r),O=Yf(r,D,void 0,{dehydratedView:P});ll(S,O,0,ec(D,P))}else i.firstUpdatePass&&ep(S),Dv(S,0)}}}finally{oe(e)}}function Of(t,e){return t[e]}function SF(t,e){if(t.length<=Qe)return;let n=Qe+e,r=t[n],i=r?r[ms]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[fn];dL(o,i),Is.delete(r[ni]),i.detachedLeaveAnimationFns=void 0}}function CF(t,e){if(t.length<=Qe)return;let n=Qe+e,r=t[n],i=r?r[ms]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function AF(t,e){return il(t,e)}function DF(t,e){return x0(t,e)}function K_(t,e){return Ga(t,e)}function HC(t,e,n,r,i){v0(e,t,n,i?"class":"style",r)}function W(t,e,n,r){let i=$e(),o=i[ee],s=t+Ue,a=o.firstCreatePass?z0(s,i,2,e,kL,BS(),n,r):o.data[s];if(LL(a,i,t,e,lD),nf(a)){let l=i[ee];g0(l,i,a),JA(l,a,i)}return r!=null&&m0(i,a),W}function Y(){let t=ri(),e=wr(),n=VL(e);return t.firstCreatePass&&q0(t,n),$S(n)&&qS(),jS(),n.classesWithoutHost!=null&&c1(n)&&HC(t,n,$e(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&u1(n)&&HC(t,n,$e(),n.stylesWithoutHost,!1),Y}function Jn(t,e,n,r){return W(t,e,n,r),Y(),Jn}var lD=(t,e,n,r,i)=>(ii(!0),pv(e[Be],r,l_()));function RF(t,e,n,r,i){let o=!Hf(e,n);if(ii(o),o)return pv(e[Be],r,l_());let s=e[Zt],a=Xf(s,t,e,n);return WA(s,i)&&qf(s,i,a.nextSibling),s&&(hA(n)||fA(a))&&oo(n)&&(zS(n),t0(a)),a}function dD(){lD=RF}var xF=(t,e,n,r,i)=>(ii(!0),ZA(e[Be],""));function PF(t,e,n,r,i){let o,s=!Hf(e,n);if(ii(s),s)return ZA(e[Be],"");let a=e[Zt],l=Xf(a,t,e,n),d=F1(a,i);return qf(a,i,l),o=Zf(d,l),o}function hD(){xF=PF}function fo(){return $e()}var ml="en-US";var NF=ml;function fD(t){typeof t=="string"&&(NF=t.toLowerCase().replace(/_/g,"-"))}function Ht(t,e,n){let r=$e(),i=ri(),o=wr();return MF(i,r,r[Be],o,t,e,n),Ht}function MF(t,e,n,r,i,o,s){let a=!0,l=null;if((r.type&3||s)&&(l??=T_(r,e,o),DV(r,t,e,s,n,i,o,l)&&(a=!1)),a){let d=r.outputs?.[i],p=r.hostDirectiveOutputs?.[i];if(p&&p.length)for(let v=0;v<p.length;v+=2){let S=p[v],D=p[v+1];l??=T_(r,e,o),NC(r,e,S,D,i,l)}if(d&&d.length)for(let v of d)l??=T_(r,e,o),NC(r,e,v,i,i,l)}}function We(t=1){return rC(t)}function po(t){let e=WS();return NS(e,Ue+t)}function gf(t,e){return t<<17|e<<2}function bs(t){return t>>17&32767}function kF(t){return(t&2)==2}function OF(t,e){return t&131071|e<<17}function Q_(t){return t|2}function rc(t){return(t&131068)>>2}function A_(t,e){return t&-131069|e<<2}function LF(t){return(t&1)===1}function Y_(t){return t|1}function VF(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=bs(s),l=rc(s);t[r]=n;let d=!1,p;if(Array.isArray(n)){let v=n;p=v[1],(p===null||za(v,p)>0)&&(d=!0)}else p=n;if(i)if(l!==0){let S=bs(t[a+1]);t[r+1]=gf(S,a),S!==0&&(t[S+1]=A_(t[S+1],r)),t[a+1]=OF(t[a+1],r)}else t[r+1]=gf(a,0),a!==0&&(t[a+1]=A_(t[a+1],r)),a=r;else t[r+1]=gf(l,0),a===0?a=r:t[l+1]=A_(t[l+1],r),l=r;d&&(t[r+1]=Q_(t[r+1])),GC(t,p,r,!0),GC(t,p,r,!1),FF(e,p,t,r,o),s=gf(a,l),o?e.classBindings=s:e.styleBindings=s}function FF(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&za(o,e)>=0&&(n[r+1]=Y_(n[r+1]))}function GC(t,e,n,r){let i=t[n+1],o=e===null,s=r?bs(i):rc(i),a=!1;for(;s!==0&&(a===!1||o);){let l=t[s],d=t[s+1];UF(l,e)&&(a=!0,t[s+1]=r?Y_(d):Q_(d)),s=r?bs(d):rc(d)}a&&(t[n+1]=r?Q_(i):Y_(i))}function UF(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?za(t,e)>=0:!1}function yl(t,e){return jF(t,e,null,!0),yl}function jF(t,e,n,r){let i=$e(),o=ri(),s=QS(2);if(o.firstUpdatePass&&$F(o,t,s,r),e!==ai&&rp(i,s,e)){let a=o.data[co()];WF(o,a,i,i[Be],t,i[s+1]=KF(e,n),r,s)}}function BF(t,e){return e>=t.expandoStartIndex}function $F(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[co()],s=BF(t,n);QF(o,r)&&e===null&&!s&&(e=!1),e=zF(i,o,e,r),VF(i,o,e,n,s,r)}}function zF(t,e,n,r){let i=ZS(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=D_(null,t,e,n,r),n=sl(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=D_(i,t,e,n,r),o===null){let l=qF(t,e,r);l!==void 0&&Array.isArray(l)&&(l=D_(null,t,e,l[1],r),l=sl(l,e.attrs,r),HF(t,e,r,l))}else o=GF(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function qF(t,e,n){let r=n?e.classBindings:e.styleBindings;if(rc(r)!==0)return t[bs(r)]}function HF(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[bs(i)]=r}function GF(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=sl(r,s,n)}return sl(r,e.attrs,n)}function D_(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=sl(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function sl(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),wS(t,s,n?!0:e[++o]))}return t===void 0?null:t}function WF(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let l=t.data,d=l[a+1],p=LF(d)?WC(l,e,n,i,rc(d),s):void 0;if(!Lf(p)){Lf(o)||kF(d)&&(o=WC(l,null,n,i,a,s));let v=Xy(co(),n);AL(r,s,v,i,o)}}function WC(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let l=t[i],d=Array.isArray(l),p=d?l[1]:l,v=p===null,S=n[i+1];S===ai&&(S=v?to:void 0);let D=v?Zh(S,r):p===r?S:void 0;if(d&&!Lf(D)&&(D=Zh(l,r)),Lf(D)&&(a=D,s))return a;let P=t[i+1];i=s?bs(P):rc(P)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=Zh(l,r))}return a}function Lf(t){return t!==void 0}function KF(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Zr(fv(t)))),t}function QF(t,e){return(t.flags&(e?8:16))!==0}function J(t,e=""){let n=$e(),r=ri(),i=t+Ue,o=r.firstCreatePass?Rv(r,i,1,e,null):r.data[i],s=pD(r,n,o,e);n[i]=s,lf()&&bv(r,n,s,o),Ka(o,!1)}var pD=(t,e,n,r)=>(ii(!0),XA(e[Be],r));function YF(t,e,n,r){let i=!Hf(e,n);if(ii(i),i)return XA(e[Be],r);let o=e[Zt];return Xf(o,t,e,n)}function gD(){pD=YF}function JF(t,e,n,r=""){return rp(t,sf(),n)?e+mS(n)+r:ai}function ci(t){return nn("",t),ci}function nn(t,e,n){let r=$e(),i=JF(r,t,e,n);return i!==ai&&XF(r,co(),i),nn}function XF(t,e,n){let r=Xy(e,t);H1(t[Be],r,n)}var Vf=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},jv=(()=>{class t{compileModuleSync(n){return new Nf(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=By(n),o=i0(i.declarations).reduce((s,a)=>{let l=ei(a);return l&&s.push(new tc(l)),s},[]);return new Vf(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var mD=(()=>{class t{applicationErrorHandler=V(Kn);appRef=V(_n);taskService=V(br);ngZone=V(Ge);zonelessEnabled=V(Xu);tracing=V(lo,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new St;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get($u):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(V(m_,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{let n=this.taskService.add();if(!this.runningTick&&(this.cleanup(),!this.zonelessEnabled||this.appRef.includeAllTestViews)){this.taskService.remove(n);return}this.switchToMicrotaskScheduler(),this.taskService.remove(n)})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}switchToMicrotaskScheduler(){this.ngZone.runOutsideAngular(()=>{let n=this.taskService.add();this.useMicrotaskScheduler=!0,queueMicrotask(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})})}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?aC:h_;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get($u+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.applicationErrorHandler(r)}finally{this.taskService.remove(n),this.cleanup()}}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function yD(){return[{provide:ro,useExisting:mD},{provide:Ge,useClass:zu},{provide:Xu,useValue:!0}]}function ZF(){return typeof $localize<"u"&&$localize.locale||ml}var Bv=new H("",{factory:()=>V(Bv,{optional:!0,skipSelf:!0})||ZF()});var Gv={JSACTION:"__jsaction",OWNER:"__owner"},ID={};function e2(t){return t[Gv.JSACTION]}function _D(t,e){t[Gv.JSACTION]=e}function t2(t){return ID[t]}function n2(t,e){ID[t]=e}var te={AUXCLICK:"auxclick",CHANGE:"change",CLICK:"click",CLICKMOD:"clickmod",CLICKONLY:"clickonly",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEUP:"mouseup",MOUSEDOWN:"mousedown",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSEMOVE:"mousemove",POINTERUP:"pointerup",POINTERDOWN:"pointerdown",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERMOVE:"pointermove",POINTERCANCEL:"pointercancel",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",ERROR:"error",LOAD:"load",UNLOAD:"unload",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",INPUT:"input",SCROLL:"scroll",TOGGLE:"toggle",CUSTOM:"_custom"},r2=[te.MOUSEENTER,te.MOUSELEAVE,"pointerenter","pointerleave"],$7=[te.CLICK,te.DBLCLICK,te.FOCUSIN,te.FOCUSOUT,te.KEYDOWN,te.KEYUP,te.KEYPRESS,te.MOUSEOVER,te.MOUSEOUT,te.SUBMIT,te.TOUCHSTART,te.TOUCHEND,te.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],i2=[te.FOCUS,te.BLUR,te.ERROR,te.LOAD,te.TOGGLE],Wv=t=>i2.indexOf(t)>=0;function o2(t){return t===te.MOUSEENTER?te.MOUSEOVER:t===te.MOUSELEAVE?te.MOUSEOUT:t===te.POINTERENTER?te.POINTEROVER:t===te.POINTERLEAVE?te.POINTEROUT:t}function s2(t,e,n,r){let i=!1;Wv(e)&&(i=!0);let o=typeof r=="boolean"?{capture:i,passive:r}:i;return t.addEventListener(e,n,o),{eventType:e,handler:n,capture:i,passive:r}}function a2(t,e){if(t.removeEventListener){let n=typeof e.passive=="boolean"?{capture:e.capture}:e.capture;t.removeEventListener(e.eventType,e.handler,n)}else t.detachEvent&&t.detachEvent(`on${e.eventType}`,e.handler)}function c2(t){t.preventDefault?t.preventDefault():t.returnValue=!1}var vD=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function u2(t){return t.which===2||t.which==null&&t.button===4}function l2(t){return vD&&t.metaKey||!vD&&t.ctrlKey||u2(t)||t.shiftKey}function d2(t,e,n){let r=t.relatedTarget;return(t.type===te.MOUSEOVER&&e===te.MOUSEENTER||t.type===te.MOUSEOUT&&e===te.MOUSELEAVE||t.type===te.POINTEROVER&&e===te.POINTERENTER||t.type===te.POINTEROUT&&e===te.POINTERLEAVE)&&(!r||r!==n&&!n.contains(r))}function h2(t,e){let n={};for(let r in t){if(r==="srcElement"||r==="target")continue;let i=r,o=t[i];typeof o!="function"&&(n[i]=o)}return t.type===te.MOUSEOVER?n.type=te.MOUSEENTER:t.type===te.MOUSEOUT?n.type=te.MOUSELEAVE:t.type===te.POINTEROVER?n.type=te.POINTERENTER:n.type=te.POINTERLEAVE,n.target=n.srcElement=e,n.bubbles=!1,n._originalEvent=t,n}var f2=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),lp=class{element;handlerInfos=[];constructor(e){this.element=e}addEventListener(e,n,r){f2&&(this.element.style.cursor="pointer"),this.handlerInfos.push(s2(this.element,e,n(this.element),r))}cleanUp(){for(let e=0;e<this.handlerInfos.length;e++)a2(this.element,this.handlerInfos[e]);this.handlerInfos=[]}},p2={NAMESPACE_ACTION_SEPARATOR:".",EVENT_ACTION_SEPARATOR:":"};function go(t){return t.eventType}function Kv(t,e){t.eventType=e}function cp(t){return t.event}function wD(t,e){t.event=e}function TD(t){return t.targetElement}function bD(t,e){t.targetElement=e}function SD(t){return t.eic}function g2(t,e){t.eic=e}function m2(t){return t.timeStamp}function y2(t,e){t.timeStamp=e}function up(t){return t.eia}function CD(t,e,n){t.eia=[e,n]}function $v(t){t.eia=void 0}function ap(t){return t[1]}function _2(t){return t.eirp}function AD(t,e){t.eirp=e}function DD(t){return t.eir}function RD(t,e){t.eir=e}function xD(t){return{eventType:t.eventType,event:t.event,targetElement:t.targetElement,eic:t.eic,eia:t.eia,timeStamp:t.timeStamp,eirp:t.eirp,eiack:t.eiack,eir:t.eir}}function v2(t,e,n,r,i,o,s,a){return{eventType:t,event:e,targetElement:n,eic:r,timeStamp:i,eia:o,eirp:s,eiack:a}}var zv=class t{eventInfo;constructor(e){this.eventInfo=e}getEventType(){return go(this.eventInfo)}setEventType(e){Kv(this.eventInfo,e)}getEvent(){return cp(this.eventInfo)}setEvent(e){wD(this.eventInfo,e)}getTargetElement(){return TD(this.eventInfo)}setTargetElement(e){bD(this.eventInfo,e)}getContainer(){return SD(this.eventInfo)}setContainer(e){g2(this.eventInfo,e)}getTimestamp(){return m2(this.eventInfo)}setTimestamp(e){y2(this.eventInfo,e)}getAction(){let e=up(this.eventInfo);if(e)return{name:e[0],element:e[1]}}setAction(e){if(!e){$v(this.eventInfo);return}CD(this.eventInfo,e.name,e.element)}getIsReplay(){return _2(this.eventInfo)}setIsReplay(e){AD(this.eventInfo,e)}getResolved(){return DD(this.eventInfo)}setResolved(e){RD(this.eventInfo,e)}clone(){return new t(xD(this.eventInfo))}},E2={},I2=/\s*;\s*/,w2=te.CLICK,qv=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:e=!1,clickModSupport:n=!0}={}){this.syntheticMouseEventSupport=e,this.clickModSupport=n}resolveEventType(e){this.clickModSupport&&go(e)===te.CLICK&&l2(cp(e))?Kv(e,te.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(e)}resolveAction(e){DD(e)||(this.populateAction(e,TD(e)),RD(e,!0))}resolveParentAction(e){let n=up(e),r=n&&ap(n);$v(e);let i=r&&this.getParentNode(r);i&&this.populateAction(e,i)}populateAction(e,n){let r=n;for(;r&&r!==SD(e)&&(r.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(r,e),!up(e));)r=this.getParentNode(r);let i=up(e);if(i&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(e),this.syntheticMouseEventSupport&&(go(e)===te.MOUSEENTER||go(e)===te.MOUSELEAVE||go(e)===te.POINTERENTER||go(e)===te.POINTERLEAVE)))if(d2(cp(e),go(e),ap(i))){let o=h2(cp(e),ap(i));wD(e,o),bD(e,ap(i))}else $v(e)}getParentNode(e){let n=e[Gv.OWNER];if(n)return n;let r=e.parentNode;return r?.nodeName==="#document-fragment"?r?.host??null:r}populateActionOnElement(e,n){let r=this.parseActions(e),i=r[go(n)];i!==void 0&&CD(n,i,e),this.a11yClickSupport&&this.populateClickOnlyAction(e,n,r)}parseActions(e){let n=e2(e);if(!n){let r=e.getAttribute(ff.JSACTION);if(!r)n=E2,_D(e,n);else{if(n=t2(r),!n){n={};let i=r.split(I2);for(let o=0;o<i.length;o++){let s=i[o];if(!s)continue;let a=s.indexOf(p2.EVENT_ACTION_SEPARATOR),l=a!==-1,d=l?s.substr(0,a).trim():w2,p=l?s.substr(a+1).trim():s;n[d]=p}n2(r,n)}_D(e,n)}}return n}addA11yClickSupport(e,n,r){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=e,this.preventDefaultForA11yClick=n,this.populateClickOnlyAction=r}},PD=(function(t){return t[t.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",t})(PD||{}),Hv=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(e,{actionResolver:n,eventReplayer:r}={}){this.dispatchDelegate=e,this.actionResolver=n,this.eventReplayer=r}dispatch(e){let n=new zv(e);this.actionResolver?.resolveEventType(e),this.actionResolver?.resolveAction(e);let r=n.getAction();if(r&&T2(r.element,n)&&c2(n.getEvent()),this.eventReplayer&&n.getIsReplay()){this.scheduleEventInfoWrapperReplay(n);return}this.dispatchDelegate(n)}scheduleEventInfoWrapperReplay(e){this.replayEventInfoWrappers.push(e),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function T2(t,e){return t.tagName==="A"&&(e.getEventType()===te.CLICK||e.getEventType()===te.CLICKMOD)}var ND=Symbol.for("propagationStopped"),Qv={REPLAY:101};var b2="`preventDefault` called during event replay.";var S2="`composedPath` called during event replay.",dp=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(e,n=!0){this.dispatchDelegate=e,this.clickModSupport=n,this.actionResolver=new qv({clickModSupport:n}),this.dispatcher=new Hv(r=>{this.dispatchToDelegate(r)},{actionResolver:this.actionResolver})}dispatch(e){this.dispatcher.dispatch(e)}dispatchToDelegate(e){for(e.getIsReplay()&&D2(e),C2(e);e.getAction();){if(R2(e),Wv(e.getEventType())&&e.getAction().element!==e.getTargetElement()||(this.dispatchDelegate(e.getEvent(),e.getAction().name),A2(e)))return;this.actionResolver.resolveParentAction(e.eventInfo)}}};function C2(t){let e=t.getEvent(),n=t.getEvent().stopPropagation.bind(e),r=()=>{e[ND]=!0,n()};Cs(e,"stopPropagation",r),Cs(e,"stopImmediatePropagation",r)}function A2(t){return!!t.getEvent()[ND]}function D2(t){let e=t.getEvent(),n=t.getTargetElement(),r=e.preventDefault.bind(e);Cs(e,"target",n),Cs(e,"eventPhase",Qv.REPLAY),Cs(e,"preventDefault",()=>{throw r(),new Error(b2+"")}),Cs(e,"composedPath",()=>{throw new Error(S2+"")})}function R2(t){let e=t.getEvent(),n=t.getAction()?.element;n&&Cs(e,"currentTarget",n,{configurable:!0})}function Cs(t,e,n,{configurable:r=!1}={}){Object.defineProperty(t,e,{value:n,configurable:r})}function MD(t,e){t.ecrd(n=>{e.dispatch(n)},PD.I_AM_THE_JSACTION_FRAMEWORK)}function x2(t){return t?.q??[]}function P2(t){t&&(ED(t.c,t.et,t.h),ED(t.c,t.etc,t.h,!0))}function ED(t,e,n,r){for(let i=0;i<e.length;i++)t.removeEventListener(e[i],n,r)}var N2=!1,kD=(()=>{class t{static MOUSE_SPECIAL_SUPPORT=N2;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(n){this.containerManager=n}handleEvent(n,r,i){let o=v2(n,r,r.target,i,Date.now());this.handleEventInfo(o)}handleEventInfo(n){if(!this.dispatcher){AD(n,!0),this.queuedEventInfos?.push(n);return}this.dispatcher(n)}addEvent(n,r,i){if(n in this.eventHandlers||!this.containerManager||!t.MOUSE_SPECIAL_SUPPORT&&r2.indexOf(n)>=0)return;let o=(a,l,d)=>{this.handleEvent(a,l,d)};this.eventHandlers[n]=o;let s=o2(r||n);if(s!==n){let a=this.browserEventTypeToExtraEventTypes[s]||[];a.push(n),this.browserEventTypeToExtraEventTypes[s]=a}this.containerManager.addEventListener(s,a=>l=>{o(n,l,a)},i)}replayEarlyEvents(n=window._ejsa){n&&(this.replayEarlyEventInfos(n.q),P2(n),delete window._ejsa)}replayEarlyEventInfos(n){for(let r=0;r<n.length;r++){let i=n[r],o=this.getEventTypesForBrowserEventType(i.eventType);for(let s=0;s<o.length;s++){let a=xD(i);Kv(a,o[s]),this.handleEventInfo(a)}}}getEventTypesForBrowserEventType(n){let r=[];return this.eventHandlers[n]&&r.push(n),this.browserEventTypeToExtraEventTypes[n]&&r.push(...this.browserEventTypeToExtraEventTypes[n]),r}handler(n){return this.eventHandlers[n]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(n,r){this.ecrd(n,r)}ecrd(n,r){if(this.dispatcher=n,this.queuedEventInfos?.length){for(let i=0;i<this.queuedEventInfos.length;i++)this.handleEventInfo(this.queuedEventInfos[i]);this.queuedEventInfos=null}}}return t})();function OD(t,e=window){return x2(e._ejsas?.[t])}function Yv(t,e=window){e._ejsas&&(e._ejsas[t]=void 0)}var $D=Symbol("InputSignalNode#UNSET"),X2=_e(B({},Eh),{transformFn:void 0,applyValueToInputSignal(t,e){Mu(t,e)}});function zD(t,e){let n=Object.create(X2);n.value=t,n.transformFn=e?.transform;function r(){if(yh(n),n.value===$D){let i=null;throw new Q(-950,i)}return n.value}return r[Sn]=n,r}function LD(t,e){return zD(t,e)}function Z2(t){return zD($D,t)}var qD=(LD.required=Z2,LD);var Jv=new H(""),eU=new H("");function _l(t){return!t.moduleRef}function tU(t){let e=_l(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Ge);return n.run(()=>{_l(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Kn),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),_l(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Jv);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Jv);s.add(o),t.moduleRef.onDestroy(()=>{el(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return rU(r,n,()=>{let o=e.get(br),s=o.add(),a=e.get(Ov);return a.runInitializers(),a.donePromise.then(()=>{let l=e.get(Bv,ml);if(fD(l||ml),!e.get(eU,!0))return _l(t)?e.get(_n):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(_l(t)){let p=e.get(_n);return t.rootComponent!==void 0&&p.bootstrap(t.rootComponent),p}else return nU?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>{o.remove(s)})})})}var nU;function rU(t,e,n){try{let r=n();return gl(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var fp=null;function iU(t=[],e){return Dt.create({name:e,providers:[{provide:Gu,useValue:"platform"},{provide:Jv,useValue:new Set([()=>fp=null])},...t]})}function oU(t=[]){if(fp)return fp;let e=iU(t);return fp=e,sD(),sU(e),e}function sU(t){let e=t.get(Uf,null);Rt(t,()=>{e?.forEach(n=>n())})}var hp=new WeakSet,VD="";function FD(t){return t.get(cv,xA)}function HD(){let t=[{provide:cv,useFactory:()=>{let e=!0;{let n=V(Ar);e=!!window._ejsas?.[n]}return e&&Rn("NgEventReplay"),e}}];return t.push({provide:_r,useValue:()=>{let e=V(_n),{injector:n}=e;if(!hp.has(e)){let r=V(uv);if(FD(n)){UA();let i=n.get(Ar),o=VA(i,(s,a,l)=>{s.nodeType===Node.ELEMENT_NODE&&(MA(s,a,l),kA(s,r))});e.onDestroy(o)}}},multi:!0},{provide:ho,useFactory:()=>{let e=V(_n),{injector:n}=e;return()=>{if(!FD(n)||hp.has(e))return;hp.add(e);let r=n.get(Ar);e.onDestroy(()=>{hp.delete(e),Yv(r)}),e.whenStable().then(()=>{if(e.destroyed)return;let i=n.get(LA);aU(i,n);let o=n.get(uv);o.get(VD)?.forEach(OA),o.delete(VD);let s=i.instance;GA(n)?e.onDestroy(()=>s.cleanUp()):s.cleanUp()})}},multi:!0}),t}var aU=(t,e)=>{let n=e.get(Ar),r=window._ejsas[n],i=t.instance=new kD(new lp(r.c));for(let a of r.et)i.addEvent(a);for(let a of r.etc)i.addEvent(a);let o=OD(n);i.replayEarlyEventInfos(o),Yv(n);let s=new dp(a=>{cU(e,a,a.currentTarget)});MD(i,s)};function cU(t,e,n){let r=(n&&n.getAttribute(ul))??"";/d\d+/.test(r)?uU(r,t,e,n):e.eventPhase===Qv.REPLAY&&lv(e,n)}function uU(t,e,n,r){let i=e.get(PA);i.push({event:n,currentTarget:r}),uD(e,t,lU(i))}function lU(t){return e=>{let n=new Set(e),r=[];for(let{event:i,currentTarget:o}of t){let s=o.getAttribute(ul);n.has(s)?lv(i,o):r.push({event:i,currentTarget:o})}t.length=0,t.push(...r)}}var UD=!1;var dU=1e4;function hU(){UD||(UD=!0,zA(),dD(),gD(),hD(),tD(),Y0(),L0(),_0())}function fU(t){return t.whenStable()}function GD(){let t=[{provide:cl,useFactory:()=>{let e=!0;return e=!!V(ic,{optional:!0})?.get(dv,null),e&&Rn("NgHydration"),e}},{provide:_r,useValue:()=>{N0(!1);let e=V(Ye);V(cl)&&(QA(e),hU())},multi:!0}];return t.push({provide:av,useFactory:()=>V(cl)},{provide:ho,useFactory:()=>{if(V(cl)){let e=V(_n);return()=>{fU(e).then(()=>{e.destroyed||xv(e)})}}return()=>{}},multi:!0}),Xt(t)}var Iee=dU-1e3;var pp=(()=>{class t{static __NG_ELEMENT_ID__=pU}return t})();function pU(t){return gU(wr(),$e(),(t&16)===16)}function gU(t,e,n){if(oo(t)&&!n){let r=Ir(t.index,e);return new ws(r,r)}else if(t.type&175){let r=e[qt];return new ws(r,e)}return null}function WD(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Ae(me.BootstrapApplicationStart);try{let o=i?.injector??oU(r),s=[yD(),uC,...n||[]],a=new ol({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return tU({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Ae(me.BootstrapApplicationEnd)}}var KD=null;function li(){return KD}function Xv(t){KD??=t}var vl=class{},gp=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:()=>V(QD),providedIn:"platform"})}return t})();var QD=(()=>{class t extends gp{_location;_history;_doc=V(Ye);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return li().getBaseHref(this._doc)}onPopState(n){let r=li().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=li().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function XD(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function YD(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function mo(t){return t&&t[0]!=="?"?`?${t}`:t}var mp=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:()=>V(yU),providedIn:"root"})}return t})(),mU=new H(""),yU=(()=>{class t extends mp{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??V(Ye).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return XD(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+mo(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+mo(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+mo(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(de(gp),de(mU,8))};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),cc=(()=>{class t{_subject=new Vt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=EU(YD(JD(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+mo(r))}normalize(n){return t.stripTrailingSlash(vU(this._basePath,JD(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+mo(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+mo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=mo;static joinWithSlash=XD;static stripTrailingSlash=YD;static \u0275fac=function(r){return new(r||t)(de(mp))};static \u0275prov=X({token:t,factory:()=>_U(),providedIn:"root"})}return t})();function _U(){return new cc(de(mp))}function vU(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function JD(t){return t.replace(/\/index.html$/,"")}function EU(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Zv(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var El=class{};var ZD="browser";var Il=class{_doc;constructor(e){this._doc=e}manager},yp=(()=>{class t extends Il{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(de(Ye))};static \u0275prov=X({token:t,factory:t.\u0275fac})}return t})(),Ep=new H(""),rE=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof yp));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof yp);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new Q(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(de(Ep),de(Ge))};static \u0275prov=X({token:t,factory:t.\u0275fac})}return t})(),eE="ng-app-id";function eR(t){for(let e of t)e.remove()}function tR(t,e){let n=e.createElement("style");return n.textContent=t,n}function IU(t,e,n,r){let i=t.head?.querySelectorAll(`style[${eE}="${e}"],link[${eE}="${e}"]`);if(i)for(let o of i)o.removeAttribute(eE),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function nE(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var iE=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,IU(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,tR);r?.forEach(i=>this.addUsage(i,this.external,nE))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(eR(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])eR(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,tR(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,nE(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(de(Ye),de(Ar),de(jf,8),de(Ss))};static \u0275prov=X({token:t,factory:t.\u0275fac})}return t})(),tE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},oE=/%COMP%/g;var rR="%COMP%",wU=`_nghost-${rR}`,TU=`_ngcontent-${rR}`,bU=!0,SU=new H("",{factory:()=>bU});function CU(t){return TU.replace(oE,t)}function AU(t){return wU.replace(oE,t)}function iR(t,e){return e.map(n=>n.replace(oE,t))}var sE=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(n,r,i,o,s,a,l=null,d=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=l,this.tracingService=d,this.defaultRenderer=new wl(n,s,a,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof vp?i.applyToHost(n):i instanceof Tl&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,v=this.tracingService;switch(r.encapsulation){case Yn.Emulated:o=new vp(l,d,r,this.appId,p,s,a,v);break;case Yn.ShadowDom:return new _p(l,n,r,s,a,this.nonce,v,d);case Yn.ExperimentalIsolatedShadowDom:return new _p(l,n,r,s,a,this.nonce,v);default:o=new Tl(l,d,r,p,s,a,v);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(de(rE),de(iE),de(Ar),de(SU),de(Ye),de(Ge),de(jf),de(lo,8))};static \u0275prov=X({token:t,factory:t.\u0275fac})}return t})(),wl=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(tE[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(nR(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(nR(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Q(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=tE[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=tE[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(si.DashCase|si.Important)?e.style.setProperty(n,r,i&si.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&si.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=li().getGlobalEventTarget(this.doc,e),!e))throw new Q(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function nR(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var _p=class extends wl{hostEl;sharedStylesHost;shadowRoot;constructor(e,n,r,i,o,s,a,l){super(e,i,o,a),this.hostEl=n,this.sharedStylesHost=l,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let d=r.styles;d=iR(r.id,d);for(let v of d){let S=document.createElement("style");s&&S.setAttribute("nonce",s),S.textContent=v,this.shadowRoot.appendChild(S)}let p=r.getExternalStyles?.();if(p)for(let v of p){let S=nE(v,i);s&&S.setAttribute("nonce",s),this.shadowRoot.appendChild(S)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Tl=class extends wl{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=l?iR(l,d):d,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Is.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},vp=class extends Tl{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,l){let d=i+"-"+r.id;super(e,n,r,o,s,a,l,d),this.contentAttr=CU(d),this.hostAttr=AU(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Ip=class t extends vl{supportsDOMEvents=!0;static makeCurrent(){Xv(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=DU();return n==null?null:RU(n)}resetBaseElement(){bl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Zv(document.cookie,e)}},bl=null;function DU(){return bl=bl||document.head.querySelector("base"),bl?bl.getAttribute("href"):null}function RU(t){return new URL(t,document.baseURI).pathname}var xU=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:t.\u0275fac})}return t})(),oR=["alt","control","meta","shift"],PU={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},NU={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},sR=(()=>{class t extends Il{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>li().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),oR.forEach(d=>{let p=r.indexOf(d);p>-1&&(r.splice(p,1),s+=d+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(n,r){let i=PU[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),oR.forEach(s=>{if(s!==i){let a=NU[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(de(Ye))};static \u0275prov=X({token:t,factory:t.\u0275fac})}return t})();function aE(t,e,n){return R(this,null,function*(){let r=B({rootComponent:t},MU(e,n));return WD(r)})}function MU(t,e){return{platformRef:e?.platformRef,appProviders:[...FU,...t?.providers??[]],platformProviders:VU}}function kU(){Ip.makeCurrent()}function OU(){return new yr}function LU(){return iv(document),document}var VU=[{provide:Ss,useValue:ZD},{provide:Uf,useValue:kU,multi:!0},{provide:Ye,useFactory:LU}];var FU=[{provide:Gu,useValue:"root"},{provide:yr,useFactory:OU},{provide:Ep,useClass:yp,multi:!0},{provide:Ep,useClass:sR,multi:!0},sE,iE,rE,{provide:Ts,useExisting:sE},{provide:El,useClass:xU},[]];var Sl=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(e,n){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var UU="text/plain",jU="application/json",pte=`${jU}, ${UU}, */*`;var uE=(function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t})(uE||{}),cE=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(e,n=200,r="OK"){this.headers=e.headers||new Sl,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.responseType=e.responseType,this.ok=this.status>=200&&this.status<300}};var wp=class t extends cE{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=uE.Response;clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected,responseType:e.responseType??this.responseType})}};var aR=new H("");var $U=new H(""),zU="b",qU="h",HU="s",GU="st",WU="u",KU="rt",lE=new H(""),QU=["GET","HEAD"];function YU(t,e){let D=V(lE),{isCacheActive:n}=D,r=Tb(D,["isCacheActive"]),{transferCache:i,method:o}=t;if(!n||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!QU.includes(o)||!r.includeRequestsWithAuthHeaders&&JU(t)||r.filter?.(t)===!1)return e(t);let s=V(ic);if(V($U,{optional:!0}))throw new Q(2803,!1);let l=t.url,d=XU(t,l),p=s.get(d,null),v=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(v=i.includeHeaders),p){let{[zU]:P,[KU]:O,[qU]:L,[HU]:z,[GU]:K,[WU]:ne}=p,Te=P;switch(O){case"arraybuffer":Te=new TextEncoder().encode(P).buffer;break;case"blob":Te=new Blob([P]);break}let Xe=new Sl(L);return pe(new wp({body:Te,headers:Xe,status:z,statusText:K,url:ne}))}return e(t)}function JU(t){return t.headers.has("authorization")||t.headers.has("proxy-authorization")}function cR(t){return[...t.keys()].sort().map(e=>`${e}=${t.getAll(e)}`).join("&")}function XU(t,e){let{params:n,method:r,responseType:i}=t,o=cR(n),s=t.serializeBody();s instanceof URLSearchParams?s=cR(s):typeof s!="string"&&(s="");let a=[r,i,e,s,o].join("|"),l=ZU(a);return l}function ZU(t){let e=0;for(let n of t)e=Math.imul(31,e)+n.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function uR(t){return[{provide:lE,useFactory:()=>(Rn("NgHttpTransferCache"),B({isCacheActive:!0},t))},{provide:aR,useValue:YU,multi:!0},{provide:ho,multi:!0,useFactory:()=>{let e=V(_n),n=V(lE);return()=>{e.whenStable().then(()=>{n.isCacheActive=!1})}}}]}var lR=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(de(Ye))};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Tp=(function(t){return t[t.NoHttpTransferCache=0]="NoHttpTransferCache",t[t.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",t[t.I18nSupport=2]="I18nSupport",t[t.EventReplay=3]="EventReplay",t[t.IncrementalHydration=4]="IncrementalHydration",t})(Tp||{});function ej(t,e=[],n={}){return{\u0275kind:t,\u0275providers:e}}function dR(){return ej(Tp.EventReplay,HD())}function hR(...t){let e=[],n=new Set;for(let{\u0275providers:i,\u0275kind:o}of t)n.add(o),i.length&&e.push(i);let r=n.has(Tp.HttpTransferCacheOptions);return Xt([[],[],GD(),n.has(Tp.NoHttpTransferCache)||r?[]:uR({}),e])}var se="primary",Vl=Symbol("RouteTitle"),gE=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Rs(t){return new gE(t)}function dE(t,e,n){for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(i[0]===":")n[i.substring(1)]=o;else if(i!==o.path)return!1}return!0}function wR(t,e,n){let r=n.path.split("/"),i=r.indexOf("**");if(i===-1){if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let l={},d=t.slice(0,r.length);return dE(r,d,l)?{consumed:d,posParams:l}:null}if(i!==r.lastIndexOf("**"))return null;let o=r.slice(0,i),s=r.slice(i+1);if(o.length+s.length>t.length||n.pathMatch==="full"&&e.hasChildren()&&n.path!=="**")return null;let a={};return!dE(o,t.slice(0,o.length),a)||!dE(s,t.slice(t.length-s.length),a)?null:{consumed:t,posParams:a}}function Rp(t){return new Promise((e,n)=>{t.pipe(Yr()).subscribe({next:r=>e(r),error:r=>n(r)})})}function nj(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Dr(t[n],e[n]))return!1;return!0}function Dr(t,e){let n=t?mE(t):void 0,r=e?mE(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!TR(t[i],e[i]))return!1;return!0}function mE(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function TR(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function rj(t){return t.length>0?t[t.length-1]:null}function Ns(t){return Fh(t)?t:gl(t)?yt(Promise.resolve(t)):pe(t)}function bR(t){return Fh(t)?Rp(t):Promise.resolve(t)}var ij={exact:CR,subset:AR},SR={exact:oj,subset:sj,ignored:()=>!0};function fR(t,e,n){return ij[n.paths](t.root,e.root,n.matrixParams)&&SR[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function oj(t,e){return Dr(t,e)}function CR(t,e,n){if(!As(t.segments,e.segments)||!Cp(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!CR(t.children[r],e.children[r],n))return!1;return!0}function sj(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>TR(t[n],e[n]))}function AR(t,e,n){return DR(t,e,e.segments,n)}function DR(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!As(i,n)||e.hasChildren()||!Cp(i,n,r))}else if(t.segments.length===n.length){if(!As(t.segments,n)||!Cp(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!AR(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!As(t.segments,i)||!Cp(t.segments,i,r)||!t.children[se]?!1:DR(t.children[se],e,o,r)}}function Cp(t,e,n){return e.every((r,i)=>SR[n](t[i].parameters,r.parameters))}var Zn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Re([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Rs(this.queryParams),this._queryParamMap}toString(){return uj.serialize(this)}},Re=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ap(this)}},yo=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Rs(this.parameters),this._parameterMap}toString(){return xR(this)}};function aj(t,e){return As(t,e)&&t.every((n,r)=>Dr(n.parameters,e[r].parameters))}function As(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function cj(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===se&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==se&&(n=n.concat(e(i,r)))}),n}var Fl=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:()=>new _o,providedIn:"root"})}return t})(),_o=class{parse(e){let n=new _E(e);return new Zn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Cl(e.root,!0)}`,r=hj(e.queryParams),i=typeof e.fragment=="string"?`#${lj(e.fragment)}`:"";return`${n}${r}${i}`}},uj=new _o;function Ap(t){return t.segments.map(e=>xR(e)).join("/")}function Cl(t,e){if(!t.hasChildren())return Ap(t);if(e){let n=t.children[se]?Cl(t.children[se],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==se&&r.push(`${i}:${Cl(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=cj(t,(r,i)=>i===se?[Cl(t.children[se],!1)]:[`${i}:${Cl(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[se]!=null?`${Ap(t)}/${n[0]}`:`${Ap(t)}/(${n.join("//")})`}}function RR(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bp(t){return RR(t).replace(/%3B/gi,";")}function lj(t){return encodeURI(t)}function yE(t){return RR(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dp(t){return decodeURIComponent(t)}function pR(t){return Dp(t.replace(/\+/g,"%20"))}function xR(t){return`${yE(t.path)}${dj(t.parameters)}`}function dj(t){return Object.entries(t).map(([e,n])=>`;${yE(e)}=${yE(n)}`).join("")}function hj(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${bp(n)}=${bp(i)}`).join("&"):`${bp(n)}=${bp(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var fj=/^[^\/()?;#]+/;function hE(t){let e=t.match(fj);return e?e[0]:""}var pj=/^[^\/()?;=#]+/;function gj(t){let e=t.match(pj);return e?e[0]:""}var mj=/^[^=?&#]+/;function yj(t){let e=t.match(mj);return e?e[0]:""}var _j=/^[^&#]+/;function vj(t){let e=t.match(_j);return e?e[0]:""}var _E=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Re([],{}):new Re([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(e=0){if(e>50)throw new Q(4010,!1);if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let r={};this.peekStartsWith("/(")&&(this.capture("/"),r=this.parseParens(!0,e));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1,e)),(n.length>0||Object.keys(r).length>0)&&(i[se]=new Re(n,r)),i}parseSegment(){let e=hE(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Q(4009,!1);return this.capture(e),new yo(Dp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=gj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=hE(this.remaining);i&&(r=i,this.capture(r))}e[Dp(n)]=Dp(r)}parseQueryParam(e){let n=yj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=vj(this.remaining);s&&(r=s,this.capture(r))}let i=pR(n),o=pR(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e,n){let r={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=hE(this.remaining),o=this.remaining[i.length];if(o!=="/"&&o!==")"&&o!==";")throw new Q(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=se);let a=this.parseChildren(n+1);r[s??se]=Object.keys(a).length===1&&a[se]?a[se]:new Re([],a),this.consumeOptional("//")}return r}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Q(4011,!1)}};function PR(t){return t.segments.length>0?new Re([],{[se]:t}):t}function NR(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=NR(i);if(r===se&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Re(t.segments,e);return Ej(n)}function Ej(t){if(t.numberOfChildren===1&&t.children[se]){let e=t.children[se];return new Re(t.segments.concat(e.segments),e.children)}return t}function hc(t){return t instanceof Zn}function MR(t,e,n=null,r=null,i=new _o){let o=kR(t);return OR(o,e,n,r,i)}function kR(t){let e;function n(o){let s={};for(let l of o.children){let d=n(l);s[l.outlet]=d}let a=new Re(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=PR(r);return e??i}function OR(t,e,n,r,i){let o=t;for(;o.parent;)o=o.parent;if(e.length===0)return fE(o,o,o,n,r,i);let s=Ij(e);if(s.toRoot())return fE(o,o,new Re([],{}),n,r,i);let a=wj(s,o,t),l=a.processChildren?Dl(a.segmentGroup,a.index,s.commands):VR(a.segmentGroup,a.index,s.commands);return fE(o,a.segmentGroup,l,n,r,i)}function xp(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Pl(t){return typeof t=="object"&&t!=null&&t.outlets}function gR(t,e,n){t||="\u0275";let r=new Zn;return r.queryParams={[t]:e},n.parse(n.serialize(r)).queryParams[t]}function fE(t,e,n,r,i,o){let s={};for(let[d,p]of Object.entries(r??{}))s[d]=Array.isArray(p)?p.map(v=>gR(d,v,o)):gR(d,p,o);let a;t===e?a=n:a=LR(t,e,n);let l=PR(NR(a));return new Zn(l,s,i)}function LR(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=LR(o,e,n)}),new Re(t.segments,r)}var Pp=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&xp(r[0]))throw new Q(4003,!1);let i=r.find(Pl);if(i&&i!==rj(r))throw new Q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Ij(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Pp(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,d])=>{a[l]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Pp(n,e,r)}var lc=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function wj(t,e,n){if(t.isAbsolute)return new lc(e,!0,0);if(!n)return new lc(e,!1,NaN);if(n.parent===null)return new lc(n,!0,0);let r=xp(t.commands[0])?0:1,i=n.segments.length-1+r;return Tj(n,i,t.numberOfDoubleDots)}function Tj(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Q(4005,!1);i=r.segments.length}return new lc(r,!1,i-o)}function bj(t){return Pl(t[0])?t[0].outlets:{[se]:t}}function VR(t,e,n){if(t??=new Re([],{}),t.segments.length===0&&t.hasChildren())return Dl(t,e,n);let r=Sj(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Re(t.segments.slice(0,r.pathIndex),{});return o.children[se]=new Re(t.segments.slice(r.pathIndex),t.children),Dl(o,0,i)}else return r.match&&i.length===0?new Re(t.segments,{}):r.match&&!t.hasChildren()?vE(t,e,n):r.match?Dl(t,0,i):vE(t,e,n)}function Dl(t,e,n){if(n.length===0)return new Re(t.segments,{});{let r=bj(n),i={};if(Object.keys(r).some(o=>o!==se)&&t.children[se]&&t.numberOfChildren===1&&t.children[se].segments.length===0){let o=Dl(t.children[se],e,n);return new Re(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=VR(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Re(t.segments,i)}}function Sj(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Pl(a))break;let l=`${a}`,d=r<n.length-1?n[r+1]:null;if(i>0&&l===void 0)break;if(l&&d&&typeof d=="object"&&d.outlets===void 0){if(!yR(l,d,s))return o;r+=2}else{if(!yR(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function vE(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Pl(o)){let l=Cj(o.outlets);return new Re(r,l)}if(i===0&&xp(n[0])){let l=t.segments[e];r.push(new yo(l.path,mR(n[0]))),i++;continue}let s=Pl(o)?o.outlets[se]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&xp(a)?(r.push(new yo(s,mR(a))),i+=2):(r.push(new yo(s,{})),i++)}return new Re(r,{})}function Cj(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=vE(new Re([],{}),0,r))}),e}function mR(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function yR(t,e,n){return t==n.path&&Dr(e,n.parameters)}var Rl="imperative",Et=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(Et||{}),En=class{id;url;constructor(e,n){this.id=e,this.url=n}},xs=class extends En{type=Et.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},hi=class extends En{urlAfterRedirects;type=Et.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ft=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(Ft||{}),Nl=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(Nl||{}),xn=class extends En{reason;code;type=Et.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}};function FR(t){return t instanceof xn&&(t.code===Ft.Redirect||t.code===Ft.SupersededByNewNavigation)}var fi=class extends En{reason;code;type=Et.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},Ps=class extends En{error;target;type=Et.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},fc=class extends En{urlAfterRedirects;state;type=Et.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Np=class extends En{urlAfterRedirects;state;type=Et.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Mp=class extends En{urlAfterRedirects;state;shouldActivate;type=Et.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},kp=class extends En{urlAfterRedirects;state;type=Et.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Op=class extends En{urlAfterRedirects;state;type=Et.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lp=class{route;type=Et.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Vp=class{route;type=Et.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Fp=class{snapshot;type=Et.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Up=class{snapshot;type=Et.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jp=class{snapshot;type=Et.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bp=class{snapshot;type=Et.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var pc=class{},gc=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function Aj(t){return!(t instanceof pc)&&!(t instanceof gc)}var $p=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return this.route?.snapshot._environmentInjector??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new _c(this.rootInjector)}},_c=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new $p(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(de(et))};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),zp=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=EE(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=EE(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=IE(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return IE(e,this._root).map(n=>n.value)}};function EE(t,e){if(t===e.value)return e;for(let n of e.children){let r=EE(t,n);if(r)return r}return null}function IE(t,e){if(t===e.value)return[e];for(let n of e.children){let r=IE(t,n);if(r.length)return r.unshift(e),r}return[]}var vn=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function uc(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ml=class extends zp{snapshot;constructor(e,n){super(e),this.snapshot=n,RE(this,e)}toString(){return this.snapshot.toString()}};function UR(t,e){let n=Dj(t,e),r=new Ct([new yo("",{})]),i=new Ct({}),o=new Ct({}),s=new Ct({}),a=new Ct(""),l=new vo(r,i,s,a,o,se,t,n.root);return l.snapshot=n.root,new Ml(new vn(l,[]),n)}function Dj(t,e){let n={},r={},i={},s=new Ds([],n,i,"",r,se,t,null,{},e);return new kl("",new vn(s,[]))}var vo=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Ke(d=>d[Vl]))??pe(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ke(e=>Rs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ke(e=>Rs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function qp(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:B(B({},e.params),t.params),data:B(B({},e.data),t.data),resolve:B(B(B(B({},t.data),e.data),i?.data),t._resolvedData)}:r={params:B({},t.params),data:B({},t.data),resolve:B(B({},t.data),t._resolvedData??{})},i&&BR(i)&&(r.resolve[Vl]=i.title),r}var Ds=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;_environmentInjector;get title(){return this.data?.[Vl]}constructor(e,n,r,i,o,s,a,l,d,p){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=d,this._environmentInjector=p}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Rs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Rs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},kl=class extends zp{url;constructor(e,n){super(n),this.url=e,RE(this,n)}toString(){return jR(this._root)}};function RE(t,e){e.value._routerState=t,e.children.forEach(n=>RE(t,n))}function jR(t){let e=t.children.length>0?` { ${t.children.map(jR).join(", ")} } `:"";return`${t.value}${e}`}function pE(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Dr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Dr(e.params,n.params)||t.paramsSubject.next(n.params),nj(e.url,n.url)||t.urlSubject.next(n.url),Dr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function wE(t,e){let n=Dr(t.params,e.params)&&aj(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||wE(t.parent,e.parent))}function BR(t){return typeof t.title=="string"||t.title===null}var $R=new H(""),Ul=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=se;activateEvents=new $t;deactivateEvents=new $t;attachEvents=new $t;detachEvents=new $t;routerOutletData=qD();parentContexts=V(_c);location=V(ip);changeDetector=V(pp);inputBinder=V(Kp,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Q(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new Q(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new TE(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Nv({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Z_]})}return t})(),TE=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===vo?this.route:e===_c?this.childContexts:e===$R?this.outletData:this.parent.get(e,n)}},Kp=new H("");var xE=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=hl({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Jn(0,"router-outlet")},dependencies:[Ul],encapsulation:2})}return t})();function PE(t){let e=t.children&&t.children.map(PE),n=e?_e(B({},t),{children:e}):B({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==se&&(n.component=xE),n}function Rj(t,e,n){let r=Ol(t,e._root,n?n._root:void 0);return new Ml(r,e)}function Ol(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=xj(t,e,n);return new vn(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ol(t,a)),s}}let r=Pj(e.value),i=e.children.map(o=>Ol(t,o));return new vn(r,i)}}function xj(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ol(t,r,i);return Ol(t,r)})}function Pj(t){return new vo(new Ct(t.url),new Ct(t.params),new Ct(t.queryParams),new Ct(t.fragment),new Ct(t.data),t.outlet,t.component,t)}var mc=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},zR="ngNavigationCancelingError";function Hp(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=hc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=qR(!1,Ft.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function qR(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[zR]=!0,n.cancellationCode=e,n}function Nj(t){return HR(t)&&hc(t.url)}function HR(t){return!!t&&t[zR]}var bE=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),pE(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=uc(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=uc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=uc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=uc(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Bp(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Up(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(pE(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),pE(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Gp=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},dc=class{component;route;constructor(e,n){this.component=e,this.route=n}};function Mj(t,e,n){let r=t._root,i=e?e._root:null;return Al(r,i,n,[r.value])}function kj(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function vc(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Oy(t)?t:e.get(t):r}function Al(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=uc(e);return t.children.forEach(s=>{Oj(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>xl(a,n.getContext(s),i)),i}function Oj(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=Lj(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Gp(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Al(t,e,a?a.children:null,r,i):Al(t,e,n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new dc(a.outlet.component,s))}else s&&xl(e,a,i),i.canActivateChecks.push(new Gp(r)),o.component?Al(t,null,a?a.children:null,r,i):Al(t,null,n,r,i);return i}function Lj(t,e,n){if(typeof n=="function")return Rt(e._environmentInjector,()=>n(t,e));switch(n){case"pathParamsChange":return!As(t.url,e.url);case"pathParamsOrQueryParamsChange":return!As(t.url,e.url)||!Dr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!wE(t,e)||!Dr(t.queryParams,e.queryParams);default:return!wE(t,e)}}function xl(t,e,n){let r=uc(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?xl(s,e.children.getContext(o),n):xl(s,null,n):xl(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new dc(e.outlet.component,i)):n.canDeactivateChecks.push(new dc(null,i)):n.canDeactivateChecks.push(new dc(null,i))}function jl(t){return typeof t=="function"}function Vj(t){return typeof t=="boolean"}function Fj(t){return t&&jl(t.canLoad)}function Uj(t){return t&&jl(t.canActivate)}function jj(t){return t&&jl(t.canActivateChild)}function Bj(t){return t&&jl(t.canDeactivate)}function $j(t){return t&&jl(t.canMatch)}function GR(t){return t instanceof rs||t?.name==="EmptyError"}var Sp=Symbol("INITIAL_VALUE");function yc(){return Jr(t=>hy(t.map(e=>e.pipe(Qr(1),py(Sp)))).pipe(Ke(e=>{for(let n of e)if(n!==!0){if(n===Sp)return Sp;if(n===!1||zj(n))return n}return!0}),Kr(e=>e!==Sp),Qr(1)))}function zj(t){return hc(t)||t instanceof mc}function WR(t){return t.aborted?pe(void 0).pipe(Qr(1)):new we(e=>{let n=()=>{e.next(),e.complete()};return t.addEventListener("abort",n),()=>t.removeEventListener("abort",n)})}function KR(t){return Fu(WR(t))}function qj(t){return Bt(e=>{let{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:i,canDeactivateChecks:o}}=e;return o.length===0&&i.length===0?pe(_e(B({},e),{guardsResult:!0})):Hj(o,n,r).pipe(Bt(s=>s&&Vj(s)?Gj(n,i,t):pe(s)),Ke(s=>_e(B({},e),{guardsResult:s})))})}function Hj(t,e,n){return yt(t).pipe(Bt(r=>Jj(r.component,r.route,n,e)),Yr(r=>r!==!0,!0))}function Gj(t,e,n){return yt(e).pipe(Uh(r=>ja(Kj(r.route.parent,n),Wj(r.route,n),Yj(t,r.path),Qj(t,r.route))),Yr(r=>r!==!0,!0))}function Wj(t,e){return t!==null&&e&&e(new jp(t)),pe(!0)}function Kj(t,e){return t!==null&&e&&e(new Fp(t)),pe(!0)}function Qj(t,e){let n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||n.length===0)return pe(!0);let r=n.map(i=>Lu(()=>{let o=e._environmentInjector,s=vc(i,o),a=Uj(s)?s.canActivate(e,t):Rt(o,()=>s(e,t));return Ns(a).pipe(Yr())}));return pe(r).pipe(yc())}function Yj(t,e){let n=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(o=>kj(o)).filter(o=>o!==null).map(o=>Lu(()=>{let s=o.guards.map(a=>{let l=o.node._environmentInjector,d=vc(a,l),p=jj(d)?d.canActivateChild(n,t):Rt(l,()=>d(n,t));return Ns(p).pipe(Yr())});return pe(s).pipe(yc())}));return pe(i).pipe(yc())}function Jj(t,e,n,r){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return pe(!0);let o=i.map(s=>{let a=e._environmentInjector,l=vc(s,a),d=Bj(l)?l.canDeactivate(t,e,n,r):Rt(a,()=>l(t,e,n,r));return Ns(d).pipe(Yr())});return pe(o).pipe(yc())}function Xj(t,e,n,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return pe(!0);let s=o.map(a=>{let l=vc(a,t),d=Fj(l)?l.canLoad(e,n):Rt(t,()=>l(e,n)),p=Ns(d);return i?p.pipe(KR(i)):p});return pe(s).pipe(yc(),QR(r))}function QR(t){return ay(gr(e=>{if(typeof e!="boolean")throw Hp(t,e)}),Ke(e=>e===!0))}function Zj(t,e,n,r,i){let o=e.canMatch;if(!o||o.length===0)return pe(!0);let s=o.map(a=>{let l=vc(a,t),d=$j(l)?l.canMatch(e,n):Rt(t,()=>l(e,n));return Ns(d).pipe(KR(i))});return pe(s).pipe(yc(),QR(r))}var di=class t extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,t.prototype)}},Ll=class t extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,t.prototype)}};function eB(t){throw new Q(4e3,!1)}function tB(t){throw qR(!1,Ft.GuardRejected)}var SE=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){return R(this,null,function*(){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[se])throw eB(`${e.redirectTo}`);i=i.children[se]}})}applyRedirectCommands(e,n,r,i,o){return R(this,null,function*(){let s=yield nB(n,i,o);if(s instanceof Zn)throw new Ll(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Ll(a);return a})}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Zn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,r,i)}),new Re(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new Q(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function nB(t,e,n){if(typeof t=="string")return Promise.resolve(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:l,params:d,data:p,title:v,paramMap:S,queryParamMap:D}=e;return Rp(Ns(Rt(n,()=>r({params:d,data:p,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:l,title:v,paramMap:S,queryParamMap:D}))))}function rB(t,e){return t.providers&&!t._injector&&(t._injector=sc(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Xn(t){return t.outlet||se}function iB(t,e){let n=t.filter(r=>Xn(r)===e);return n.push(...t.filter(r=>Xn(r)!==e)),n}var CE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function oB(t,e,n,r,i,o){let s=YR(t,e,n);return s.matched?(r=rB(e,r),Zj(r,e,n,i,o).pipe(Ke(a=>a===!0?s:B({},CE)))):pe(s)}function YR(t,e,n){if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?B({},CE):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||wR)(n,t,e);if(!i)return B({},CE);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?B(B({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function _R(t,e,n,r){return n.length>0&&cB(t,n,r)?{segmentGroup:new Re(e,aB(r,new Re(n,t.children))),slicedSegments:[]}:n.length===0&&uB(t,n,r)?{segmentGroup:new Re(t.segments,sB(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Re(t.segments,t.children),slicedSegments:n}}function sB(t,e,n,r){let i={};for(let o of n)if(Qp(t,e,o)&&!r[Xn(o)]){let s=new Re([],{});i[Xn(o)]=s}return B(B({},r),i)}function aB(t,e){let n={};n[se]=e;for(let r of t)if(r.path===""&&Xn(r)!==se){let i=new Re([],{});n[Xn(r)]=i}return n}function cB(t,e,n){return n.some(r=>Qp(t,e,r)&&Xn(r)!==se)}function uB(t,e,n){return n.some(r=>Qp(t,e,r))}function Qp(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function lB(t,e,n){return e.length===0&&!t.children[n]}var AE=class{};function dB(t,e,n,r,i,o,s="emptyOnly",a){return R(this,null,function*(){return new DE(t,e,n,r,i,s,o,a).recognize()})}var hB=31,DE=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a,l){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=l,this.applyRedirects=new SE(this.urlSerializer,this.urlTree)}noMatchError(e){return new Q(4002,`'${e.segmentGroup}'`)}recognize(){return R(this,null,function*(){let e=_R(this.urlTree.root,[],[],this.config).segmentGroup,{children:n,rootSnapshot:r}=yield this.match(e),i=new vn(r,n),o=new kl("",i),s=MR(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}})}match(e){return R(this,null,function*(){let n=new Ds([],Object.freeze({}),Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),se,this.rootComponentType,null,{},this.injector);try{return{children:yield this.processSegmentGroup(this.injector,this.config,e,se,n),rootSnapshot:n}}catch(r){if(r instanceof Ll)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof di?this.noMatchError(r):r}})}processSegmentGroup(e,n,r,i,o){return R(this,null,function*(){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,n,r,o);let s=yield this.processSegment(e,n,r,r.segments,i,!0,o);return s instanceof vn?[s]:[]})}processChildren(e,n,r,i){return R(this,null,function*(){let o=[];for(let l of Object.keys(r.children))l==="primary"?o.unshift(l):o.push(l);let s=[];for(let l of o){let d=r.children[l],p=iB(n,l),v=yield this.processSegmentGroup(e,p,d,l,i);s.push(...v)}let a=JR(s);return fB(a),a})}processSegment(e,n,r,i,o,s,a){return R(this,null,function*(){for(let l of n)try{return yield this.processSegmentAgainstRoute(l._injector??e,n,l,r,i,o,s,a)}catch(d){if(d instanceof di||GR(d))continue;throw d}if(lB(r,i,o))return new AE;throw new di(r)})}processSegmentAgainstRoute(e,n,r,i,o,s,a,l){return R(this,null,function*(){if(Xn(r)!==s&&(s===se||!Qp(i,o,r)))throw new di(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,l);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,l);throw new di(i)})}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){return R(this,null,function*(){let{matched:l,parameters:d,consumedSegments:p,positionalParamSegments:v,remainingSegments:S}=YR(n,i,o);if(!l)throw new di(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>hB&&(this.allowRedirects=!1));let D=new Ds(o,d,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,vR(i),Xn(i),i.component??i._loadedComponent??null,i,ER(i),e),P=qp(D,a,this.paramsInheritanceStrategy);if(D.params=Object.freeze(P.params),D.data=Object.freeze(P.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let O=yield this.applyRedirects.applyRedirectCommands(p,i.redirectTo,v,D,e),L=yield this.applyRedirects.lineralizeSegments(i,O);return this.processSegment(e,r,n,L.concat(S),s,!1,a)})}matchSegmentAgainstRoute(e,n,r,i,o,s){return R(this,null,function*(){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=yield Rp(oB(n,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(n.children={}),!a?.matched)throw new di(n);e=r._injector??e;let{routes:l}=yield this.getChildConfig(e,r,i),d=r._loadedInjector??e,{parameters:p,consumedSegments:v,remainingSegments:S}=a,D=new Ds(v,p,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,vR(r),Xn(r),r.component??r._loadedComponent??null,r,ER(r),e),P=qp(D,s,this.paramsInheritanceStrategy);D.params=Object.freeze(P.params),D.data=Object.freeze(P.data);let{segmentGroup:O,slicedSegments:L}=_R(n,v,S,l);if(L.length===0&&O.hasChildren()){let ne=yield this.processChildren(d,l,O,D);return new vn(D,ne)}if(l.length===0&&L.length===0)return new vn(D,[]);let z=Xn(r)===o,K=yield this.processSegment(d,l,O,L,z?se:o,!0,D);return new vn(D,K instanceof vn?[K]:[])})}getChildConfig(e,n,r){return R(this,null,function*(){if(n.children)return{routes:n.children,injector:e};if(n.loadChildren){if(n._loadedRoutes!==void 0){let o=n._loadedNgModuleFactory;return o&&!n._loadedInjector&&(n._loadedInjector=o.create(e).injector),{routes:n._loadedRoutes,injector:n._loadedInjector}}if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(yield Rp(Xj(e,n,r,this.urlSerializer,this.abortSignal))){let o=yield this.configLoader.loadChildren(e,n);return n._loadedRoutes=o.routes,n._loadedInjector=o.injector,n._loadedNgModuleFactory=o.factory,o}throw tB(n)}return{routes:[],injector:e}})}};function fB(t){t.sort((e,n)=>e.value.outlet===se?-1:n.value.outlet===se?1:e.value.outlet.localeCompare(n.value.outlet))}function pB(t){let e=t.value.routeConfig;return e&&e.path===""}function JR(t){let e=[],n=new Set;for(let r of t){if(!pB(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=JR(r.children);e.push(new vn(r.value,i))}return e.filter(r=>!n.has(r))}function vR(t){return t.data||{}}function ER(t){return t.resolve||{}}function gB(t,e,n,r,i,o,s){return Bt(a=>R(null,null,function*(){let{state:l,tree:d}=yield dB(t,e,n,r,a.extractedUrl,i,o,s);return _e(B({},a),{targetSnapshot:l,urlAfterRedirects:d})}))}function mB(t){return Bt(e=>{let{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return pe(e);let i=new Set(r.map(a=>a.route)),o=new Set;for(let a of i)if(!o.has(a))for(let l of XR(a))o.add(l);let s=0;return yt(o).pipe(Uh(a=>i.has(a)?yB(a,n,t):(a.data=qp(a,a.parent,t).resolve,pe(void 0))),gr(()=>s++),jh(1),Bt(a=>s===o.size?pe(e):At))})}function XR(t){let e=t.children.map(n=>XR(n)).flat();return[t,...e]}function yB(t,e,n){let r=t.routeConfig,i=t._resolve;return r?.title!==void 0&&!BR(r)&&(i[Vl]=r.title),Lu(()=>(t.data=qp(t,t.parent,n).resolve,_B(i,t,e).pipe(Ke(o=>(t._resolvedData=o,t.data=B(B({},t.data),o),null)))))}function _B(t,e,n){let r=mE(t);if(r.length===0)return pe({});let i={};return yt(r).pipe(Bt(o=>vB(t[o],e,n).pipe(Yr(),gr(s=>{if(s instanceof mc)throw Hp(new _o,s);i[o]=s}))),jh(1),Ke(()=>i),Vu(o=>GR(o)?At:dy(o)))}function vB(t,e,n){let r=e._environmentInjector,i=vc(t,r),o=i.resolve?i.resolve(e,n):Rt(r,()=>i(e,n));return Ns(o)}function IR(t){return Jr(e=>{let n=t(e);return n?yt(n).pipe(Ke(()=>e)):pe(e)})}var NE=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===se);return r}getResolvedTitleForRoute(n){return n.data[Vl]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:()=>V(ZR),providedIn:"root"})}return t})(),ZR=(()=>{class t extends NE{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(de(lR))};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Bl=new H("",{factory:()=>({})}),$l=new H(""),ex=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=V(jv);loadComponent(n,r){return R(this,null,function*(){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=R(this,null,function*(){try{let o=yield bR(Rt(n,()=>r.loadComponent())),s=yield rx(nx(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}});return this.componentLoaders.set(r,i),i})}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=R(this,null,function*(){try{let o=yield tx(r,this.compiler,n,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,r._loadedNgModuleFactory=o.factory,o}finally{this.childrenLoaders.delete(r)}});return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function tx(t,e,n,r){return R(this,null,function*(){let i=yield bR(Rt(n,()=>t.loadChildren())),o=yield rx(nx(i)),s;o instanceof op||Array.isArray(o)?s=o:s=yield e.compileModuleAsync(o),r&&r(t);let a,l,d=!1,p;return Array.isArray(s)?(l=s,d=!0):(a=s.create(n).injector,p=s,l=a.get($l,[],{optional:!0,self:!0}).flat()),{routes:l.map(PE),injector:a,factory:p}})}function EB(t){return t&&typeof t=="object"&&"default"in t}function nx(t){return EB(t)?t.default:t}function rx(t){return R(this,null,function*(){return t})}var Yp=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:()=>V(IB),providedIn:"root"})}return t})(),IB=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ix=new H("");var wB=()=>{},ox=new H(""),sx=(()=>{class t{currentNavigation=ze(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=ze(null);events=new Vt;transitionAbortWithErrorSubject=new Vt;configLoader=V(ex);environmentInjector=V(et);destroyRef=V(Tr);urlSerializer=V(Fl);rootContexts=V(_c);location=V(cc);inputBindingEnabled=V(Kp,{optional:!0})!==null;titleStrategy=V(NE);options=V(Bl,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=V(Yp);createViewTransition=V(ix,{optional:!0});navigationErrorHandler=V(ox,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>pe(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Lp(i)),r=i=>this.events.next(new Vp(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;oi(()=>{this.transitions?.next(_e(B({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(n){return this.transitions=new Ct(null),this.transitions.pipe(Kr(r=>r!==null),Jr(r=>{let i=!1,o=new AbortController,s=()=>!i&&this.currentTransition?.id===r.id;return pe(r).pipe(Jr(a=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Ft.SupersededByNewNavigation),At;this.currentTransition=r;let l=this.lastSuccessfulNavigation();this.currentNavigation.set({id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:l?_e(B({},l),{previousNavigation:null}):null,abort:()=>o.abort()});let d=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=a.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!d&&p!=="reload")return this.events.next(new fi(a.id,this.urlSerializer.serialize(a.rawUrl),"",Nl.IgnoredSameUrlNavigation)),a.resolve(!1),At;if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return pe(a).pipe(Jr(v=>(this.events.next(new xs(v.id,this.urlSerializer.serialize(v.extractedUrl),v.source,v.restoredState)),v.id!==this.navigationId?At:Promise.resolve(v))),gB(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),gr(v=>{r.targetSnapshot=v.targetSnapshot,r.urlAfterRedirects=v.urlAfterRedirects,this.currentNavigation.update(D=>(D.finalUrl=v.urlAfterRedirects,D));let S=new fc(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(S)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:v,extractedUrl:S,source:D,restoredState:P,extras:O}=a,L=new xs(v,this.urlSerializer.serialize(S),D,P);this.events.next(L);let z=UR(this.rootComponentType,this.environmentInjector).snapshot;return this.currentTransition=r=_e(B({},a),{targetSnapshot:z,urlAfterRedirects:S,extras:_e(B({},O),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(K=>(K.finalUrl=S,K)),pe(r)}else return this.events.next(new fi(a.id,this.urlSerializer.serialize(a.extractedUrl),"",Nl.IgnoredByUrlHandlingStrategy)),a.resolve(!1),At}),Ke(a=>{let l=new Np(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);return this.events.next(l),this.currentTransition=r=_e(B({},a),{guards:Mj(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),r}),qj(a=>this.events.next(a)),Jr(a=>{if(r.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw Hp(this.urlSerializer,a.guardsResult);let l=new Mp(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);if(this.events.next(l),!s())return At;if(!a.guardsResult)return this.cancelNavigationTransition(a,"",Ft.GuardRejected),At;if(a.guards.canActivateChecks.length===0)return pe(a);let d=new kp(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);if(this.events.next(d),!s())return At;let p=!1;return pe(a).pipe(mB(this.paramsInheritanceStrategy),gr({next:()=>{p=!0;let v=new Op(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(v)},complete:()=>{p||this.cancelNavigationTransition(a,"",Ft.NoDataFromResolver)}}))}),IR(a=>{let l=p=>{let v=[];if(p.routeConfig?._loadedComponent)p.component=p.routeConfig?._loadedComponent;else if(p.routeConfig?.loadComponent){let S=p._environmentInjector;v.push(this.configLoader.loadComponent(S,p.routeConfig).then(D=>{p.component=D}))}for(let S of p.children)v.push(...l(S));return v},d=l(a.targetSnapshot.root);return d.length===0?pe(a):yt(Promise.all(d).then(()=>a))}),IR(()=>this.afterPreactivation()),Jr(()=>{let{currentSnapshot:a,targetSnapshot:l}=r,d=this.createViewTransition?.(this.environmentInjector,a.root,l.root);return d?yt(d).pipe(Ke(()=>r)):pe(r)}),Qr(1),Ke(a=>{let l=Rj(n.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);this.currentTransition=r=a=_e(B({},a),{targetRouterState:l}),this.currentNavigation.update(d=>(d.targetRouterState=l,d)),this.events.next(new pc),s()&&(new bE(n.routeReuseStrategy,r.targetRouterState,r.currentRouterState,d=>this.events.next(d),this.inputBindingEnabled).activate(this.rootContexts),s()&&(i=!0,this.currentNavigation.update(d=>(d.abort=wB,d)),this.lastSuccessfulNavigation.set(oi(this.currentNavigation)),this.events.next(new hi(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)))}),Fu(WR(o.signal).pipe(Kr(()=>!i&&!r.targetRouterState),gr(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",Ft.Aborted)}))),gr({complete:()=>{i=!0}}),Fu(this.transitionAbortWithErrorSubject.pipe(gr(a=>{throw a}))),fy(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",Ft.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Vu(a=>{if(i=!0,this.destroyed)return r.resolve(!1),At;if(HR(a))this.events.next(new xn(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode)),Nj(a)?this.events.next(new gc(a.url,a.navigationBehaviorOptions)):r.resolve(!1);else{let l=new Ps(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);try{let d=Rt(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof mc){let{message:p,cancellationCode:v}=Hp(this.urlSerializer,d);this.events.next(new xn(r.id,this.urlSerializer.serialize(r.extractedUrl),p,v)),this.events.next(new gc(d.redirectTo,d.navigationBehaviorOptions))}else throw this.events.next(l),a}catch(d){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(d)}}return At}))}))}cancelNavigationTransition(n,r,i){let o=new xn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=oi(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function TB(t){return t!==Rl}var ax=new H("");var cx=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:()=>V(bB),providedIn:"root"})}return t})(),Wp=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}shouldDestroyInjector(e){return!0}},bB=(()=>{class t extends Wp{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ff(t)))(i||t)}})();static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ME=(()=>{class t{urlSerializer=V(Fl);options=V(Bl,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=V(cc);urlHandlingStrategy=V(Yp);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Zn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Zn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=UR(null,V(et));getRouterState(){return this.routerState}_stateMemento=this.createStateMemento();get stateMemento(){return this._stateMemento}updateStateMemento(){this._stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}restoredState(){return this.location.getState()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:()=>V(SB),providedIn:"root"})}return t})(),SB=(()=>{class t extends ME{currentPageId=0;lastSuccessfulId=-1;get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof xs?this.updateStateMemento():n instanceof fi?this.commitTransition(r):n instanceof fc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof pc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof xn&&!FR(n)?this.restoreHistory(r):n instanceof Ps?this.restoreHistory(r,!0):n instanceof hi&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,l=B(B({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",l)}else{let a=B(B({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ff(t)))(i||t)}})();static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function kE(t,e){t.events.pipe(Kr(n=>n instanceof hi||n instanceof xn||n instanceof Ps||n instanceof fi),Ke(n=>n instanceof hi||n instanceof fi?0:(n instanceof xn?n.code===Ft.Redirect||n.code===Ft.SupersededByNewNavigation:!1)?2:1),Kr(n=>n!==2),Qr(1)).subscribe(()=>{e()})}var ux={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lx={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Jp=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=V(sp);stateManager=V(ME);options=V(Bl,{optional:!0})||{};pendingTasks=V(br);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=V(sx);urlSerializer=V(Fl);location=V(cc);urlHandlingStrategy=V(Yp);injector=V(et);_events=new Vt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=V(cx);injectorCleanup=V(ax,{optional:!0});onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=V($l,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!V(Kp,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{}}),this.subscribeToNavigationEvents()}eventsSubscription=new St;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=oi(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof xn&&r.code!==Ft.Redirect&&r.code!==Ft.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof hi)this.navigated=!0,this.injectorCleanup?.(this.routeReuseStrategy,this.routerState,this.config);else if(r instanceof gc){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=B({scroll:i.extras.scroll,browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||TB(i.source)},s);this.scheduleNavigation(a,Rl,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Aj(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Rl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let l=B({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(l=>{this.disposed||this.injector.get(Kn)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return oi(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(PE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription?.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0,this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,d=l?this.currentUrlTree.fragment:s,p=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":p=B(B({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let v;try{let S=i?i.snapshot:this.routerState.snapshot.root;v=kR(S)}catch(S){(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),v=this.currentUrlTree.root}return OR(v,n,p,d??null,this.urlSerializer)}navigateByUrl(n,r={skipLocationChange:!1}){let i=hc(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Rl,null,r)}navigate(n,r={skipLocationChange:!1}){return CB(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch(r){return this.console.warn(io(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=B({},ux):r===!1?i=B({},lx):i=r,hc(n))return fR(this.currentUrlTree,n,i);let o=this.parseUrl(n);return fR(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,d;s?(a=s.resolve,l=s.reject,d=s.promise):d=new Promise((v,S)=>{a=v,l=S});let p=this.pendingTasks.add();return kE(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(Promise.reject.bind(Promise))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function CB(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new Q(4008,!1)}var RB=new H("");function OE(t,...e){return Xt([{provide:$l,multi:!0,useValue:t},[],{provide:vo,useFactory:xB},{provide:ho,multi:!0,useFactory:PB},e.map(n=>n.\u0275providers)])}function xB(){return V(Jp).routerState.root}function PB(){let t=V(Dt);return e=>{let n=t.get(_n);if(e!==n.components[0])return;let r=t.get(Jp),i=t.get(NB);t.get(MB)===1&&r.initialNavigation(),t.get(kB,null,{optional:!0})?.setUpPreloading(),t.get(RB,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var NB=new H("",{factory:()=>new Vt}),MB=new H("",{factory:()=>1});var kB=new H("");var In={production:!1,firebase:{apiKey:"AIzaSyCG6yn73lIBXWtdOqn9q0xLsi59stnMrhE",authDomain:"misteryhunter-689e8.firebaseapp.com",projectId:"misteryhunter-689e8",storageBucket:"misteryhunter-689e8.firebasestorage.app",messagingSenderId:"138840374762",appId:"1:138840374762:web:b6ca1fed6963cad136c693",measurementId:"G-KNV8Z55HPP"}};var hx=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},LB=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},fx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,l=i+2<t.length,d=l?t[i+2]:0,p=o>>2,v=(o&3)<<4|a>>4,S=(a&15)<<2|d>>6,D=d&63;l||(D=64,s||(S=64)),r.push(n[p],n[v],n[S],n[D])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):LB(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let d=i<t.length?n[t.charAt(i)]:64;++i;let v=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||d==null||v==null)throw new VE;let S=o<<2|a>>4;if(r.push(S),d!==64){let D=a<<4&240|d>>2;if(r.push(D),v!==64){let P=d<<6&192|v;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},VE=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},VB=function(t){let e=hx(t);return fx.encodeByteArray(e,!0)},zl=function(t){return VB(t).replace(/\./g,"")},UE=function(t){try{return fx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function FB(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var UB=()=>FB().__FIREBASE_DEFAULTS__,jB=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},BB=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}let e=t&&UE(t[1]);return e&&JSON.parse(e)},jE=()=>{try{return UB()||jB()||BB()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},px=t=>{var e,n;return(n=(e=jE())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},gx=t=>{let e=px(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},BE=()=>{var t;return(t=jE())===null||t===void 0?void 0:t.config},mx=t=>{var e;return(e=jE())===null||e===void 0?void 0:e[`_${t}`]};var Xp=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function yx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[zl(JSON.stringify(n)),zl(JSON.stringify(s)),""].join(".")}function Nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _x(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nn())}function vx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ex(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ix(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $E(){try{return typeof indexedDB=="object"}catch(t){return!1}}function wx(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var $B="FirebaseError",Pn=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=$B,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pi.prototype.create)}},pi=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?zB(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Pn(i,a,r)}};function zB(t,e){return t.replace(qB,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var qB=/\{\$([^}]+)}/g;function Ec(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(dx(o)&&dx(s)){if(!Ec(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function dx(t){return t!==null&&typeof t=="object"}function zE(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Tx(t,e){let n=new FE(t,e);return n.subscribe.bind(n)}var FE=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");HB(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=LE),i.error===void 0&&(i.error=LE),i.complete===void 0&&(i.complete=LE);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(s){}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function HB(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function LE(){}var tre=14400*1e3;function Ic(t){return t&&t._delegate?t._delegate:t}var Mn=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ms="[DEFAULT]";var qE=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Xp;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch(i){}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WB(e))try{this.getOrInitializeService({instanceIdentifier:Ms})}catch(n){}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch(o){}}}}clearInstance(e=Ms){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return R(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ms){return this.instances.has(e)}getOptions(e=Ms){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch(o){}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:GB(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(i){}return r||null}normalizeInstanceIdentifier(e=Ms){return this.component?this.component.multipleInstances?e:Ms:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function GB(t){return t===Ms?void 0:t}function WB(t){return t.instantiationMode==="EAGER"}var Zp=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new qE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var KB=[],xe=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(xe||{}),QB={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},YB=xe.INFO,JB={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},XB=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=JB[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Eo=class{constructor(e){this.name=e,this._logLevel=YB,this._logHandler=XB,this._userLogHandler=null,KB.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}};var ZB=(t,e)=>e.some(n=>t instanceof n),bx,Sx;function e$(){return bx||(bx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function t$(){return Sx||(Sx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Cx=new WeakMap,GE=new WeakMap,Ax=new WeakMap,HE=new WeakMap,KE=new WeakMap;function n$(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Rr(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&Cx.set(n,t)}).catch(()=>{}),KE.set(e,t),e}function r$(t){if(GE.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});GE.set(t,e)}var WE={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return GE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ax.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Dx(t){WE=t(WE)}function i$(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(eg(this),e,...n);return Ax.set(r,e.sort?e.sort():[e]),Rr(r)}:t$().includes(t)?function(...e){return t.apply(eg(this),e),Rr(Cx.get(this))}:function(...e){return Rr(t.apply(eg(this),e))}}function o$(t){return typeof t=="function"?i$(t):(t instanceof IDBTransaction&&r$(t),ZB(t,e$())?new Proxy(t,WE):t)}function Rr(t){if(t instanceof IDBRequest)return n$(t);if(HE.has(t))return HE.get(t);let e=o$(t);return e!==t&&(HE.set(t,e),KE.set(e,t)),e}var eg=t=>KE.get(t);function tg(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Rr(s);return r&&s.addEventListener("upgradeneeded",l=>{r(Rr(s.result),l.oldVersion,l.newVersion,Rr(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}var s$=["get","getKey","getAll","getAllKeys","count"],a$=["put","add","delete","clear"],QE=new Map;function Rx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(QE.get(e))return QE.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=a$.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||s$.includes(n)))return;let o=function(s,...a){return R(this,null,function*(){let l=this.transaction(s,i?"readwrite":"readonly"),d=l.store;return r&&(d=d.index(a.shift())),(yield Promise.all([d[n](...a),i&&l.done]))[0]})};return QE.set(e,o),o}Dx(t=>_e(B({},t),{get:(e,n,r)=>Rx(e,n)||t.get(e,n,r),has:(e,n)=>!!Rx(e,n)||t.has(e,n)}));var JE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(c$(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function c$(t){let e=t.getComponent();return e?.type==="VERSION"}var XE="@firebase/app",xx="0.10.13";var gi=new Eo("@firebase/app"),u$="@firebase/app-compat",l$="@firebase/analytics-compat",d$="@firebase/analytics",h$="@firebase/app-check-compat",f$="@firebase/app-check",p$="@firebase/auth",g$="@firebase/auth-compat",m$="@firebase/database",y$="@firebase/data-connect",_$="@firebase/database-compat",v$="@firebase/functions",E$="@firebase/functions-compat",I$="@firebase/installations",w$="@firebase/installations-compat",T$="@firebase/messaging",b$="@firebase/messaging-compat",S$="@firebase/performance",C$="@firebase/performance-compat",A$="@firebase/remote-config",D$="@firebase/remote-config-compat",R$="@firebase/storage",x$="@firebase/storage-compat",P$="@firebase/firestore",N$="@firebase/vertexai-preview",M$="@firebase/firestore-compat",k$="firebase",O$="10.14.1";var ZE="[DEFAULT]",L$={[XE]:"fire-core",[u$]:"fire-core-compat",[d$]:"fire-analytics",[l$]:"fire-analytics-compat",[f$]:"fire-app-check",[h$]:"fire-app-check-compat",[p$]:"fire-auth",[g$]:"fire-auth-compat",[m$]:"fire-rtdb",[y$]:"fire-data-connect",[_$]:"fire-rtdb-compat",[v$]:"fire-fn",[E$]:"fire-fn-compat",[I$]:"fire-iid",[w$]:"fire-iid-compat",[T$]:"fire-fcm",[b$]:"fire-fcm-compat",[S$]:"fire-perf",[C$]:"fire-perf-compat",[A$]:"fire-rc",[D$]:"fire-rc-compat",[R$]:"fire-gcs",[x$]:"fire-gcs-compat",[P$]:"fire-fst",[M$]:"fire-fst-compat",[N$]:"fire-vertex","fire-js":"fire-js",[k$]:"fire-js-all"};var ql=new Map,V$=new Map,eI=new Map;function Px(t,e){try{t.container.addComponent(e)}catch(n){gi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function wo(t){let e=t.name;if(eI.has(e))return gi.debug(`There were multiple attempts to register component ${e}.`),!1;eI.set(e,t);for(let n of ql.values())Px(n,t);for(let n of V$.values())Px(n,t);return!0}function iI(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function wc(t){return t.settings!==void 0}var F$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Io=new pi("app","Firebase",F$);var tI=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Io.create("app-deleted",{appName:this._name})}};var Tc=O$;function oI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:ZE,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Io.create("bad-app-name",{appName:String(i)});if(n||(n=BE()),!n)throw Io.create("no-options");let o=ql.get(i);if(o){if(Ec(n,o.options)&&Ec(r,o.config))return o;throw Io.create("duplicate-app",{appName:i})}let s=new Zp(i);for(let l of eI.values())s.addComponent(l);let a=new tI(n,r,s);return ql.set(i,a),a}function Gl(t=ZE){let e=ql.get(t);if(!e&&t===ZE&&BE())return oI();if(!e)throw Io.create("no-app",{appName:t});return e}function ng(){return Array.from(ql.values())}function It(t,e,n){var r;let i=(r=L$[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gi.warn(a.join(" "));return}wo(new Mn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var U$="firebase-heartbeat-database",j$=1,Hl="firebase-heartbeat-store",YE=null;function Ox(){return YE||(YE=tg(U$,j$,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Io.create("idb-open",{originalErrorMessage:t.message})})),YE}function B$(t){return R(this,null,function*(){try{let n=(yield Ox()).transaction(Hl),r=yield n.objectStore(Hl).get(Lx(t));return yield n.done,r}catch(e){if(e instanceof Pn)gi.warn(e.message);else{let n=Io.create("idb-get",{originalErrorMessage:e?.message});gi.warn(n.message)}}})}function Nx(t,e){return R(this,null,function*(){try{let r=(yield Ox()).transaction(Hl,"readwrite");yield r.objectStore(Hl).put(e,Lx(t)),yield r.done}catch(n){if(n instanceof Pn)gi.warn(n.message);else{let r=Io.create("idb-set",{originalErrorMessage:n?.message});gi.warn(r.message)}}})}function Lx(t){return`${t.name}!${t.options.appId}`}var $$=1024,z$=720*60*60*1e3,nI=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new rI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return R(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Mx();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=z$}),this._storage.overwrite(this._heartbeatsCache))}catch(r){gi.warn(r)}})}getHeartbeatsHeader(){return R(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=Mx(),{heartbeatsToSend:r,unsentEntries:i}=q$(this._heartbeatsCache.heartbeats),o=zl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return gi.warn(n),""}})}};function Mx(){return new Date().toISOString().substring(0,10)}function q$(t,e=$$){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),kx(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),kx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var rI=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return R(this,null,function*(){return $E()?wx().then(()=>!0).catch(()=>!1):!1})}read(){return R(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield B$(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return R(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Nx(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return R(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Nx(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function kx(t){return zl(JSON.stringify({version:2,heartbeats:t})).length}function H$(t){wo(new Mn("platform-logger",e=>new JE(e),"PRIVATE")),wo(new Mn("heartbeat",e=>new nI(e),"PRIVATE")),It(XE,xx,t),It(XE,xx,"esm2017"),It("fire-js","")}H$("");var G$="firebase",W$="10.14.1";It(G$,W$,"app");function Ut(t){return typeof t=="function"}function Vx(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var rg=Vx(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Wl(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var xr=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Ut(r))try{r()}catch(o){e=o instanceof rg?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Fx(o)}catch(s){e=e??[],s instanceof rg?e=[...e,...s.errors]:e.push(s)}}if(e)throw new rg(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Fx(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Wl(n,e)}remove(e){let{_finalizers:n}=this;n&&Wl(n,e),e instanceof t&&e._removeParent(this)}};xr.EMPTY=(()=>{let t=new xr;return t.closed=!0,t})();var kre=xr.EMPTY;function ig(t){return t instanceof xr||t&&"closed"in t&&Ut(t.remove)&&Ut(t.add)&&Ut(t.unsubscribe)}function Fx(t){Ut(t)?t():t.unsubscribe()}var er={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var bc={setTimeout(t,e,...n){let{delegate:r}=bc;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=bc;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ux(t){bc.setTimeout(()=>{let{onUnhandledError:e}=er;if(e)e(t);else throw t})}function sI(){}var jx=aI("C",void 0,void 0);function Bx(t){return aI("E",void 0,t)}function $x(t){return aI("N",t,void 0)}function aI(t,e,n){return{kind:t,value:e,error:n}}var ks=null;function zx(t){if(er.useDeprecatedSynchronousErrorHandling){let e=!ks;if(e&&(ks={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ks;if(ks=null,n)throw r}}else t()}function qx(t){er.useDeprecatedSynchronousErrorHandling&&ks&&(ks.errorThrown=!0,ks.error=t)}var Os=class extends xr{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ig(e)&&e.add(this)):this.destination=Y$}static create(e,n,r){return new Sc(e,n,r)}next(e){this.isStopped?uI($x(e),this):this._next(e)}error(e){this.isStopped?uI(Bx(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?uI(jx,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},K$=Function.prototype.bind;function cI(t,e){return K$.call(t,e)}var lI=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){og(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){og(r)}else og(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){og(n)}}},Sc=class extends Os{constructor(e,n,r){super();let i;if(Ut(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&er.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&cI(e.next,o),error:e.error&&cI(e.error,o),complete:e.complete&&cI(e.complete,o)}):i=e}this.destination=new lI(i)}};function og(t){er.useDeprecatedSynchronousErrorHandling?qx(t):Ux(t)}function Q$(t){throw t}function uI(t,e){let{onStoppedNotification:n}=er;n&&bc.setTimeout(()=>n(t,e))}var Y$={closed:!0,next:sI,error:Q$,complete:sI};var Hx=typeof Symbol=="function"&&Symbol.observable||"@@observable";function sg(t){return t}function Gx(t){return t.length===0?sg:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ag=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=X$(n)?n:new Sc(n,r,i);return zx(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Wx(r),new r((i,o)=>{let s=new Sc({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Hx](){return this}pipe(...n){return Gx(n)(this)}toPromise(n){return n=Wx(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Wx(t){var e;return(e=t??er.Promise)!==null&&e!==void 0?e:Promise}function J$(t){return t&&Ut(t.next)&&Ut(t.error)&&Ut(t.complete)}function X$(t){return t&&t instanceof Os||J$(t)&&ig(t)}function Z$(t){return Ut(t?.lift)}function Cc(t){return e=>{if(Z$(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function cg(t,e,n,r,i){return new dI(t,e,n,r,i)}var dI=class extends Os{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var hI={now(){return(hI.delegate||Date).now()},delegate:void 0};var ug=class extends xr{constructor(e,n){super()}schedule(e,n=0){return this}};var Kl={setInterval(t,e,...n){let{delegate:r}=Kl;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Kl;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Ac=class extends ug{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Kl.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Kl.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Wl(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Dc=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Dc.now=hI.now;var Rc=class extends Dc{constructor(e,n=Dc.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var fI=new Rc(Ac);var lg=class extends Ac{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var dg=class extends Rc{};var pI=new dg(lg);function hg(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function fg(t,e=0){return Cc((n,r)=>{n.subscribe(cg(r,i=>hg(r,t,()=>r.next(i),e),()=>hg(r,t,()=>r.complete(),e),i=>hg(r,t,()=>r.error(i),e)))})}function pg(t,e=0){return Cc((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function gI(t,e,n){let r=Ut(t)||e||n?{next:t,error:e,complete:n}:t;return r?Cc((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(cg(o,l=>{var d;(d=r.next)===null||d===void 0||d.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,l),o.error(l)},()=>{var l,d;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):sg}var Pc=new os("ANGULARFIRE2_VERSION");function yI(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Yl=(t,e)=>{let n=e?[e]:ng(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Ql=class{constructor(){return Yl(e4)}},e4="app-check";function xc(){}var gg=class{zone;delegate;constructor(e,n=pI){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},mI=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xc,{},xc,xc)),n.pipe(gI({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Jl=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new gg(Zone.current)),this.insideAngular=n.run(()=>new gg(Zone.current,fI)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(de(Ge))};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function mg(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function t4(t){return mg().ngZone.runOutsideAngular(()=>t())}function Ls(t){return mg().ngZone.run(()=>t())}function n4(t){return r4(mg())(t)}function r4(t){return function(n){return n=n.lift(new mI(t.ngZone)),n.pipe(pg(t.outsideAngular),fg(t.insideAngular))}}var i4=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Ls(()=>t.apply(void 0,r))},Xl=(t,e)=>function(){let n,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(n||=Ls(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xc,{},xc,xc))),r[o]=i4(r[o],n));let i=t4(()=>t.apply(this,r));if(!e)if(i instanceof ag){let o=mg();return i.pipe(pg(o.outsideAngular),fg(o.insideAngular))}else return Ls(()=>i);return i instanceof ag?i.pipe(n4):i instanceof Promise?Ls(()=>new Promise((o,s)=>i.then(a=>Ls(()=>o(a)),a=>Ls(()=>s(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Ls(()=>i)};var Vs=class{constructor(e){return e}},Zl=class{constructor(){return ng()}};function o4(t){return t&&t.length===1?t[0]:new Vs(Gl())}var _I=new H("angularfire2._apps"),s4={provide:Vs,useFactory:o4,deps:[[new Cr,_I]]},a4={provide:Zl,deps:[[new Cr,_I]]};function c4(t){return(e,n)=>{let r=n.get(Ss);It("angularfire",Pc.full,"core"),It("angularfire",Pc.full,"app"),It("angular",Py.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Vs(i)}}function Kx(t,...e){return Xt([s4,a4,{provide:_I,useFactory:c4(t),multi:!0,deps:[Ge,Dt,Jl,...e]}])}var Qx=Xl(oI,!0);var Yx=()=>{};var Zx=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},u4=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},eP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,l=i+2<t.length,d=l?t[i+2]:0,p=o>>2,v=(o&3)<<4|a>>4,S=(a&15)<<2|d>>6,D=d&63;l||(D=64,s||(S=64)),r.push(n[p],n[v],n[S],n[D])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Zx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):u4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let d=i<t.length?n[t.charAt(i)]:64;++i;let v=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||d==null||v==null)throw new vI;let S=o<<2|a>>4;if(r.push(S),d!==64){let D=a<<4&240|d>>2;if(r.push(D),v!==64){let P=d<<6&192|v;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},vI=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},l4=function(t){let e=Zx(t);return eP.encodeByteArray(e,!0)},td=function(t){return l4(t).replace(/\./g,"")},tP=function(t){try{return eP.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function nP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var d4=()=>nP().__FIREBASE_DEFAULTS__,h4=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},f4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}let e=t&&tP(t[1]);return e&&JSON.parse(e)},EI=()=>{try{return Yx()||d4()||h4()||f4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},p4=t=>EI()?.emulatorHosts?.[t],rP=t=>{let e=p4(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},II=()=>EI()?.config;var yg=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function _g(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch(e){return!1}}function iP(t){return R(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function oP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=B({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[td(JSON.stringify(n)),td(JSON.stringify(s)),""].join(".")}var ed={};function g4(){let t={prod:[],emulator:[]};for(let e of Object.keys(ed))ed[e]?t.emulator.push(e):t.prod.push(e);return t}function m4(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var Jx=!1;function sP(t,e){if(typeof window>"u"||typeof document>"u"||!_g(window.location.host)||ed[t]===e||ed[t]||Jx)return;ed[t]=e;function n(S){return`__firebase__banner__${S}`}let r="__firebase__banner",o=g4().prod.length>0;function s(){let S=document.getElementById(r);S&&S.remove()}function a(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function l(S,D){S.setAttribute("width","24"),S.setAttribute("id",D),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function d(){let S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Jx=!0,s()},S}function p(S,D){S.setAttribute("id",D),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function v(){let S=m4(r),D=n("text"),P=document.getElementById(D)||document.createElement("span"),O=n("learnmore"),L=document.getElementById(O)||document.createElement("a"),z=n("preprendIcon"),K=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){let ne=S.element;a(ne),p(L,O);let Te=d();l(K,z),ne.append(K,P,L,Te),document.body.appendChild(ne)}o?(P.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",D)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function aP(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function y4(){let t=EI()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(e){return!1}}function cP(){return!y4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wI(){try{return typeof indexedDB=="object"}catch(t){return!1}}function uP(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}var _4="FirebaseError",mi=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=_4,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nd.prototype.create)}},nd=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?v4(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new mi(i,a,r)}};function v4(t,e){return t.replace(E4,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var E4=/\{\$([^}]+)}/g;function To(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(Xx(o)&&Xx(s)){if(!To(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function Xx(t){return t!==null&&typeof t=="object"}var Coe=14400*1e3;function tr(t){return t&&t._delegate?t._delegate:t}var yi=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Fs="[DEFAULT]";var TI=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new yg;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch(i){}}return this.instancesDeferred.get(n).promise}getImmediate(e){let n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(w4(e))try{this.getOrInitializeService({instanceIdentifier:Fs})}catch(n){}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch(o){}}}}clearInstance(e=Fs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return R(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Fs){return this.instances.has(e)}getOptions(e=Fs){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){let r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch(o){}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:I4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(i){}return r||null}normalizeInstanceIdentifier(e=Fs){return this.component?this.component.multipleInstances?e:Fs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function I4(t){return t===Fs?void 0:t}function w4(t){return t.instantiationMode==="EAGER"}var vg=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new TI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var T4=[],ve=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(ve||{}),b4={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},S4=ve.INFO,C4={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},A4=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=C4[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Nc=class{constructor(e){this.name=e,this._logLevel=S4,this._logHandler=A4,this._userLogHandler=null,T4.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?b4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}};var SI=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(D4(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function D4(t){return t.getComponent()?.type==="VERSION"}var CI="@firebase/app",lP="0.14.8";var _i=new Nc("@firebase/app"),R4="@firebase/app-compat",x4="@firebase/analytics-compat",P4="@firebase/analytics",N4="@firebase/app-check-compat",M4="@firebase/app-check",k4="@firebase/auth",O4="@firebase/auth-compat",L4="@firebase/database",V4="@firebase/data-connect",F4="@firebase/database-compat",U4="@firebase/functions",j4="@firebase/functions-compat",B4="@firebase/installations",$4="@firebase/installations-compat",z4="@firebase/messaging",q4="@firebase/messaging-compat",H4="@firebase/performance",G4="@firebase/performance-compat",W4="@firebase/remote-config",K4="@firebase/remote-config-compat",Q4="@firebase/storage",Y4="@firebase/storage-compat",J4="@firebase/firestore",X4="@firebase/ai",Z4="@firebase/firestore-compat",ez="firebase",tz="12.9.0";var AI="[DEFAULT]",nz={[CI]:"fire-core",[R4]:"fire-core-compat",[P4]:"fire-analytics",[x4]:"fire-analytics-compat",[M4]:"fire-app-check",[N4]:"fire-app-check-compat",[k4]:"fire-auth",[O4]:"fire-auth-compat",[L4]:"fire-rtdb",[V4]:"fire-data-connect",[F4]:"fire-rtdb-compat",[U4]:"fire-fn",[j4]:"fire-fn-compat",[B4]:"fire-iid",[$4]:"fire-iid-compat",[z4]:"fire-fcm",[q4]:"fire-fcm-compat",[H4]:"fire-perf",[G4]:"fire-perf-compat",[W4]:"fire-rc",[K4]:"fire-rc-compat",[Q4]:"fire-gcs",[Y4]:"fire-gcs-compat",[J4]:"fire-fst",[Z4]:"fire-fst-compat",[X4]:"fire-vertex","fire-js":"fire-js",[ez]:"fire-js-all"};var rd=new Map,rz=new Map,DI=new Map;function dP(t,e){try{t.container.addComponent(e)}catch(n){_i.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function id(t){let e=t.name;if(DI.has(e))return _i.debug(`There were multiple attempts to register component ${e}.`),!1;DI.set(e,t);for(let n of rd.values())dP(n,t);for(let n of rz.values())dP(n,t);return!0}function gP(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function mP(t){return t==null?!1:t.settings!==void 0}var iz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bo=new nd("app","Firebase",iz);var RI=class{constructor(e,n,r){this._isDeleted=!1,this._options=B({},e),this._config=B({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bo.create("app-deleted",{appName:this._name})}};var yP=tz;function kn(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=B({name:AI,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw bo.create("bad-app-name",{appName:String(i)});if(n||(n=II()),!n)throw bo.create("no-options");let o=rd.get(i);if(o){if(To(n,o.options)&&To(r,o.config))return o;throw bo.create("duplicate-app",{appName:i})}let s=new vg(i);for(let l of DI.values())s.addComponent(l);let a=new RI(n,r,s);return rd.set(i,a),a}function wn(t=AI){let e=rd.get(t);if(!e&&t===AI&&II())return kn();if(!e)throw bo.create("no-app",{appName:t});return e}function nr(){return Array.from(rd.values())}function So(t,e,n){let r=nz[t]??t;n&&(r+=`-${n}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_i.warn(s.join(" "));return}id(new yi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var oz="firebase-heartbeat-database",sz=1,od="firebase-heartbeat-store",bI=null;function _P(){return bI||(bI=tg(oz,sz,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(od)}catch(n){console.warn(n)}}}}).catch(t=>{throw bo.create("idb-open",{originalErrorMessage:t.message})})),bI}function az(t){return R(this,null,function*(){try{let n=(yield _P()).transaction(od),r=yield n.objectStore(od).get(vP(t));return yield n.done,r}catch(e){if(e instanceof mi)_i.warn(e.message);else{let n=bo.create("idb-get",{originalErrorMessage:e?.message});_i.warn(n.message)}}})}function hP(t,e){return R(this,null,function*(){try{let r=(yield _P()).transaction(od,"readwrite");yield r.objectStore(od).put(e,vP(t)),yield r.done}catch(n){if(n instanceof mi)_i.warn(n.message);else{let r=bo.create("idb-set",{originalErrorMessage:n?.message});_i.warn(r.message)}}})}function vP(t){return`${t.name}!${t.options.appId}`}var cz=1024,uz=30,xI=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new PI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return R(this,null,function*(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=fP();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>uz){let i=dz(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){_i.warn(e)}})}getHeartbeatsHeader(){return R(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=fP(),{heartbeatsToSend:n,unsentEntries:r}=lz(this._heartbeatsCache.heartbeats),i=td(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return _i.warn(e),""}})}};function fP(){return new Date().toISOString().substring(0,10)}function lz(t,e=cz){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),pP(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),pP(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var PI=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return R(this,null,function*(){return wI()?uP().then(()=>!0).catch(()=>!1):!1})}read(){return R(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield az(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return R(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return hP(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return R(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return hP(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function pP(t){return td(JSON.stringify({version:2,heartbeats:t})).length}function dz(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function hz(t){id(new yi("platform-logger",e=>new SI(e),"PRIVATE")),id(new yi("heartbeat",e=>new xI(e),"PRIVATE")),So(CI,lP,t),So(CI,lP,"esm2020"),So("fire-js","")}hz("");function DP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var RP=DP,xP=new pi("auth","Firebase",DP());var Tg=new Eo("@firebase/auth");function fz(t,...e){Tg.logLevel<=xe.WARN&&Tg.warn(`Auth (${Tc}): ${t}`,...e)}function Ig(t,...e){Tg.logLevel<=xe.ERROR&&Tg.error(`Auth (${Tc}): ${t}`,...e)}function EP(t,...e){throw zI(t,...e)}function $I(t,...e){return zI(t,...e)}function PP(t,e,n){let r=Object.assign(Object.assign({},RP()),{[e]:n});return new pi("auth","Firebase",r).create(e,{appName:t.name})}function wg(t){return PP(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zI(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return xP.create(t,...e)}function Pe(t,e,...n){if(!t)throw zI(e,...n)}function sd(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Ig(e),new Error(e)}function bg(t,e){t||sd(e)}function pz(){return IP()==="http:"||IP()==="https:"}function IP(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function gz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pz()||Ex()||"connection"in navigator)?navigator.onLine:!0}function mz(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var js=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,bg(n>e,"Short delay should be less than long delay!"),this.isMobile=_x()||Ix()}get(){return gz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function yz(t,e){bg(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Sg=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;sd("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;sd("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;sd("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var _z={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var vz=new js(3e4,6e4);function NP(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Rg(o,s,a,l){return R(this,arguments,function*(t,e,n,r,i={}){return MP(t,i,()=>R(null,null,function*(){let d={},p={};r&&(e==="GET"?p=r:d={body:JSON.stringify(r)});let v=zE(Object.assign({key:t.config.apiKey},p)).slice(1),S=yield t._getAdditionalHeaders();S["Content-Type"]="application/json",t.languageCode&&(S["X-Firebase-Locale"]=t.languageCode);let D=Object.assign({method:e,headers:S},d);return vx()||(D.referrerPolicy="no-referrer"),Sg.fetch()(kP(t,t.config.apiHost,n,v),D)}))})}function MP(t,e,n){return R(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},_z),e);try{let i=new kI(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Eg(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[l,d]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Eg(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw Eg(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw Eg(t,"user-disabled",s);let p=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw PP(t,p,d);EP(t,p)}}catch(i){if(i instanceof Pn)throw i;EP(t,"network-request-failed",{message:String(i)})}})}function kP(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?yz(t.config,i):`${t.config.apiScheme}://${i}`}var kI=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r($I(this.auth,"network-request-failed")),vz.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Eg(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=$I(t,e,r);return i.customData._tokenResponse=n,i}function Ez(t,e){return R(this,null,function*(){return Rg(t,"POST","/v1/accounts:delete",e)})}function OP(t,e){return R(this,null,function*(){return Rg(t,"POST","/v1/accounts:lookup",e)})}function ad(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function qI(t,e=!1){return R(this,null,function*(){let n=Ic(t),r=yield n.getIdToken(e),i=LP(r);Pe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:ad(NI(i.auth_time)),issuedAtTime:ad(NI(i.iat)),expirationTime:ad(NI(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function NI(t){return Number(t)*1e3}function LP(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ig("JWT malformed, contained fewer than 3 sections"),null;try{let i=UE(n);return i?JSON.parse(i):(Ig("Failed to decode base64 JWT payload"),null)}catch(i){return Ig("Caught error parsing JWT payload as JSON",i?.toString()),null}}function wP(t){let e=LP(t);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function OI(t,e,n=!1){return R(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Pn&&Iz(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function Iz({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var LI=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>R(this,null,function*(){yield this.iteration()}),n)}iteration(){return R(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var ud=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ad(this.lastLoginAt),this.creationTime=ad(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Cg(t){return R(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield OI(t,OP(n,{idToken:r}));Pe(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?VP(o.providerUserInfo):[],a=wz(t.providerData,s),l=t.isAnonymous,d=!(t.email&&o.passwordHash)&&!a?.length,p=l?d:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new ud(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(t,v)})}function HI(t){return R(this,null,function*(){let e=Ic(t);yield Cg(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function wz(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function VP(t){return t.map(e=>{var{providerId:n}=e,r=ly(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Tz(t,e){return R(this,null,function*(){let n=yield MP(t,{},()=>R(null,null,function*(){let r=zE({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=kP(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Sg.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function bz(t,e){return R(this,null,function*(){return Rg(t,"POST","/v2/accounts:revokeToken",NP(t,e))})}var cd=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):wP(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");let n=wP(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return R(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return R(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield Tz(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Pe(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Pe(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return sd("not implemented")}};function Co(t,e){Pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var ld=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=ly(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new LI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ud(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return R(this,null,function*(){let n=yield OI(this,this.stsTokenManager.getToken(this.auth,e));return Pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return qI(this,e)}reload(){return HI(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return R(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Cg(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return R(this,null,function*(){if(wc(this.auth.app))return Promise.reject(wg(this.auth));let e=yield this.getIdToken();return yield OI(this,Ez(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,l,d,p;let v=(r=n.displayName)!==null&&r!==void 0?r:void 0,S=(i=n.email)!==null&&i!==void 0?i:void 0,D=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,P=(s=n.photoURL)!==null&&s!==void 0?s:void 0,O=(a=n.tenantId)!==null&&a!==void 0?a:void 0,L=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,z=(d=n.createdAt)!==null&&d!==void 0?d:void 0,K=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:ne,emailVerified:Te,isAnonymous:Xe,providerData:be,stsTokenManager:T}=n;Pe(ne&&T,e,"internal-error");let y=cd.fromJSON(this.name,T);Pe(typeof ne=="string",e,"internal-error"),Co(v,e.name),Co(S,e.name),Pe(typeof Te=="boolean",e,"internal-error"),Pe(typeof Xe=="boolean",e,"internal-error"),Co(D,e.name),Co(P,e.name),Co(O,e.name),Co(L,e.name),Co(z,e.name),Co(K,e.name);let E=new t({uid:ne,auth:e,email:S,emailVerified:Te,displayName:v,isAnonymous:Xe,photoURL:P,phoneNumber:D,tenantId:O,stsTokenManager:y,createdAt:z,lastLoginAt:K});return be&&Array.isArray(be)&&(E.providerData=be.map(w=>Object.assign({},w))),L&&(E._redirectEventId=L),E}static _fromIdTokenResponse(e,n,r=!1){return R(this,null,function*(){let i=new cd;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Cg(o),o})}static _fromGetAccountInfoResponse(e,n,r){return R(this,null,function*(){let i=n.users[0];Pe(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?VP(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new cd;a.updateFromIdToken(r);let l=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ud(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(l,d),l})}};var TP=new Map;function Us(t){bg(t instanceof Function,"Expected a class definition");let e=TP.get(t);return e?(bg(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,TP.set(t,e),e)}var Sz=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return R(this,null,function*(){return!0})}_set(n,r){return R(this,null,function*(){this.storage[n]=r})}_get(n){return R(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return R(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),VI=Sz;function MI(t,e,n){return`firebase:${t}:${e}:${n}`}var Ag=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=MI(this.userKey,i.apiKey,o),this.fullPersistenceKey=MI("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return R(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?ld._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return R(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return R(this,null,function*(){if(!n.length)return new t(Us(VI),e,r);let i=(yield Promise.all(n.map(d=>R(null,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),o=i[0]||Us(VI),s=MI(r,e.config.apiKey,e.name),a=null;for(let d of n)try{let p=yield d._get(s);if(p){let v=ld._fromJSON(e,p);d!==o&&(a=v),o=d;break}}catch(p){}let l=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new t(o,e,r):(o=l[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(d=>R(null,null,function*(){if(d!==o)try{yield d._remove(s)}catch(p){}}))),new t(o,e,r))})}};function bP(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Rz(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Cz(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Pz(e))return"Blackberry";if(Nz(e))return"Webos";if(Az(e))return"Safari";if((e.includes("chrome/")||Dz(e))&&!e.includes("edge/"))return"Chrome";if(xz(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function Cz(t=Nn()){return/firefox\//i.test(t)}function Az(t=Nn()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Dz(t=Nn()){return/crios\//i.test(t)}function Rz(t=Nn()){return/iemobile/i.test(t)}function xz(t=Nn()){return/android/i.test(t)}function Pz(t=Nn()){return/blackberry/i.test(t)}function Nz(t=Nn()){return/webos/i.test(t)}function FP(t,e=[]){let n;switch(t){case"Browser":n=bP(Nn());break;case"Worker":n=`${bP(Nn())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Tc}/${r}`}var FI=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let l=e(o);s(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return R(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch(o){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Mz(n){return R(this,arguments,function*(t,e={}){return Rg(t,"GET","/v2/passwordPolicy",NP(t,e))})}var kz=6,UI=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:kz,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var jI=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dg(this),this.idTokenSubscription=new Dg(this),this.beforeStateQueue=new FI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Us(n)),this._initializationPromise=this.queue(()=>R(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Ag.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch(o){}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return R(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return R(this,null,function*(){try{let n=yield OP(this,{idToken:e}),r=yield ld._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return R(this,null,function*(){var n;if(wc(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!s||s===a)&&l?.user&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return R(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(r){yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return R(this,null,function*(){try{yield Cg(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=mz()}_delete(){return R(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return R(this,null,function*(){if(wc(this.app))return Promise.reject(wg(this));let n=e?Ic(e):null;return n&&Pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return R(this,null,function*(){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>R(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return R(this,null,function*(){return wc(this.app)?Promise.reject(wg(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return wc(this.app)?Promise.reject(wg(this)):this.queue(()=>R(this,null,function*(){yield this.assertedPersistence.setPersistence(Us(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return R(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return R(this,null,function*(){let e=yield Mz(this),n=new UI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new pi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return R(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield bz(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return R(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return R(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Us(e)||this._popupRedirectResolver;Pe(n,this,"argument-error"),this.redirectPersistenceManager=yield Ag.create(this,[Us(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return R(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>R(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return R(this,null,function*(){if(e===this.currentUser)return this.queue(()=>R(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let l=e.addObserver(n,r,i);return()=>{s=!0,l()}}else{let l=e.addObserver(n);return()=>{s=!0,l()}}}directlySetCurrentUser(e){return R(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=FP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return R(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return R(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&fz(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Oz(t){return Ic(t)}var Dg=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Tx(n=>this.observer=n)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Lz={loadJS(){return R(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Vz(t){Lz=t}function Fz(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function Uz(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Us);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var Zoe=Fz("rcb"),ese=new js(3e4,6e4);var tse=new js(2e3,1e4);var nse=600*1e3;var rse=new js(3e4,6e4);var ise=new js(5e3,15e3);var ose=encodeURIComponent("fac");var SP="@firebase/auth",CP="1.7.9";var BI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return R(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function jz(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Bz(t){wo(new Mn("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Pe(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FP(t)},d=new jI(r,i,o,l);return Uz(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),wo(new Mn("auth-internal",e=>{let n=Oz(e.getProvider("auth").getImmediate());return(r=>new BI(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),It(SP,CP,jz(t)),It(SP,CP,"esm2017")}var $z=300,sse=mx("authIdTokenMaxAge")||$z;function zz(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Vz({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=$I("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",zz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Bz("Browser");var $q="auth";var xg=class{constructor(){return Yl($q)}};var UP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jP={};var vi,GI;(function(){var t;function e(T,y){function E(){}E.prototype=y.prototype,T.F=y.prototype,T.prototype=new E,T.prototype.constructor=T,T.D=function(w,I,A){for(var _=Array(arguments.length-2),je=2;je<arguments.length;je++)_[je-2]=arguments[je];return y.prototype[I].apply(w,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,y,E){E||(E=0);let w=Array(16);if(typeof y=="string")for(var I=0;I<16;++I)w[I]=y.charCodeAt(E++)|y.charCodeAt(E++)<<8|y.charCodeAt(E++)<<16|y.charCodeAt(E++)<<24;else for(I=0;I<16;++I)w[I]=y[E++]|y[E++]<<8|y[E++]<<16|y[E++]<<24;y=T.g[0],E=T.g[1],I=T.g[2];let A=T.g[3],_;_=y+(A^E&(I^A))+w[0]+3614090360&4294967295,y=E+(_<<7&4294967295|_>>>25),_=A+(I^y&(E^I))+w[1]+3905402710&4294967295,A=y+(_<<12&4294967295|_>>>20),_=I+(E^A&(y^E))+w[2]+606105819&4294967295,I=A+(_<<17&4294967295|_>>>15),_=E+(y^I&(A^y))+w[3]+3250441966&4294967295,E=I+(_<<22&4294967295|_>>>10),_=y+(A^E&(I^A))+w[4]+4118548399&4294967295,y=E+(_<<7&4294967295|_>>>25),_=A+(I^y&(E^I))+w[5]+1200080426&4294967295,A=y+(_<<12&4294967295|_>>>20),_=I+(E^A&(y^E))+w[6]+2821735955&4294967295,I=A+(_<<17&4294967295|_>>>15),_=E+(y^I&(A^y))+w[7]+4249261313&4294967295,E=I+(_<<22&4294967295|_>>>10),_=y+(A^E&(I^A))+w[8]+1770035416&4294967295,y=E+(_<<7&4294967295|_>>>25),_=A+(I^y&(E^I))+w[9]+2336552879&4294967295,A=y+(_<<12&4294967295|_>>>20),_=I+(E^A&(y^E))+w[10]+4294925233&4294967295,I=A+(_<<17&4294967295|_>>>15),_=E+(y^I&(A^y))+w[11]+2304563134&4294967295,E=I+(_<<22&4294967295|_>>>10),_=y+(A^E&(I^A))+w[12]+1804603682&4294967295,y=E+(_<<7&4294967295|_>>>25),_=A+(I^y&(E^I))+w[13]+4254626195&4294967295,A=y+(_<<12&4294967295|_>>>20),_=I+(E^A&(y^E))+w[14]+2792965006&4294967295,I=A+(_<<17&4294967295|_>>>15),_=E+(y^I&(A^y))+w[15]+1236535329&4294967295,E=I+(_<<22&4294967295|_>>>10),_=y+(I^A&(E^I))+w[1]+4129170786&4294967295,y=E+(_<<5&4294967295|_>>>27),_=A+(E^I&(y^E))+w[6]+3225465664&4294967295,A=y+(_<<9&4294967295|_>>>23),_=I+(y^E&(A^y))+w[11]+643717713&4294967295,I=A+(_<<14&4294967295|_>>>18),_=E+(A^y&(I^A))+w[0]+3921069994&4294967295,E=I+(_<<20&4294967295|_>>>12),_=y+(I^A&(E^I))+w[5]+3593408605&4294967295,y=E+(_<<5&4294967295|_>>>27),_=A+(E^I&(y^E))+w[10]+38016083&4294967295,A=y+(_<<9&4294967295|_>>>23),_=I+(y^E&(A^y))+w[15]+3634488961&4294967295,I=A+(_<<14&4294967295|_>>>18),_=E+(A^y&(I^A))+w[4]+3889429448&4294967295,E=I+(_<<20&4294967295|_>>>12),_=y+(I^A&(E^I))+w[9]+568446438&4294967295,y=E+(_<<5&4294967295|_>>>27),_=A+(E^I&(y^E))+w[14]+3275163606&4294967295,A=y+(_<<9&4294967295|_>>>23),_=I+(y^E&(A^y))+w[3]+4107603335&4294967295,I=A+(_<<14&4294967295|_>>>18),_=E+(A^y&(I^A))+w[8]+1163531501&4294967295,E=I+(_<<20&4294967295|_>>>12),_=y+(I^A&(E^I))+w[13]+2850285829&4294967295,y=E+(_<<5&4294967295|_>>>27),_=A+(E^I&(y^E))+w[2]+4243563512&4294967295,A=y+(_<<9&4294967295|_>>>23),_=I+(y^E&(A^y))+w[7]+1735328473&4294967295,I=A+(_<<14&4294967295|_>>>18),_=E+(A^y&(I^A))+w[12]+2368359562&4294967295,E=I+(_<<20&4294967295|_>>>12),_=y+(E^I^A)+w[5]+4294588738&4294967295,y=E+(_<<4&4294967295|_>>>28),_=A+(y^E^I)+w[8]+2272392833&4294967295,A=y+(_<<11&4294967295|_>>>21),_=I+(A^y^E)+w[11]+1839030562&4294967295,I=A+(_<<16&4294967295|_>>>16),_=E+(I^A^y)+w[14]+4259657740&4294967295,E=I+(_<<23&4294967295|_>>>9),_=y+(E^I^A)+w[1]+2763975236&4294967295,y=E+(_<<4&4294967295|_>>>28),_=A+(y^E^I)+w[4]+1272893353&4294967295,A=y+(_<<11&4294967295|_>>>21),_=I+(A^y^E)+w[7]+4139469664&4294967295,I=A+(_<<16&4294967295|_>>>16),_=E+(I^A^y)+w[10]+3200236656&4294967295,E=I+(_<<23&4294967295|_>>>9),_=y+(E^I^A)+w[13]+681279174&4294967295,y=E+(_<<4&4294967295|_>>>28),_=A+(y^E^I)+w[0]+3936430074&4294967295,A=y+(_<<11&4294967295|_>>>21),_=I+(A^y^E)+w[3]+3572445317&4294967295,I=A+(_<<16&4294967295|_>>>16),_=E+(I^A^y)+w[6]+76029189&4294967295,E=I+(_<<23&4294967295|_>>>9),_=y+(E^I^A)+w[9]+3654602809&4294967295,y=E+(_<<4&4294967295|_>>>28),_=A+(y^E^I)+w[12]+3873151461&4294967295,A=y+(_<<11&4294967295|_>>>21),_=I+(A^y^E)+w[15]+530742520&4294967295,I=A+(_<<16&4294967295|_>>>16),_=E+(I^A^y)+w[2]+3299628645&4294967295,E=I+(_<<23&4294967295|_>>>9),_=y+(I^(E|~A))+w[0]+4096336452&4294967295,y=E+(_<<6&4294967295|_>>>26),_=A+(E^(y|~I))+w[7]+1126891415&4294967295,A=y+(_<<10&4294967295|_>>>22),_=I+(y^(A|~E))+w[14]+2878612391&4294967295,I=A+(_<<15&4294967295|_>>>17),_=E+(A^(I|~y))+w[5]+4237533241&4294967295,E=I+(_<<21&4294967295|_>>>11),_=y+(I^(E|~A))+w[12]+1700485571&4294967295,y=E+(_<<6&4294967295|_>>>26),_=A+(E^(y|~I))+w[3]+2399980690&4294967295,A=y+(_<<10&4294967295|_>>>22),_=I+(y^(A|~E))+w[10]+4293915773&4294967295,I=A+(_<<15&4294967295|_>>>17),_=E+(A^(I|~y))+w[1]+2240044497&4294967295,E=I+(_<<21&4294967295|_>>>11),_=y+(I^(E|~A))+w[8]+1873313359&4294967295,y=E+(_<<6&4294967295|_>>>26),_=A+(E^(y|~I))+w[15]+4264355552&4294967295,A=y+(_<<10&4294967295|_>>>22),_=I+(y^(A|~E))+w[6]+2734768916&4294967295,I=A+(_<<15&4294967295|_>>>17),_=E+(A^(I|~y))+w[13]+1309151649&4294967295,E=I+(_<<21&4294967295|_>>>11),_=y+(I^(E|~A))+w[4]+4149444226&4294967295,y=E+(_<<6&4294967295|_>>>26),_=A+(E^(y|~I))+w[11]+3174756917&4294967295,A=y+(_<<10&4294967295|_>>>22),_=I+(y^(A|~E))+w[2]+718787259&4294967295,I=A+(_<<15&4294967295|_>>>17),_=E+(A^(I|~y))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+y&4294967295,T.g[1]=T.g[1]+(I+(_<<21&4294967295|_>>>11))&4294967295,T.g[2]=T.g[2]+I&4294967295,T.g[3]=T.g[3]+A&4294967295}r.prototype.v=function(T,y){y===void 0&&(y=T.length);let E=y-this.blockSize,w=this.C,I=this.h,A=0;for(;A<y;){if(I==0)for(;A<=E;)i(this,T,A),A+=this.blockSize;if(typeof T=="string"){for(;A<y;)if(w[I++]=T.charCodeAt(A++),I==this.blockSize){i(this,w),I=0;break}}else for(;A<y;)if(w[I++]=T[A++],I==this.blockSize){i(this,w),I=0;break}}this.h=I,this.o+=y},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var y=1;y<T.length-8;++y)T[y]=0;y=this.o*8;for(var E=T.length-8;E<T.length;++E)T[E]=y&255,y/=256;for(this.v(T),T=Array(16),y=0,E=0;E<4;++E)for(let w=0;w<32;w+=8)T[y++]=this.g[E]>>>w&255;return T};function o(T,y){var E=a;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=y(T)}function s(T,y){this.h=y;let E=[],w=!0;for(let I=T.length-1;I>=0;I--){let A=T[I]|0;w&&A==y||(E[I]=A,w=!1)}this.g=E}var a={};function l(T){return-128<=T&&T<128?o(T,function(y){return new s([y|0],y<0?-1:0)}):new s([T|0],T<0?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return v;if(T<0)return L(d(-T));let y=[],E=1;for(let w=0;T>=E;w++)y[w]=T/E|0,E*=4294967296;return new s(y,0)}function p(T,y){if(T.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(T.charAt(0)=="-")return L(p(T.substring(1),y));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=d(Math.pow(y,8)),w=v;for(let A=0;A<T.length;A+=8){var I=Math.min(8,T.length-A);let _=parseInt(T.substring(A,A+I),y);I<8?(I=d(Math.pow(y,I)),w=w.j(I).add(d(_))):(w=w.j(E),w=w.add(d(_)))}return w}var v=l(0),S=l(1),D=l(16777216);t=s.prototype,t.m=function(){if(O(this))return-L(this).m();let T=0,y=1;for(let E=0;E<this.g.length;E++){let w=this.i(E);T+=(w>=0?w:4294967296+w)*y,y*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(P(this))return"0";if(O(this))return"-"+L(this).toString(T);let y=d(Math.pow(T,6));var E=this;let w="";for(;;){let I=Te(E,y).g;E=z(E,I.j(y));let A=((E.g.length>0?E.g[0]:E.h)>>>0).toString(T);if(E=I,P(E))return A+w;for(;A.length<6;)A="0"+A;w=A+w}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function P(T){if(T.h!=0)return!1;for(let y=0;y<T.g.length;y++)if(T.g[y]!=0)return!1;return!0}function O(T){return T.h==-1}t.l=function(T){return T=z(this,T),O(T)?-1:P(T)?0:1};function L(T){let y=T.g.length,E=[];for(let w=0;w<y;w++)E[w]=~T.g[w];return new s(E,~T.h).add(S)}t.abs=function(){return O(this)?L(this):this},t.add=function(T){let y=Math.max(this.g.length,T.g.length),E=[],w=0;for(let I=0;I<=y;I++){let A=w+(this.i(I)&65535)+(T.i(I)&65535),_=(A>>>16)+(this.i(I)>>>16)+(T.i(I)>>>16);w=_>>>16,A&=65535,_&=65535,E[I]=_<<16|A}return new s(E,E[E.length-1]&-2147483648?-1:0)};function z(T,y){return T.add(L(y))}t.j=function(T){if(P(this)||P(T))return v;if(O(this))return O(T)?L(this).j(L(T)):L(L(this).j(T));if(O(T))return L(this.j(L(T)));if(this.l(D)<0&&T.l(D)<0)return d(this.m()*T.m());let y=this.g.length+T.g.length,E=[];for(var w=0;w<2*y;w++)E[w]=0;for(w=0;w<this.g.length;w++)for(let I=0;I<T.g.length;I++){let A=this.i(w)>>>16,_=this.i(w)&65535,je=T.i(I)>>>16,Wt=T.i(I)&65535;E[2*w+2*I]+=_*Wt,K(E,2*w+2*I),E[2*w+2*I+1]+=A*Wt,K(E,2*w+2*I+1),E[2*w+2*I+1]+=_*je,K(E,2*w+2*I+1),E[2*w+2*I+2]+=A*je,K(E,2*w+2*I+2)}for(T=0;T<y;T++)E[T]=E[2*T+1]<<16|E[2*T];for(T=y;T<2*y;T++)E[T]=0;return new s(E,0)};function K(T,y){for(;(T[y]&65535)!=T[y];)T[y+1]+=T[y]>>>16,T[y]&=65535,y++}function ne(T,y){this.g=T,this.h=y}function Te(T,y){if(P(y))throw Error("division by zero");if(P(T))return new ne(v,v);if(O(T))return y=Te(L(T),y),new ne(L(y.g),L(y.h));if(O(y))return y=Te(T,L(y)),new ne(L(y.g),y.h);if(T.g.length>30){if(O(T)||O(y))throw Error("slowDivide_ only works with positive integers.");for(var E=S,w=y;w.l(T)<=0;)E=Xe(E),w=Xe(w);var I=be(E,1),A=be(w,1);for(w=be(w,2),E=be(E,2);!P(w);){var _=A.add(w);_.l(T)<=0&&(I=I.add(E),A=_),w=be(w,1),E=be(E,1)}return y=z(T,I.j(y)),new ne(I,y)}for(I=v;T.l(y)>=0;){for(E=Math.max(1,Math.floor(T.m()/y.m())),w=Math.ceil(Math.log(E)/Math.LN2),w=w<=48?1:Math.pow(2,w-48),A=d(E),_=A.j(y);O(_)||_.l(T)>0;)E-=w,A=d(E),_=A.j(y);P(A)&&(A=S),I=I.add(A),T=z(T,_)}return new ne(I,T)}t.B=function(T){return Te(this,T).h},t.and=function(T){let y=Math.max(this.g.length,T.g.length),E=[];for(let w=0;w<y;w++)E[w]=this.i(w)&T.i(w);return new s(E,this.h&T.h)},t.or=function(T){let y=Math.max(this.g.length,T.g.length),E=[];for(let w=0;w<y;w++)E[w]=this.i(w)|T.i(w);return new s(E,this.h|T.h)},t.xor=function(T){let y=Math.max(this.g.length,T.g.length),E=[];for(let w=0;w<y;w++)E[w]=this.i(w)^T.i(w);return new s(E,this.h^T.h)};function Xe(T){let y=T.g.length+1,E=[];for(let w=0;w<y;w++)E[w]=T.i(w)<<1|T.i(w-1)>>>31;return new s(E,T.h)}function be(T,y){let E=y>>5;y%=32;let w=T.g.length-E,I=[];for(let A=0;A<w;A++)I[A]=y>0?T.i(A+E)>>>y|T.i(A+E+1)<<32-y:T.i(A+E);return new s(I,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,GI=jP.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=p,vi=jP.Integer=s}).apply(typeof UP<"u"?UP:typeof self<"u"?self:typeof window<"u"?window:{});var Pg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ei={};var WI,zq,Mc,KI,dd,Ng,QI,YI,JI;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pg=="object"&&Pg];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var C=0;C<u.length-1;C++){var x=u[C];if(!(x in m))break e;m=m[x]}u=u[u.length-1],C=m[u],f=f(C),f!=C&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}i("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(u){return u||function(f){var m=[],C;for(C in f)Object.prototype.hasOwnProperty.call(f,C)&&m.push([C,f[C]]);return m}});var o=o||{},s=this||self;function a(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function l(u,f,m){return u.call.apply(u.bind,arguments)}function d(u,f,m){return d=l,d.apply(null,arguments)}function p(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var C=m.slice();return C.push.apply(C,arguments),u.apply(this,C)}}function v(u,f){function m(){}m.prototype=f.prototype,u.Z=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Ob=function(C,x,M){for(var $=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)$[ie-2]=arguments[ie];return f.prototype[x].apply(C,$)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function D(u){let f=u.length;if(f>0){let m=Array(f);for(let C=0;C<f;C++)m[C]=u[C];return m}return[]}function P(u,f){for(let C=1;C<arguments.length;C++){let x=arguments[C];var m=typeof x;if(m=m!="object"?m:x?Array.isArray(x)?"array":m:"null",m=="array"||m=="object"&&typeof x.length=="number"){m=u.length||0;let M=x.length||0;u.length=m+M;for(let $=0;$<M;$++)u[m+$]=x[$]}else u.push(x)}}class O{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function L(u){s.setTimeout(()=>{throw u},0)}function z(){var u=T;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class K{constructor(){this.h=this.g=null}add(f,m){let C=ne.get();C.set(f,m),this.h?this.h.next=C:this.g=C,this.h=C}}var ne=new O(()=>new Te,u=>u.reset());class Te{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Xe,be=!1,T=new K,y=()=>{let u=Promise.resolve(void 0);Xe=()=>{u.then(E)}};function E(){for(var u;u=z();){try{u.h.call(u.g)}catch(m){L(m)}var f=ne;f.j(u),f.h<100&&(f.h++,u.next=f.g,f.g=u)}be=!1}function w(){this.u=this.u,this.C=this.C}w.prototype.u=!1,w.prototype.dispose=function(){this.u||(this.u=!0,this.N())},w.prototype[Symbol.dispose]=function(){this.dispose()},w.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var A=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let m=()=>{};s.addEventListener("test",m,f),s.removeEventListener("test",m,f)}catch(m){}return u})();function _(u){return/^[\s\xa0]*$/.test(u)}function je(u,f){I.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,f)}v(je,I),je.prototype.init=function(u,f){let m=this.type=u.type,C=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget,f||(m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement)),this.relatedTarget=f,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&je.Z.h.call(this)},je.prototype.h=function(){je.Z.h.call(this);let u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Wt="closure_listenable_"+(Math.random()*1e6|0),zm=0;function Lo(u,f,m,C,x){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!C,this.ha=x,this.key=++zm,this.da=this.fa=!1}function cr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Pi(u,f,m){for(let C in u)f.call(m,u[C],C,u)}function Bd(u,f){for(let m in u)f.call(void 0,u[m],m,u)}function $d(u){let f={};for(let m in u)f[m]=u[m];return f}let Fn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lt(u,f){let m,C;for(let x=1;x<arguments.length;x++){C=arguments[x];for(m in C)u[m]=C[m];for(let M=0;M<Fn.length;M++)m=Fn[M],Object.prototype.hasOwnProperty.call(C,m)&&(u[m]=C[m])}}function ca(u){this.src=u,this.g={},this.h=0}ca.prototype.add=function(u,f,m,C,x){let M=u.toString();u=this.g[M],u||(u=this.g[M]=[],this.h++);let $=uu(u,f,C,x);return $>-1?(f=u[$],m||(f.fa=!1)):(f=new Lo(f,this.src,M,!!C,x),f.fa=m,u.push(f)),f};function jr(u,f){let m=f.type;if(m in u.g){var C=u.g[m],x=Array.prototype.indexOf.call(C,f,void 0),M;(M=x>=0)&&Array.prototype.splice.call(C,x,1),M&&(cr(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function uu(u,f,m,C){for(let x=0;x<u.length;++x){let M=u[x];if(!M.da&&M.listener==f&&M.capture==!!m&&M.ha==C)return x}return-1}var Br="closure_lm_"+(Math.random()*1e6|0),lu={};function zd(u,f,m,C,x){if(C&&C.once)return la(u,f,m,C,x);if(Array.isArray(f)){for(let M=0;M<f.length;M++)zd(u,f[M],m,C,x);return null}return m=pa(m),u&&u[Wt]?u.J(f,m,a(C)?!!C.capture:!!C,x):Vo(u,f,m,!1,C,x)}function Vo(u,f,m,C,x,M){if(!f)throw Error("Invalid event type");let $=a(x)?!!x.capture:!!x,ie=fa(u);if(ie||(u[Br]=ie=new ca(u)),m=ie.add(f,m,C,$,M),m.proxy)return m;if(C=ua(),m.proxy=C,C.src=u,C.listener=m,u.addEventListener)A||(x=$),x===void 0&&(x=!1),u.addEventListener(f.toString(),C,x);else if(u.attachEvent)u.attachEvent(ha(f.toString()),C);else if(u.addListener&&u.removeListener)u.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return m}function ua(){function u(m){return f.call(u.src,u.listener,m)}let f=qd;return u}function la(u,f,m,C,x){if(Array.isArray(f)){for(let M=0;M<f.length;M++)la(u,f[M],m,C,x);return null}return m=pa(m),u&&u[Wt]?u.K(f,m,a(C)?!!C.capture:!!C,x):Vo(u,f,m,!0,C,x)}function da(u,f,m,C,x){if(Array.isArray(f))for(var M=0;M<f.length;M++)da(u,f[M],m,C,x);else C=a(C)?!!C.capture:!!C,m=pa(m),u&&u[Wt]?(u=u.i,M=String(f).toString(),M in u.g&&(f=u.g[M],m=uu(f,m,C,x),m>-1&&(cr(f[m]),Array.prototype.splice.call(f,m,1),f.length==0&&(delete u.g[M],u.h--)))):u&&(u=fa(u))&&(f=u.g[f.toString()],u=-1,f&&(u=uu(f,m,C,x)),(m=u>-1?f[u]:null)&&Fo(m))}function Fo(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Wt])jr(f.i,u);else{var m=u.type,C=u.proxy;f.removeEventListener?f.removeEventListener(m,C,u.capture):f.detachEvent?f.detachEvent(ha(m),C):f.addListener&&f.removeListener&&f.removeListener(C),(m=fa(f))?(jr(m,u),m.h==0&&(m.src=null,f[Br]=null)):cr(u)}}}function ha(u){return u in lu?lu[u]:lu[u]="on"+u}function qd(u,f){if(u.da)u=!0;else{f=new je(f,this);let m=u.listener,C=u.ha||u.src;u.fa&&Fo(u),u=m.call(C,f)}return u}function fa(u){return u=u[Br],u instanceof ca?u:null}var du="__closure_events_fn_"+(Math.random()*1e9>>>0);function pa(u){return typeof u=="function"?u:(u[du]||(u[du]=function(f){return u.handleEvent(f)}),u[du])}function dt(){w.call(this),this.i=new ca(this),this.M=this,this.G=null}v(dt,w),dt.prototype[Wt]=!0,dt.prototype.removeEventListener=function(u,f,m,C){da(this,u,f,m,C)};function ht(u,f){var m,C=u.G;if(C)for(m=[];C;C=C.G)m.push(C);if(u=u.M,C=f.type||f,typeof f=="string")f=new I(f,u);else if(f instanceof I)f.target=f.target||u;else{var x=f;f=new I(C,u),lt(f,x)}x=!0;let M,$;if(m)for($=m.length-1;$>=0;$--)M=f.g=m[$],x=Uo(M,C,!0,f)&&x;if(M=f.g=u,x=Uo(M,C,!0,f)&&x,x=Uo(M,C,!1,f)&&x,m)for($=0;$<m.length;$++)M=f.g=m[$],x=Uo(M,C,!1,f)&&x}dt.prototype.N=function(){if(dt.Z.N.call(this),this.i){var u=this.i;for(let f in u.g){let m=u.g[f];for(let C=0;C<m.length;C++)cr(m[C]);delete u.g[f],u.h--}}this.G=null},dt.prototype.J=function(u,f,m,C){return this.i.add(String(u),f,!1,m,C)},dt.prototype.K=function(u,f,m,C){return this.i.add(String(u),f,!0,m,C)};function Uo(u,f,m,C){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();let x=!0;for(let M=0;M<f.length;++M){let $=f[M];if($&&!$.da&&$.capture==m){let ie=$.listener,c=$.ha||$.src;$.fa&&jr(u.i,$),x=ie.call(c,C)!==!1&&x}}return x&&!C.defaultPrevented}function qm(u,f){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=d(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:s.setTimeout(u,f||0)}function ga(u){u.g=qm(()=>{u.g=null,u.i&&(u.i=!1,ga(u))},u.l);let f=u.h;u.h=null,u.m.apply(null,f)}class hu extends w{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:ga(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $r(u){w.call(this),this.h=u,this.g={}}v($r,w);var ft=[];function gt(u){Pi(u.g,function(f,m){this.g.hasOwnProperty(m)&&Fo(f)},u),u.g={}}$r.prototype.N=function(){$r.Z.N.call(this),gt(this)},$r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ni=s.JSON.stringify,Hd=s.JSON.parse,Gd=class{stringify(u){return s.JSON.stringify(u,void 0)}parse(u){return s.JSON.parse(u,void 0)}};function Wd(){}function Mi(){}var ki={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ma(){I.call(this,"d")}v(ma,I);function jo(){I.call(this,"c")}v(jo,I);var zr={},Kd=null;function Oi(){return Kd=Kd||new dt}zr.Ia="serverreachability";function fu(u){I.call(this,zr.Ia,u)}v(fu,I);function Li(u){let f=Oi();ht(f,new fu(f))}zr.STAT_EVENT="statevent";function Vi(u,f){I.call(this,zr.STAT_EVENT,u),this.stat=f}v(Vi,I);function pt(u){let f=Oi();ht(f,new Vi(f,u))}zr.Ja="timingevent";function ya(u,f){I.call(this,zr.Ja,u),this.size=f}v(ya,I);function cn(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){u()},f)}function Fi(){this.g=!0}Fi.prototype.ua=function(){this.g=!1};function _a(u,f,m,C,x,M){u.info(function(){if(u.g)if(M){var $="",ie=M.split("&");for(let h=0;h<ie.length;h++){var c=ie[h].split("=");if(c.length>1){let g=c[0];c=c[1];let b=g.split("_");$=b.length>=2&&b[1]=="type"?$+(g+"="+c+"&"):$+(g+"=redacted&")}}}else $=null;else $=M;return"XMLHTTP REQ ("+C+") [attempt "+x+"]: "+f+`
`+m+`
`+$})}function Qd(u,f,m,C,x,M,$){u.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+x+"]: "+f+`
`+m+`
`+M+" "+$})}function Tn(u,f,m,C){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+bt(u,m)+(C?" "+C:"")})}function Yd(u,f){u.info(function(){return"TIMEOUT: "+f})}Fi.prototype.info=function(){};function bt(u,f){if(!u.g)return f;if(!f)return null;try{let M=JSON.parse(f);if(M){for(u=0;u<M.length;u++)if(Array.isArray(M[u])){var m=M[u];if(!(m.length<2)){var C=m[1];if(Array.isArray(C)&&!(C.length<1)){var x=C[0];if(x!="noop"&&x!="stop"&&x!="close")for(let $=1;$<C.length;$++)C[$]=""}}}}return Ni(M)}catch(M){return f}}var Bo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ui={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ji;function pu(){}v(pu,Wd),pu.prototype.g=function(){return new XMLHttpRequest},ji=new pu;function $o(u){return encodeURIComponent(String(u))}function Bi(u){var f=1;u=u.split(":");let m=[];for(;f>0&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function ur(u,f,m,C){this.j=u,this.i=f,this.l=m,this.S=C||1,this.V=new $r(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Jd}function Jd(){this.i=null,this.g="",this.h=!1}var zo={},va={};function qo(u,f,m){u.M=1,u.A=Ko(un(f)),u.u=m,u.R=!0,Ho(u,null)}function Ho(u,f){u.F=Date.now(),$i(u),u.B=un(u.A);var m=u.B,C=u.S;Array.isArray(C)||(C=[String(C)]),rh(m.i,"t",C),u.C=0,m=u.j.L,u.h=new Jd,u.g=Na(u.j,m?f:null,!u.u),u.P>0&&(u.O=new hu(d(u.Y,u,u.g),u.P)),f=u.V,m=u.g,C=u.ba;var x="readystatechange";Array.isArray(x)||(x&&(ft[0]=x.toString()),x=ft);for(let M=0;M<x.length;M++){let $=zd(m,x[M],C||f.handleEvent,!1,f.h||f);if(!$)break;f.g[$.key]=$}f=u.J?$d(u.J):{},u.u?(u.v||(u.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,f)):(u.v="GET",u.g.ea(u.B,u.v,null,f)),Li(),_a(u.i,u.v,u.B,u.l,u.S,u.u)}ur.prototype.ba=function(u){u=u.target;let f=this.O;f&&De(u)==3?f.j():this.Y(u)},ur.prototype.Y=function(u){try{if(u==this.g)e:{let ie=De(this.g),c=this.g.ya(),h=this.g.ca();if(!(ie<3)&&(ie!=3||this.g&&(this.h.h||this.g.la()||lh(this.g)))){this.K||ie!=4||c==7||(c==8||h<=0?Li(3):Li(2)),Ia(this);var f=this.g.ca();this.X=f;var m=lr(this);if(this.o=f==200,Qd(this.i,this.v,this.B,this.l,this.S,ie,f),this.o){if(this.U&&!this.L){t:{if(this.g){var C,x=this.g;if((C=x.g?x.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(C)){var M=C;break t}}M=null}if(u=M)Tn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,qi(this,u);else{this.o=!1,this.m=3,pt(12),qr(this),zi(this);break e}}if(this.R){u=!0;let g;for(;!this.K&&this.C<m.length;)if(g=Xd(this,m),g==va){ie==4&&(this.m=4,pt(14),u=!1),Tn(this.i,this.l,null,"[Incomplete Response]");break}else if(g==zo){this.m=4,pt(15),Tn(this.i,this.l,m,"[Invalid Chunk]"),u=!1;break}else Tn(this.i,this.l,g,null),qi(this,g);if(gu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ie!=4||m.length!=0||this.h.h||(this.m=1,pt(16),u=!1),this.o=this.o&&u,!u)Tn(this.i,this.l,m,"[Invalid Chunked Response]"),qr(this),zi(this);else if(m.length>0&&!this.W){this.W=!0;var $=this.j;$.g==this&&$.aa&&!$.P&&($.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),Ra($),$.P=!0,pt(11))}}else Tn(this.i,this.l,m,null),qi(this,m);ie==4&&qr(this),this.o&&!this.K&&(ie==4?Du(this.j,this):(this.o=!1,$i(this)))}else Hm(this.g),f==400&&m.indexOf("Unknown SID")>0?(this.m=3,pt(12)):(this.m=0,pt(13)),qr(this),zi(this)}}}catch(ie){}};function lr(u){if(!gu(u))return u.g.la();let f=lh(u.g);if(f==="")return"";let m="",C=f.length,x=De(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return qr(u),zi(u),"";u.h.i=new s.TextDecoder}for(let M=0;M<C;M++)u.h.h=!0,m+=u.h.i.decode(f[M],{stream:!(x&&M==C-1)});return f.length=0,u.h.g+=m,u.C=0,u.h.g}function gu(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Xd(u,f){var m=u.C,C=f.indexOf(`
`,m);return C==-1?va:(m=Number(f.substring(m,C)),isNaN(m)?zo:(C+=1,C+m>f.length?va:(f=f.slice(C,C+m),u.C=C+m,f)))}ur.prototype.cancel=function(){this.K=!0,qr(this)};function $i(u){u.T=Date.now()+u.H,Ea(u,u.H)}function Ea(u,f){if(u.D!=null)throw Error("WatchDog timer not null");u.D=cn(d(u.aa,u),f)}function Ia(u){u.D&&(s.clearTimeout(u.D),u.D=null)}ur.prototype.aa=function(){this.D=null;let u=Date.now();u-this.T>=0?(Yd(this.i,this.B),this.M!=2&&(Li(),pt(17)),qr(this),this.m=2,zi(this)):Ea(this,this.T-u)};function zi(u){u.j.I==0||u.K||Du(u.j,u)}function qr(u){Ia(u);var f=u.O;f&&typeof f.dispose=="function"&&f.dispose(),u.O=null,gt(u.V),u.g&&(f=u.g,u.g=null,f.abort(),f.dispose())}function qi(u,f){try{var m=u.j;if(m.I!=0&&(m.g==u||Go(m.h,u))){if(!u.L&&Go(m.h,u)&&m.I==3){try{var C=m.Ba.g.parse(f)}catch(h){C=null}if(Array.isArray(C)&&C.length==3){var x=C;if(x[0]==0){e:if(!m.v){if(m.g)if(m.g.F+3e3<u.F)xa(m),Hr(m);else break e;Xi(m),pt(18)}}else m.xa=x[1],0<m.xa-m.K&&x[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=cn(d(m.Va,m),6e3));dr(m.h)<=1&&m.ta&&(m.ta=void 0)}else fr(m,11)}else if((u.L||m.g==u)&&xa(m),!_(f))for(x=m.Ba.g.parse(f),f=0;f<x.length;f++){let h=x[f],g=h[0];if(!(g<=m.K))if(m.K=g,h=h[1],m.I==2)if(h[0]=="c"){m.M=h[1],m.ba=h[2];let b=h[3];b!=null&&(m.ka=b,m.j.info("VER="+m.ka));let N=h[4];N!=null&&(m.za=N,m.j.info("SVER="+m.za));let k=h[5];k!=null&&typeof k=="number"&&k>0&&(C=1.5*k,m.O=C,m.j.info("backChannelRequestTimeoutMs_="+C)),C=m;let j=u.g;if(j){let Se=j.g?j.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Se){var M=C.h;M.g||Se.indexOf("spdy")==-1&&Se.indexOf("quic")==-1&&Se.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(mu(M,M.h),M.h=null))}if(C.G){let Ze=j.g?j.g.getResponseHeader("X-HTTP-Session-Id"):null;Ze&&(C.wa=Ze,Oe(C.J,C.G,Ze))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-u.F,m.j.info("Handshake RTT: "+m.T+"ms")),C=m;var $=u;if(C.na=Pa(C,C.L?C.ba:null,C.W),$.L){yu(C.h,$);var ie=$,c=C.O;c&&(ie.H=c),ie.D&&(Ia(ie),$i(ie)),C.g=$}else Da(C);m.i.length>0&&Qt(m)}else h[0]!="stop"&&h[0]!="close"||fr(m,7);else m.I==3&&(h[0]=="stop"||h[0]=="close"?h[0]=="stop"?fr(m,7):Aa(m):h[0]!="noop"&&m.l&&m.l.qa(h),m.A=0)}}Li(4)}catch(h){}}var Zd=class{constructor(u,f){this.g=u,this.map=f}};function wa(u){this.l=u||10,s.PerformanceNavigationTiming?(u=s.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Hi(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function dr(u){return u.h?1:u.g?u.g.size:0}function Go(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function mu(u,f){u.g?u.g.add(f):u.h=f}function yu(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}wa.prototype.cancel=function(){if(this.i=_u(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function _u(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let f=u.i;for(let m of u.g.values())f=f.concat(m.G);return f}return D(u.i)}var vu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Eu(u,f){if(u){u=u.split("&");for(let m=0;m<u.length;m++){let C=u[m].indexOf("="),x,M=null;C>=0?(x=u[m].substring(0,C),M=u[m].substring(C+1)):x=u[m],f(x,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function bn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;u instanceof bn?(this.l=u.l,Gi(this,u.j),this.o=u.o,this.g=u.g,Wo(this,u.u),this.h=u.h,Iu(this,ih(u.i)),this.m=u.m):u&&(f=String(u).match(vu))?(this.l=!1,Gi(this,f[1]||"",!0),this.o=Qo(f[2]||""),this.g=Qo(f[3]||"",!0),Wo(this,f[4]),this.h=Qo(f[5]||"",!0),Iu(this,f[6]||"",!0),this.m=Qo(f[7]||"")):(this.l=!1,this.i=new jn(null,this.l))}bn.prototype.toString=function(){let u=[];var f=this.j;f&&u.push(ln(f,Yo,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(ln(f,Yo,!0),"@"),u.push($o(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&u.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(ln(m,m.charAt(0)=="/"?eh:Ta,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",ln(m,ba)),u.join("")},bn.prototype.resolve=function(u){let f=un(this),m=!!u.j;m?Gi(f,u.j):m=!!u.o,m?f.o=u.o:m=!!u.g,m?f.g=u.g:m=u.u!=null;var C=u.h;if(m)Wo(f,u.u);else if(m=!!u.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var x=f.h.lastIndexOf("/");x!=-1&&(C=f.h.slice(0,x+1)+C)}if(x=C,x==".."||x==".")C="";else if(x.indexOf("./")!=-1||x.indexOf("/.")!=-1){C=x.lastIndexOf("/",0)==0,x=x.split("/");let M=[];for(let $=0;$<x.length;){let ie=x[$++];ie=="."?C&&$==x.length&&M.push(""):ie==".."?((M.length>1||M.length==1&&M[0]!="")&&M.pop(),C&&$==x.length&&M.push("")):(M.push(ie),C=!0)}C=M.join("/")}else C=x}return m?f.h=C:m=u.i.toString()!=="",m?Iu(f,ih(u.i)):m=!!u.m,m&&(f.m=u.m),f};function un(u){return new bn(u)}function Gi(u,f,m){u.j=m?Qo(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Wo(u,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);u.u=f}else u.u=null}function Iu(u,f,m){f instanceof jn?(u.i=f,Jo(u.i,u.l)):(m||(f=ln(f,Fe)),u.i=new jn(f,u.l))}function Oe(u,f,m){u.i.set(f,m)}function Ko(u){return Oe(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Qo(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ln(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,Un),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Un(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Yo=/[#\/\?@]/g,Ta=/[#\?:]/g,eh=/[#\?]/g,Fe=/[#\?@]/g,ba=/#/g;function jn(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function dn(u){u.g||(u.g=new Map,u.h=0,u.i&&Eu(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=jn.prototype,t.add=function(u,f){dn(this),this.i=null,u=Wi(this,u);let m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function th(u,f){dn(u),f=Wi(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function wu(u,f){return dn(u),f=Wi(u,f),u.g.has(f)}t.forEach=function(u,f){dn(this),this.g.forEach(function(m,C){m.forEach(function(x){u.call(f,x,C,this)},this)},this)};function nh(u,f){dn(u);let m=[];if(typeof f=="string")wu(u,f)&&(m=m.concat(u.g.get(Wi(u,f))));else for(u=Array.from(u.g.values()),f=0;f<u.length;f++)m=m.concat(u[f]);return m}t.set=function(u,f){return dn(this),this.i=null,u=Wi(this,u),wu(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=nh(this,u),u.length>0?String(u[0]):f):f};function rh(u,f,m){th(u,f),m.length>0&&(u.i=null,u.g.set(Wi(u,f),D(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],f=Array.from(this.g.keys());for(let C=0;C<f.length;C++){var m=f[C];let x=$o(m);m=nh(this,m);for(let M=0;M<m.length;M++){let $=x;m[M]!==""&&($+="="+$o(m[M])),u.push($)}}return this.i=u.join("&")};function ih(u){let f=new jn;return f.i=u.i,u.g&&(f.g=new Map(u.g),f.h=u.h),f}function Wi(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function Jo(u,f){f&&!u.j&&(dn(u),u.i=null,u.g.forEach(function(m,C){let x=C.toLowerCase();C!=x&&(th(this,C),rh(this,x,m))},u)),u.j=f}function hr(u,f){let m=new Fi;if(s.Image){let C=new Image;C.onload=p(Bn,m,"TestLoadImage: loaded",!0,f,C),C.onerror=p(Bn,m,"TestLoadImage: error",!1,f,C),C.onabort=p(Bn,m,"TestLoadImage: abort",!1,f,C),C.ontimeout=p(Bn,m,"TestLoadImage: timeout",!1,f,C),s.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=u}else f(!1)}function oh(u,f){let m=new Fi,C=new AbortController,x=setTimeout(()=>{C.abort(),Bn(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:C.signal}).then(M=>{clearTimeout(x),M.ok?Bn(m,"TestPingServer: ok",!0,f):Bn(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(x),Bn(m,"TestPingServer: error",!1,f)})}function Bn(u,f,m,C,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),C(m)}catch(M){}}function sh(){this.g=new Gd}function $n(u){this.i=u.Sb||null,this.h=u.ab||!1}v($n,Wd),$n.prototype.g=function(){return new Sa(this.i,this.h)};function Sa(u,f){dt.call(this),this.H=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Sa,dt),t=Sa.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=f,this.readyState=1,Kt(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(f.body=u),(this.H||s).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Xo(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Kt(this)),this.g&&(this.readyState=3,Kt(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ah(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function ah(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Xo(this):Kt(this),this.readyState==3&&ah(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,Xo(this))},t.Na=function(u){this.g&&(this.response=u,Xo(this))},t.ga=function(){this.g&&Xo(this)};function Xo(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Kt(u)}t.setRequestHeader=function(u,f){this.A.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function Kt(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Sa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ch(u){let f="";return Pi(u,function(m,C){f+=C,f+=":",f+=m,f+=`\r
`}),f}function Tu(u,f,m){e:{for(C in m){var C=!1;break e}C=!0}C||(m=ch(m),typeof u=="string"?m!=null&&$o(m):Oe(u,f,m))}function Le(u){dt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(Le,dt);var Ca=/^https?$/i,uh=["POST","PUT"];t=Le.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,f,m,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ji.g(),this.g.onreadystatechange=S(d(this.Ca,this));try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(M){Ki(this,M);return}if(u=m||"",m=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var x in C)m.set(x,C[x]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(let M of C.keys())m.set(M,C.get(M));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(m.keys()).find(M=>M.toLowerCase()=="content-type"),x=s.FormData&&u instanceof s.FormData,!(Array.prototype.indexOf.call(uh,f,void 0)>=0)||C||x||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[M,$]of m)this.g.setRequestHeader(M,$);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(M){Ki(this,M)}};function Ki(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.o=5,Qi(u),Yi(u)}function Qi(u){u.A||(u.A=!0,ht(u,"complete"),ht(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,ht(this,"complete"),ht(this,"abort"),Yi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yi(this,!0)),Le.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?bu(this):this.Xa())},t.Xa=function(){bu(this)};function bu(u){if(u.h&&typeof o<"u"){if(u.v&&De(u)==4)setTimeout(u.Ca.bind(u),0);else if(ht(u,"readystatechange"),De(u)==4){u.h=!1;try{let M=u.ca();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var C;if(C=M===0){let $=String(u.D).match(vu)[1]||null;!$&&s.self&&s.self.location&&($=s.self.location.protocol.slice(0,-1)),C=!Ca.test($?$.toLowerCase():"")}m=C}if(m)ht(u,"complete"),ht(u,"success");else{u.o=6;try{var x=De(u)>2?u.g.statusText:""}catch($){x=""}u.l=x+" ["+u.ca()+"]",Qi(u)}}finally{Yi(u)}}}}function Yi(u,f){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);let m=u.g;u.g=null,f||ht(u,"ready");try{m.onreadystatechange=null}catch(C){}}}t.isActive=function(){return!!this.g};function De(u){return u.g?u.g.readyState:0}t.ca=function(){try{return De(this)>2?this.g.status:-1}catch(u){return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch(u){return""}},t.La=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),Hd(f)}};function lh(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch(f){return null}}function Hm(u){let f={};u=(u.g&&De(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<u.length;C++){if(_(u[C]))continue;var m=Bi(u[C]);let x=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let M=f[x]||[];f[x]=M,M.push(m)}Bd(f,function(C){return C.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ji(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function Su(u){this.za=0,this.i=[],this.j=new Fi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ji("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ji("baseRetryDelayMs",5e3,u),this.Za=Ji("retryDelaySeedMs",1e4,u),this.Ta=Ji("forwardChannelMaxRetries",2,u),this.va=Ji("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new wa(u&&u.concurrentRequestLimit),this.Ba=new sh,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Su.prototype,t.ka=8,t.I=1,t.connect=function(u,f,m,C){pt(0),this.W=u,this.H=f||{},m&&C!==void 0&&(this.H.OSID=m,this.H.OAID=C),this.F=this.X,this.J=Pa(this,null,this.W),Qt(this)};function Aa(u){if(Cu(u),u.I==3){var f=u.V++,m=un(u.J);if(Oe(m,"SID",u.M),Oe(m,"RID",f),Oe(m,"TYPE","terminate"),zn(u,m),f=new ur(u,u.j,f),f.M=2,f.A=Ko(un(m)),m=!1,s.navigator&&s.navigator.sendBeacon)try{m=s.navigator.sendBeacon(f.A.toString(),"")}catch(C){}!m&&s.Image&&(new Image().src=f.A,m=!0),m||(f.g=Na(f.j,null),f.g.ea(f.A)),f.F=Date.now(),$i(f)}Ru(u)}function Hr(u){u.g&&(Ra(u),u.g.cancel(),u.g=null)}function Cu(u){Hr(u),u.v&&(s.clearTimeout(u.v),u.v=null),xa(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&s.clearTimeout(u.m),u.m=null)}function Qt(u){if(!Hi(u.h)&&!u.m){u.m=!0;var f=u.Ea;Xe||y(),be||(Xe(),be=!0),T.add(f,u),u.D=0}}function dh(u,f){return dr(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=f.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=cn(d(u.Ea,u,f),Zi(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;let x=new ur(this,this.j,u),M=this.o;if(this.U&&(M?(M=$d(M),lt(M,this.U)):M=this.U),this.u!==null||this.R||(x.J=M,M=null),this.S)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var C=this.i[m];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(f+=C,f>4096){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=Au(this,x,f),m=un(this.J),Oe(m,"RID",u),Oe(m,"CVER",22),this.G&&Oe(m,"X-HTTP-Session-Id",this.G),zn(this,m),M&&(this.R?f="headers="+$o(ch(M))+"&"+f:this.u&&Tu(m,this.u,M)),mu(this.h,x),this.Ra&&Oe(m,"TYPE","init"),this.S?(Oe(m,"$req",f),Oe(m,"SID","null"),x.U=!0,qo(x,m,null)):qo(x,m,f),this.I=2}}else this.I==3&&(u?hh(this,u):this.i.length==0||Hi(this.h)||hh(this))};function hh(u,f){var m;f?m=f.l:m=u.V++;let C=un(u.J);Oe(C,"SID",u.M),Oe(C,"RID",m),Oe(C,"AID",u.K),zn(u,C),u.u&&u.o&&Tu(C,u.u,u.o),m=new ur(u,u.j,m,u.D+1),u.u===null&&(m.J=u.o),f&&(u.i=f.G.concat(u.i)),f=Au(u,m,1e3),m.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),mu(u.h,m),qo(m,C,f)}function zn(u,f){u.H&&Pi(u.H,function(m,C){Oe(f,C,m)}),u.l&&Pi({},function(m,C){Oe(f,C,m)})}function Au(u,f,m){m=Math.min(u.i.length,m);let C=u.l?d(u.l.Ka,u.l,u):null;e:{var x=u.i;let ie=-1;for(;;){let c=["count="+m];ie==-1?m>0?(ie=x[0].g,c.push("ofs="+ie)):ie=0:c.push("ofs="+ie);let h=!0;for(let g=0;g<m;g++){var M=x[g].g;let b=x[g].map;if(M-=ie,M<0)ie=Math.max(0,x[g].g-100),h=!1;else try{M="req"+M+"_"||"";try{var $=b instanceof Map?b:Object.entries(b);for(let[N,k]of $){let j=k;a(k)&&(j=Ni(k)),c.push(M+N+"="+encodeURIComponent(j))}}catch(N){throw c.push(M+"type="+encodeURIComponent("_badmap")),N}}catch(N){C&&C(b)}}if(h){$=c.join("&");break e}}$=void 0}return u=u.i.splice(0,m),f.G=u,$}function Da(u){if(!u.g&&!u.v){u.Y=1;var f=u.Da;Xe||y(),be||(Xe(),be=!0),T.add(f,u),u.A=0}}function Xi(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=cn(d(u.Da,u),Zi(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,Zo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=cn(d(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,pt(10),Hr(this),Zo(this))};function Ra(u){u.B!=null&&(s.clearTimeout(u.B),u.B=null)}function Zo(u){u.g=new ur(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var f=un(u.na);Oe(f,"RID","rpc"),Oe(f,"SID",u.M),Oe(f,"AID",u.K),Oe(f,"CI",u.F?"0":"1"),!u.F&&u.ia&&Oe(f,"TO",u.ia),Oe(f,"TYPE","xmlhttp"),zn(u,f),u.u&&u.o&&Tu(f,u.u,u.o),u.O&&(u.g.H=u.O);var m=u.g;u=u.ba,m.M=1,m.A=Ko(un(f)),m.u=null,m.R=!0,Ho(m,u)}t.Va=function(){this.C!=null&&(this.C=null,Hr(this),Xi(this),pt(19))};function xa(u){u.C!=null&&(s.clearTimeout(u.C),u.C=null)}function Du(u,f){var m=null;if(u.g==f){xa(u),Ra(u),u.g=null;var C=2}else if(Go(u.h,f))m=f.G,yu(u.h,f),C=1;else return;if(u.I!=0){if(f.o)if(C==1){m=f.u?f.u.length:0,f=Date.now()-f.F;var x=u.D;C=Oi(),ht(C,new ya(C,m)),Qt(u)}else Da(u);else if(x=f.m,x==3||x==0&&f.X>0||!(C==1&&dh(u,f)||C==2&&Xi(u)))switch(m&&m.length>0&&(f=u.h,f.i=f.i.concat(m)),x){case 1:fr(u,5);break;case 4:fr(u,10);break;case 3:fr(u,6);break;default:fr(u,2)}}}function Zi(u,f){let m=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(m*=2),m*f}function fr(u,f){if(u.j.info("Error code "+f),f==2){var m=d(u.bb,u),C=u.Ua;let x=!C;C=new bn(C||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Gi(C,"https"),Ko(C),x?hr(C.toString(),m):oh(C.toString(),m)}else pt(2);u.I=0,u.l&&u.l.pa(f),Ru(u),Cu(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function Ru(u){if(u.I=0,u.ja=[],u.l){let f=_u(u.h);(f.length!=0||u.i.length!=0)&&(P(u.ja,f),P(u.ja,u.i),u.h.i.length=0,D(u.i),u.i.length=0),u.l.oa()}}function Pa(u,f,m){var C=m instanceof bn?un(m):new bn(m);if(C.g!="")f&&(C.g=f+"."+C.g),Wo(C,C.u);else{var x=s.location;C=x.protocol,f=f?f+"."+x.hostname:x.hostname,x=+x.port;let M=new bn(null);C&&Gi(M,C),f&&(M.g=f),x&&Wo(M,x),m&&(M.h=m),C=M}return m=u.G,f=u.wa,m&&f&&Oe(C,m,f),Oe(C,"VER",u.ka),zn(u,C),C}function Na(u,f,m){if(f&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Aa&&!u.ma?new Le(new $n({ab:m})):new Le(u.ma),f.Fa(u.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function xu(){}t=xu.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Gr(){}Gr.prototype.g=function(u,f){return new Mt(u,f)};function Mt(u,f){dt.call(this),this.g=new Su(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(u?u["X-WebChannel-Client-Profile"]=f.sa:u={"X-WebChannel-Client-Profile":f.sa}),this.g.U=u,(u=f&&f.Qb)&&!_(u)&&(this.g.u=u),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!_(f)&&(this.g.G=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new Wr(this)}v(Mt,dt),Mt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Mt.prototype.close=function(){Aa(this.g)},Mt.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.v&&(m={},m.__data__=Ni(u),u=m);f.i.push(new Zd(f.Ya++,u)),f.I==3&&Qt(f)},Mt.prototype.N=function(){this.g.l=null,delete this.j,Aa(this.g),delete this.g,Mt.Z.N.call(this)};function Pu(u){ma.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(let m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}v(Pu,ma);function pr(){jo.call(this),this.status=1}v(pr,jo);function Wr(u){this.g=u}v(Wr,xu),Wr.prototype.ra=function(){ht(this.g,"a")},Wr.prototype.qa=function(u){ht(this.g,new Pu(u))},Wr.prototype.pa=function(u){ht(this.g,new pr)},Wr.prototype.oa=function(){ht(this.g,"b")},Gr.prototype.createWebChannel=Gr.prototype.g,Mt.prototype.send=Mt.prototype.o,Mt.prototype.open=Mt.prototype.m,Mt.prototype.close=Mt.prototype.close,JI=Ei.createWebChannelTransport=function(){return new Gr},YI=Ei.getStatEventTarget=function(){return Oi()},QI=Ei.Event=zr,Ng=Ei.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Bo.NO_ERROR=0,Bo.TIMEOUT=8,Bo.HTTP_ERROR=6,dd=Ei.ErrorCode=Bo,Ui.COMPLETE="complete",KI=Ei.EventType=Ui,Mi.EventType=ki,ki.OPEN="a",ki.CLOSE="b",ki.ERROR="c",ki.MESSAGE="d",dt.prototype.listen=dt.prototype.J,Mc=Ei.WebChannel=Mi,zq=Ei.FetchXmlHttpFactory=$n,Le.prototype.listenOnce=Le.prototype.K,Le.prototype.getLastError=Le.prototype.Ha,Le.prototype.getLastErrorCode=Le.prototype.ya,Le.prototype.getStatus=Le.prototype.ca,Le.prototype.getResponseJson=Le.prototype.La,Le.prototype.getResponseText=Le.prototype.la,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Fa,WI=Ei.XhrIo=Le}).apply(typeof Pg<"u"?Pg:typeof self<"u"?self:typeof window<"u"?window:{});var wt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};wt.UNAUTHENTICATED=new wt(null),wt.GOOGLE_CREDENTIALS=new wt("google-credentials-uid"),wt.FIRST_PARTY=new wt("first-party-uid"),wt.MOCK_USER=new wt("mock-user");var Xc="12.9.0";function CN(t){Xc=t}var zs=new Nc("@firebase/firestore");function kc(){return zs.logLevel}function q(t,...e){if(zs.logLevel<=ve.DEBUG){let n=e.map(DT);zs.debug(`Firestore (${Xc}): ${t}`,...n)}}function bi(t,...e){if(zs.logLevel<=ve.ERROR){let n=e.map(DT);zs.error(`Firestore (${Xc}): ${t}`,...n)}}function Si(t,...e){if(zs.logLevel<=ve.WARN){let n=e.map(DT);zs.warn(`Firestore (${Xc}): ${t}`,...n)}}function DT(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch(e){return t}}function re(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,AN(t,r,n)}function AN(t,e,n){let r=`FIRESTORE (${Xc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(i){r+=" CONTEXT: "+n}throw bi(r),new Error(r)}function ke(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||AN(e,i,r)}function ae(t,e){return t}var F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends mi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var rr=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Ug=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},jg=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(wt.UNAUTHENTICATED))}shutdown(){}},rw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Bg=class{constructor(e){this.t=e,this.currentUser=wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ke(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve(),o=new rr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new rr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let l=o;e.enqueueRetryable(()=>R(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},a=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new rr)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ke(typeof r.accessToken=="string",31837,{l:r}),new Ug(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ke(e===null||typeof e=="string",2055,{h:e}),new wt(e)}},iw=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=wt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);let e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}},ow=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new iw(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(wt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},$g=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},zg=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,mP(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ke(this.o===void 0,3512);let r=o=>{o.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,q("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $g(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new $g(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function qq(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var qs=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=qq(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function ge(t,e){return t<e?-1:t>e?1:0}function sw(t,e){let n=Math.min(t.length,e.length);for(let r=0;r<n;r++){let i=t.charAt(r),o=e.charAt(r);if(i!==o)return XI(i)===XI(o)?ge(i,o):XI(i)?1:-1}return ge(t.length,e.length)}var Hq=55296,Gq=57343;function XI(t){let e=t.charCodeAt(0);return e>=Hq&&e<=Gq}function Bc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var BP="__name__",qg=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&re(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&re(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return ge(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):sw(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vi.fromString(e.substring(4,e.length-2))}},He=class t extends qg{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new G(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},Wq=/^[_a-zA-Z][_a-zA-Z0-9]*$/,on=class t extends qg{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return Wq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===BP}static keyField(){return new t([BP])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new G(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new G(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new G(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var Z=class t{constructor(e){this.path=e}static fromPath(e){return new t(He.fromString(e))}static fromName(e){return new t(He.fromString(e).popFirst(5))}static empty(){return new t(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new He(e.slice()))}};function DN(t,e,n){if(!n)throw new G(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function RN(t,e,n,r){if(e===!0&&r===!0)throw new G(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function $P(t){if(!Z.isDocumentKey(t))throw new G(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function zP(t){if(Z.isDocumentKey(t))throw new G(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Tm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re(12329,{type:typeof t})}function sn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Tm(t);throw new G(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function nt(t,e){let n={typeString:t};return e&&(n.value=e),n}function Zc(t,e){if(!xN(t))throw new G(F.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new G(F.INVALID_ARGUMENT,n);return!0}var qP=-62135596800,HP=1e6,rt=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*HP);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<qP)throw new G(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/HP}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zc(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-qP;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};rt._jsonSchemaVersion="firestore/timestamp/1.0",rt._jsonSchema={type:nt("string",rt._jsonSchemaVersion),seconds:nt("number"),nanoseconds:nt("number")};var ue=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new rt(0,0))}static max(){return new t(new rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var yd=-1,Hg=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Hg.UNKNOWN_ID=-1;function Kq(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ue.fromTimestamp(r===1e9?new rt(n+1,0):new rt(n,r));return new Hs(i,Z.empty(),e)}function Qq(t){return new Hs(t.readTime,t.key,yd)}var Hs=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ue.min(),Z.empty(),yd)}static max(){return new t(ue.max(),Z.empty(),yd)}};function Yq(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}var Jq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",aw=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function eu(t){return R(this,null,function*(){if(t.code!==F.FAILED_PRECONDITION||t.message!==Jq)throw t;q("LocalStore","Unexpectedly lost primary lease")})}var U=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},l=>r(l))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let l=0;l<o;l++){let d=l;n(e[d]).next(p=>{s[d]=p,++a,a===o&&r(s)},p=>i(p))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function Xq(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function tu(t){return t.name==="IndexedDbTransactionError"}var RT=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ue&&this.ue(n),n}}t.ce=-1;return t})(),xT=-1;function bm(t){return t==null}function _d(t){return t===0&&1/t==-1/0}function Zq(t){return typeof t=="number"&&Number.isInteger(t)&&!_d(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var PN="";function eH(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=GP(e)),e=tH(t.get(n),e);return GP(e)}function tH(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case PN:n+="";break;default:n+=o}}return n}function GP(t){return t+PN+""}var nH="remoteDocuments",NN="owner";var MN="mutationQueues";var kN="mutations";var ON="documentMutations",rH="remoteDocumentsV14";var LN="remoteDocumentGlobal";var VN="targets";var FN="targetDocuments";var UN="targetGlobal",jN="collectionParents";var BN="clientMetadata";var $N="bundles";var zN="namedQueries";var iH="indexConfiguration";var oH="indexState";var sH="indexEntries";var qN="documentOverlays";var aH="globals";var cH=[MN,kN,ON,nH,VN,NN,UN,FN,BN,LN,jN,$N,zN],aae=[...cH,qN],uH=[MN,kN,ON,rH,VN,NN,UN,FN,BN,LN,jN,$N,zN,qN],lH=uH,dH=[...lH,iH,oH,sH];var cae=[...dH,aH];function WP(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function No(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function HN(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Je=class t{constructor(e,n){this.comparator=e,this.root=n||Pr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Pr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fc(this.root,e,this.comparator,!0)}},Fc=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Pr=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw re(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw re(27949);return e+(this.isRed()?0:1)}};Pr.EMPTY=null,Pr.RED=!0,Pr.BLACK=!1;Pr.EMPTY=new class{constructor(){this.size=0}get key(){throw re(57766)}get value(){throw re(16141)}get color(){throw re(16727)}get left(){throw re(29726)}get right(){throw re(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Pr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Tt=class t{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Gg(this.data.getIterator())}getIteratorFrom(e){return new Gg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Gg=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ln=class t{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new t([])}unionWith(e){let n=new Tt(on.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Bc(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Wg=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var xt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Wg("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};xt.EMPTY_BYTE_STRING=new xt("");var hH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ci(t){if(ke(!!t,39018),typeof t=="string"){let e=0,n=hH.exec(t);if(ke(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qe(t.seconds),nanos:qe(t.nanos)}}function qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ai(t){return typeof t=="string"?xt.fromBase64String(t):xt.fromUint8Array(t)}var GN="server_timestamp",WN="__type__",KN="__previous_value__",QN="__local_write_time__";function Sm(t){return(t?.mapValue?.fields||{})[WN]?.stringValue===GN}function Cm(t){let e=t.mapValue.fields[KN];return Sm(e)?Cm(e):e}function vd(t){let e=Ci(t.mapValue.fields[QN].timestampValue);return new rt(e.seconds,e.nanos)}var cw=class{constructor(e,n,r,i,o,s,a,l,d,p,v){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=d,this.isUsingEmulator=p,this.apiKey=v}},Kg="(default)",Ed=class t{constructor(e,n){this.projectId=e,this.database=n||Kg}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Kg}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};function YN(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new G(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ed(t.options.projectId,e)}var PT="__type__",JN="__max__",Mg={mapValue:{fields:{__type__:{stringValue:JN}}}},NT="__vector__",$c="value";function Ao(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Sm(t)?4:ZN(t)?9007199254740991:XN(t)?10:11:re(28295,{value:t})}function Lr(t,e){if(t===e)return!0;let n=Ao(t);if(n!==Ao(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vd(t).isEqual(vd(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Ci(i.timestampValue),a=Ci(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return Ai(i.bytesValue).isEqual(Ai(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return qe(i.geoPointValue.latitude)===qe(o.geoPointValue.latitude)&&qe(i.geoPointValue.longitude)===qe(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return qe(i.integerValue)===qe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=qe(i.doubleValue),a=qe(o.doubleValue);return s===a?_d(s)===_d(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return Bc(t.arrayValue.values||[],e.arrayValue.values||[],Lr);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(WP(s)!==WP(a))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!Lr(s[l],a[l])))return!1;return!0})(t,e);default:return re(52216,{left:t})}}function Id(t,e){return(t.values||[]).find(n=>Lr(n,e))!==void 0}function zc(t,e){if(t===e)return 0;let n=Ao(t),r=Ao(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=qe(o.integerValue||o.doubleValue),l=qe(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(t,e);case 3:return KP(t.timestampValue,e.timestampValue);case 4:return KP(vd(t),vd(e));case 5:return sw(t.stringValue,e.stringValue);case 6:return(function(o,s){let a=Ai(o),l=Ai(s);return a.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),l=s.split("/");for(let d=0;d<a.length&&d<l.length;d++){let p=ge(a[d],l[d]);if(p!==0)return p}return ge(a.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=ge(qe(o.latitude),qe(s.latitude));return a!==0?a:ge(qe(o.longitude),qe(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return QP(t.arrayValue,e.arrayValue);case 10:return(function(o,s){let a=o.fields||{},l=s.fields||{},d=a[$c]?.arrayValue,p=l[$c]?.arrayValue,v=ge(d?.values?.length||0,p?.values?.length||0);return v!==0?v:QP(d,p)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Mg.mapValue&&s===Mg.mapValue)return 0;if(o===Mg.mapValue)return 1;if(s===Mg.mapValue)return-1;let a=o.fields||{},l=Object.keys(a),d=s.fields||{},p=Object.keys(d);l.sort(),p.sort();for(let v=0;v<l.length&&v<p.length;++v){let S=sw(l[v],p[v]);if(S!==0)return S;let D=zc(a[l[v]],d[p[v]]);if(D!==0)return D}return ge(l.length,p.length)})(t.mapValue,e.mapValue);default:throw re(23264,{he:n})}}function KP(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);let n=Ci(t),r=Ci(e),i=ge(n.seconds,r.seconds);return i!==0?i:ge(n.nanos,r.nanos)}function QP(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=zc(n[i],r[i]);if(o)return o}return ge(n.length,r.length)}function qc(t){return uw(t)}function uw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=Ci(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Ai(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Z.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=uw(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${uw(n.fields[s])}`;return i+"}"})(t.mapValue):re(61005,{value:t})}function Lg(t){switch(Ao(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Cm(t);return e?16+Lg(e):16;case 5:return 2*t.stringValue.length;case 6:return Ai(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Lg(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return No(r.fields,(o,s)=>{i+=o.length+Lg(s)}),i})(t.mapValue);default:throw re(13486,{value:t})}}function lw(t){return!!t&&"integerValue"in t}function MT(t){return!!t&&"arrayValue"in t}function YP(t){return!!t&&"nullValue"in t}function JP(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vg(t){return!!t&&"mapValue"in t}function XN(t){return(t?.mapValue?.fields||{})[PT]?.stringValue===NT}function pd(t){if(t.geoPointValue)return{geoPointValue:B({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:B({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return No(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=pd(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pd(t.arrayValue.values[n]);return e}return B({},t)}function ZN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===JN}var lae={mapValue:{fields:{[PT]:{stringValue:NT},[$c]:{arrayValue:{}}}}};var rn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Vg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pd(n)}setAll(e){let n=on.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=pd(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Vg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Lr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Vg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){No(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(pd(this.value))}};function eM(t){let e=[];return No(t.fields,(n,r)=>{let i=new on([n]);if(Vg(r)){let o=eM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Ln(e)}var ir=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ue.min(),ue.min(),ue.min(),rn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ue.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ue.min(),ue.min(),rn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ue.min(),ue.min(),rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Gs=class{constructor(e,n){this.position=e,this.inclusive=n}};function XP(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=Z.comparator(Z.fromName(s.referenceValue),n.key):r=zc(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function ZP(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Lr(t.position[n],e.position[n]))return!1;return!0}var Ws=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function fH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Qg=class{},ct=class t extends Qg{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new hw(e,n,r):n==="array-contains"?new gw(e,r):n==="in"?new mw(e,r):n==="not-in"?new yw(e,r):n==="array-contains-any"?new _w(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new fw(e,r):new pw(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(zc(n,this.value)):n!==null&&Ao(this.value)===Ao(n)&&this.matchesComparison(zc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},or=class t extends Qg{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new t(e,n)}matches(e){return tM(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function tM(t){return t.op==="and"}function nM(t){return pH(t)&&tM(t)}function pH(t){for(let e of t.filters)if(e instanceof or)return!1;return!0}function dw(t){if(t instanceof ct)return t.field.canonicalString()+t.op.toString()+qc(t.value);if(nM(t))return t.filters.map(e=>dw(e)).join(",");{let e=t.filters.map(n=>dw(n)).join(",");return`${t.op}(${e})`}}function rM(t,e){return t instanceof ct?(function(r,i){return i instanceof ct&&r.op===i.op&&r.field.isEqual(i.field)&&Lr(r.value,i.value)})(t,e):t instanceof or?(function(r,i){return i instanceof or&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&rM(s,i.filters[a]),!0):!1})(t,e):void re(19439)}function iM(t){return t instanceof ct?(function(n){return`${n.field.canonicalString()} ${n.op} ${qc(n.value)}`})(t):t instanceof or?(function(n){return n.op.toString()+" {"+n.getFilters().map(iM).join(" ,")+"}"})(t):"Filter"}var hw=class extends ct{constructor(e,n,r){super(e,n,r),this.key=Z.fromName(r.referenceValue)}matches(e){let n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}},fw=class extends ct{constructor(e,n){super(e,"in",n),this.keys=oM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},pw=class extends ct{constructor(e,n){super(e,"not-in",n),this.keys=oM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function oM(t,e){return(e.arrayValue?.values||[]).map(n=>Z.fromName(n.referenceValue))}var gw=class extends ct{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return MT(n)&&Id(n.arrayValue,this.value)}},mw=class extends ct{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Id(this.value.arrayValue,n)}},yw=class extends ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(Id(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Id(this.value.arrayValue,n)}},_w=class extends ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!MT(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Id(this.value.arrayValue,r))}};var vw=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function eN(t,e=null,n=[],r=[],i=null,o=null,s=null){return new vw(t,e,n,r,i,o,s)}function kT(t){let e=ae(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>dw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),bm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>qc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>qc(r)).join(",")),e.Te=n}return e.Te}function OT(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!fH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!rM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ZP(t.startAt,e.startAt)&&ZP(t.endAt,e.endAt)}function Ew(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Hc=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}};function gH(t,e,n,r,i,o,s,a){return new Hc(t,e,n,r,i,o,s,a)}function Pd(t){return new Hc(t)}function tN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function mH(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function sM(t){return t.collectionGroup!==null}function Uc(t){let e=ae(t);if(e.Ie===null){e.Ie=[];let n=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Tt(on.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Ws(o,r))}),n.has(on.keyField().canonicalString())||e.Ie.push(new Ws(on.keyField(),r))}return e.Ie}function Nr(t){let e=ae(t);return e.Ee||(e.Ee=yH(e,Uc(t))),e.Ee}function yH(t,e){if(t.limitType==="F")return eN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ws(i.field,o)});let n=t.endAt?new Gs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Gs(t.startAt.position,t.startAt.inclusive):null;return eN(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Yg(t,e,n){return new Hc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Am(t,e){return OT(Nr(t),Nr(e))&&t.limitType===e.limitType}function aM(t){return`${kT(Nr(t))}|lt:${t.limitType}`}function Oc(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>iM(i)).join(", ")}]`),bm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>qc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>qc(i)).join(",")),`Target(${r})`})(Nr(t))}; limitType=${t.limitType})`}function Dm(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Z.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of Uc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,l){let d=XP(s,a,l);return s.inclusive?d<=0:d<0})(r.startAt,Uc(r),i)||r.endAt&&!(function(s,a,l){let d=XP(s,a,l);return s.inclusive?d>=0:d>0})(r.endAt,Uc(r),i))})(t,e)}function _H(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function cM(t){return(e,n)=>{let r=!1;for(let i of Uc(t)){let o=vH(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function vH(t,e,n){let r=t.field.isKeyField()?Z.comparator(e.key,n.key):(function(o,s,a){let l=s.data.field(o),d=a.data.field(o);return l!==null&&d!==null?zc(l,d):re(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return re(19790,{direction:t.dir})}}var Di=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){No(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return HN(this.inner)}size(){return this.innerSize}};var EH=new Je(Z.comparator);function Ri(){return EH}var uM=new Je(Z.comparator);function fd(...t){let e=uM;for(let n of t)e=e.insert(n.key,n);return e}function lM(t){let e=uM;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Bs(){return gd()}function dM(){return gd()}function gd(){return new Di(t=>t.toString(),(t,e)=>t.isEqual(e))}var IH=new Je(Z.comparator),wH=new Tt(Z.comparator);function fe(...t){let e=wH;for(let n of t)e=e.add(n);return e}var TH=new Tt(ge);function bH(){return TH}function LT(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_d(e)?"-0":e}}function hM(t){return{integerValue:""+t}}function fM(t,e){return Zq(e)?hM(e):LT(t,e)}var Gc=class{constructor(){this._=void 0}};function SH(t,e,n){return t instanceof Wc?(function(i,o){let s={fields:{[WN]:{stringValue:GN},[QN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Sm(o)&&(o=Cm(o)),o&&(s.fields[KN]=o),{mapValue:s}})(n,e):t instanceof Do?gM(t,e):t instanceof Ks?mM(t,e):(function(i,o){let s=pM(i,o),a=nN(s)+nN(i.Ae);return lw(s)&&lw(i.Ae)?hM(a):LT(i.serializer,a)})(t,e)}function CH(t,e,n){return t instanceof Do?gM(t,e):t instanceof Ks?mM(t,e):n}function pM(t,e){return t instanceof Qs?(function(r){return lw(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Wc=class extends Gc{},Do=class extends Gc{constructor(e){super(),this.elements=e}};function gM(t,e){let n=yM(e);for(let r of t.elements)n.some(i=>Lr(i,r))||n.push(r);return{arrayValue:{values:n}}}var Ks=class extends Gc{constructor(e){super(),this.elements=e}};function mM(t,e){let n=yM(e);for(let r of t.elements)n=n.filter(i=>!Lr(i,r));return{arrayValue:{values:n}}}var Qs=class extends Gc{constructor(e,n){super(),this.serializer=e,this.Ae=n}};function nN(t){return qe(t.integerValue||t.doubleValue)}function yM(t){return MT(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Jg=class{constructor(e,n){this.field=e,this.transform=n}};function AH(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Do&&i instanceof Do||r instanceof Ks&&i instanceof Ks?Bc(r.elements,i.elements,Lr):r instanceof Qs&&i instanceof Qs?Lr(r.Ae,i.Ae):r instanceof Wc&&i instanceof Wc})(t.transform,e.transform)}var Iw=class{constructor(e,n){this.version=e,this.transformResults=n}},Ii=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Fg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Kc=class{};function _M(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new wd(t.key,Ii.none()):new Ys(t.key,t.data,Ii.none());{let n=t.data,r=rn.empty(),i=new Tt(on.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Vr(t.key,r,new Ln(i.toArray()),Ii.none())}}function DH(t,e,n){t instanceof Ys?(function(i,o,s){let a=i.value.clone(),l=iN(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Vr?(function(i,o,s){if(!Fg(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=iN(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(vM(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function md(t,e,n,r){return t instanceof Ys?(function(o,s,a,l){if(!Fg(o.precondition,s))return a;let d=o.value.clone(),p=oN(o.fieldTransforms,l,s);return d.setAll(p),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null})(t,e,n,r):t instanceof Vr?(function(o,s,a,l){if(!Fg(o.precondition,s))return a;let d=oN(o.fieldTransforms,l,s),p=s.data;return p.setAll(vM(o)),p.setAll(d),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))})(t,e,n,r):(function(o,s,a){return Fg(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function RH(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=pM(r.transform,i||null);o!=null&&(n===null&&(n=rn.empty()),n.set(r.field,o))}return n||null}function rN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Bc(r,i,(o,s)=>AH(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ys=class extends Kc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Vr=class extends Kc{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function vM(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function iN(t,e,n){let r=new Map;ke(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,CH(s,a,n[i]))}return r}function oN(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,SH(o,s,e))}return r}var wd=class extends Kc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ww=class extends Kc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Tw=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&DH(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=md(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=md(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=dM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let l=_M(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&Bc(this.mutations,e.mutations,(n,r)=>rN(n,r))&&Bc(this.baseMutations,e.baseMutations,(n,r)=>rN(n,r))}},bw=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ke(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return IH})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var Sw=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Cw=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var st,Ee;function xH(t){switch(t){case F.OK:return re(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return re(15467,{code:t})}}function EM(t){if(t===void 0)return bi("GRPC error has no .code"),F.UNKNOWN;switch(t){case st.OK:return F.OK;case st.CANCELLED:return F.CANCELLED;case st.UNKNOWN:return F.UNKNOWN;case st.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case st.INTERNAL:return F.INTERNAL;case st.UNAVAILABLE:return F.UNAVAILABLE;case st.UNAUTHENTICATED:return F.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case st.NOT_FOUND:return F.NOT_FOUND;case st.ALREADY_EXISTS:return F.ALREADY_EXISTS;case st.PERMISSION_DENIED:return F.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case st.ABORTED:return F.ABORTED;case st.OUT_OF_RANGE:return F.OUT_OF_RANGE;case st.UNIMPLEMENTED:return F.UNIMPLEMENTED;case st.DATA_LOSS:return F.DATA_LOSS;default:return re(39323,{code:t})}}(Ee=st||(st={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";var PH=null;function NH(){return new TextEncoder}var MH=new vi([4294967295,4294967295],0);function sN(t){let e=NH().encode(t),n=new GI;return n.update(e),new Uint8Array(n.digest())}function aN(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new vi([n,r],0),new vi([i,o],0)]}var Aw=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new $s(`Invalid padding: ${n}`);if(r<0)throw new $s(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $s(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new $s(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=vi.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(vi.fromNumber(r)));return i.compare(MH)===1&&(i=new vi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let n=sN(e),[r,i]=aN(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let n=sN(e),[r,i]=aN(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.be(s)}}be(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},$s=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Xg=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Td.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ue.min(),i,new Je(ge),Ri(),fe())}},Td=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,fe(),fe(),fe())}};var jc=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}},Zg=class{constructor(e,n){this.targetId=e,this.Ce=n}},em=class{constructor(e,n,r=xt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},tm=class{constructor(){this.ve=0,this.Fe=cN(),this.Me=xt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=fe(),n=fe(),r=fe();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:re(38017,{changeType:o})}}),new Td(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=cN()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ke(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}},Dw=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ri(),this.He=kg(),this.Je=kg(),this.Ze=new Je(ge)}Xe(e){for(let n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(let n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{let r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:re(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){let n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){let o=i.target;if(Ew(o))if(r===0){let s=new Z(o.path);this.et(n,s,ir.newNoDocument(s,ue.min()))}else ke(r===1,20013,{expectedCount:r});else{let s=this._t(n);if(s!==r){let a=this.ut(e),l=a?this.ct(a,e,s):1;if(l!==0){this.it(n);let d=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}PH?.lt((function(p,v,S,D,P){let O={localCacheCount:p,existenceFilterCount:v.count,databaseId:S.database,projectId:S.projectId},L=v.unchangedNames;return L&&(O.bloomFilter={applied:P===0,hashCount:L?.hashCount??0,bitmapLength:L?.bits?.bitmap?.length??0,padding:L?.bits?.padding??0,mightContain:z=>D?.mightContain(z)??!1}),O})(s,e.Ce,this.Ge.ht(),a,l))}}}}ut(e){let n=e.Ce.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Ai(r).toUint8Array()}catch(l){if(l instanceof Wg)return Si("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Aw(s,i,o)}catch(l){return Si(l instanceof $s?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){let r=this.Ge.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(n,o,null),i++)}),i}Tt(e){let n=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&Ew(a.target)){let l=new Z(a.target.path);this.It(l).has(s)||this.Et(s,l)||this.et(s,l,ir.newNoDocument(l,e))}o.Be&&(n.set(s,o.ke()),o.Ke())}});let r=fe();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{let d=this.ot(l);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Xg(e,n,this.Ze,this.je,r);return this.je=Ri(),this.He=kg(),this.Je=kg(),this.Ze=new Je(ge),i}Ye(e,n){if(!this.rt(e))return;let r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){let n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new tm,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Tt(ge),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Tt(ge),this.He=this.He.insert(e,n)),n}rt(e){let n=this.ot(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}ot(e){let n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new tm),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}};function kg(){return new Je(Z.comparator)}function cN(){return new Je(Z.comparator)}var kH={asc:"ASCENDING",desc:"DESCENDING"},OH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LH={and:"AND",or:"OR"},Rw=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function xw(t,e){return t.useProto3Json||bm(e)?e:{value:e}}function nm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function VH(t,e){return nm(t,e.toTimestamp())}function Mr(t){return ke(!!t,49232),ue.fromTimestamp((function(n){let r=Ci(n);return new rt(r.seconds,r.nanos)})(t))}function VT(t,e){return Pw(t,e).canonicalString()}function Pw(t,e){let n=(function(i){return new He(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function wM(t){let e=He.fromString(t);return ke(AM(e),10190,{key:e.toString()}),e}function Nw(t,e){return VT(t.databaseId,e.path)}function ZI(t,e){let n=wM(e);if(n.get(1)!==t.databaseId.projectId)throw new G(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(bM(n))}function TM(t,e){return VT(t.databaseId,e)}function FH(t){let e=wM(t);return e.length===4?He.emptyPath():bM(e)}function Mw(t){return new He(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function bM(t){return ke(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function uN(t,e,n){return{name:Nw(t,e),fields:n.value.mapValue.fields}}function UH(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:re(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(d,p){return d.useProto3Json?(ke(p===void 0||typeof p=="string",58123),xt.fromBase64String(p||"")):(ke(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),xt.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(d){let p=d.code===void 0?F.UNKNOWN:EM(d.code);return new G(p,d.message||"")})(s);n=new em(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ZI(t,r.document.name),o=Mr(r.document.updateTime),s=r.document.createTime?Mr(r.document.createTime):ue.min(),a=new rn({mapValue:{fields:r.document.fields}}),l=ir.newFoundDocument(i,o,s,a),d=r.targetIds||[],p=r.removedTargetIds||[];n=new jc(d,p,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ZI(t,r.document),o=r.readTime?Mr(r.readTime):ue.min(),s=ir.newNoDocument(i,o),a=r.removedTargetIds||[];n=new jc([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ZI(t,r.document),o=r.removedTargetIds||[];n=new jc([],o,i,null)}else{if(!("filter"in e))return re(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Cw(i,o),a=r.targetId;n=new Zg(a,s)}}return n}function jH(t,e){let n;if(e instanceof Ys)n={update:uN(t,e.key,e.value)};else if(e instanceof wd)n={delete:Nw(t,e.key)};else if(e instanceof Vr)n={update:uN(t,e.key,e.data),updateMask:QH(e.fieldMask)};else{if(!(e instanceof ww))return re(16599,{dt:e.type});n={verify:Nw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof Wc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Do)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ks)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Qs)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw re(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:VH(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:re(27497)})(t,e.precondition)),n}function BH(t,e){return t&&t.length>0?(ke(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?Mr(i.updateTime):Mr(o);return s.isEqual(ue.min())&&(s=Mr(o)),new Iw(s,i.transformResults||[])})(n,e))):[]}function $H(t,e){return{documents:[TM(t,e.path)]}}function zH(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=TM(t,i);let o=(function(d){if(d.length!==0)return CM(or.create(d,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(d){if(d.length!==0)return d.map(p=>(function(S){return{field:Lc(S.field),direction:GH(S.dir)}})(p))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=xw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:n,parent:i}}function qH(t){let e=FH(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ke(r===1,65062);let p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=(function(v){let S=SM(v);return S instanceof or&&nM(S)?S.getFilters():[S]})(n.where));let s=[];n.orderBy&&(s=(function(v){return v.map(S=>(function(P){return new Ws(Vc(P.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(S))})(n.orderBy));let a=null;n.limit&&(a=(function(v){let S;return S=typeof v=="object"?v.value:v,bm(S)?null:S})(n.limit));let l=null;n.startAt&&(l=(function(v){let S=!!v.before,D=v.values||[];return new Gs(D,S)})(n.startAt));let d=null;return n.endAt&&(d=(function(v){let S=!v.before,D=v.values||[];return new Gs(D,S)})(n.endAt)),gH(e,i,s,o,a,"F",l,d)}function HH(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function SM(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Vc(n.unaryFilter.field);return ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Vc(n.unaryFilter.field);return ct.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Vc(n.unaryFilter.field);return ct.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Vc(n.unaryFilter.field);return ct.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return re(61313);default:return re(60726)}})(t):t.fieldFilter!==void 0?(function(n){return ct.create(Vc(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return re(58110);default:return re(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return or.create(n.compositeFilter.filters.map(r=>SM(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return re(1026)}})(n.compositeFilter.op))})(t):re(30097,{filter:t})}function GH(t){return kH[t]}function WH(t){return OH[t]}function KH(t){return LH[t]}function Lc(t){return{fieldPath:t.canonicalString()}}function Vc(t){return on.fromServerFormat(t.fieldPath)}function CM(t){return t instanceof ct?(function(n){if(n.op==="=="){if(JP(n.value))return{unaryFilter:{field:Lc(n.field),op:"IS_NAN"}};if(YP(n.value))return{unaryFilter:{field:Lc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(JP(n.value))return{unaryFilter:{field:Lc(n.field),op:"IS_NOT_NAN"}};if(YP(n.value))return{unaryFilter:{field:Lc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lc(n.field),op:WH(n.op),value:n.value}}})(t):t instanceof or?(function(n){let r=n.getFilters().map(i=>CM(i));return r.length===1?r[0]:{compositeFilter:{op:KH(n.op),filters:r}}})(t):re(54877,{filter:t})}function QH(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function AM(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function DM(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}var bd=class t{constructor(e,n,r,i,o=ue.min(),s=ue.min(),a=xt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var kw=class{constructor(e){this.yt=e}};function RM(t){let e=qH({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yg(e,e.limit,"L"):e}var rm=class{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(qe(e.integerValue));else if("doubleValue"in e){let r=qe(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),_d(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Ci(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Ai(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?ZN(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):XN(e)?this.kt(e.mapValue,n):(this.Kt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Nt(n)):re(19022,{Ut:e})}Ot(e,n){this.Ft(n,25),this.$t(e,n)}$t(e,n){n.xt(e)}Kt(e,n){let r=e.fields||{};this.Ft(n,55);for(let i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){let r=e.fields||{};this.Ft(n,53);let i=$c,o=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(qe(o)),this.Ot(i,n),this.Ct(r[i],n)}qt(e,n){let r=e.values||[];this.Ft(n,50);for(let i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),Z.fromName(e).path.forEach(r=>{this.Ft(n,60),this.$t(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}};rm.Wt=new rm;var Ow=class{constructor(){this.Sn=new Lw}addToCollectionParentIndex(e,n){return this.Sn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Hs.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Hs.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}},Lw=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Tt(He.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Tt(He.comparator)).toArray()}};var dae=new Uint8Array(0);var lN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xM=41943040,On=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};On.DEFAULT_COLLECTION_PERCENTILE=10,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,On.DEFAULT=new On(xM,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),On.DISABLED=new On(-1,0,0);var Sd=class t{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new t(0)}static ar(){return new t(-1)}};var dN="LruGarbageCollector",YH=1048576;function hN([t,e],[n,r]){let i=ge(t,n);return i===0?ge(e,r):i}var Vw=class{constructor(e){this.Pr=e,this.buffer=new Tt(hN),this.Tr=0}Ir(){return++this.Tr}Er(e){let n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();hN(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},Fw=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){q(dN,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>R(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){tu(n)?q(dN,"Ignoring IndexedDB error during garbage collection: ",n):yield eu(n)}yield this.Ar(3e5)}))}},Uw=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(RT.ce);let r=new Vw(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(lN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lN):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,o,s,a,l,d,p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,s=Date.now(),this.nthSequenceNumber(e,i))).next(v=>(r=v,a=Date.now(),this.removeTargets(e,r,n))).next(v=>(o=v,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(d=Date.now(),kc()<=ve.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-p}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(l-a)+`ms
	Removed ${v} documents in `+(d-l)+`ms
Total Duration: ${d-p}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:v})))}};function JH(t,e){return new Uw(t,e)}var jw=class{constructor(){this.changes=new Di(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ir.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Bw=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var $w=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&md(r.mutation,i,Ln.empty(),rt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fe()){let i=Bs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=fd();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Bs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fe()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Ri(),s=gd(),a=(function(){return gd()})();return n.forEach((l,d)=>{let p=r.get(d.key);i.has(d.key)&&(p===void 0||p.mutation instanceof Vr)?o=o.insert(d.key,d):p!==void 0?(s.set(d.key,p.mutation.getFieldMask()),md(p.mutation,d,p.mutation.getFieldMask(),rt.now())):s.set(d.key,Ln.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((d,p)=>s.set(d,p)),n.forEach((d,p)=>a.set(d,new Bw(p,s.get(d)??null))),a))}recalculateAndSaveOverlays(e,n){let r=gd(),i=new Je((s,a)=>s-a),o=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(l=>{let d=n.get(l);if(d===null)return;let p=r.get(l)||Ln.empty();p=a.applyToLocalView(d,p),r.set(l,p);let v=(i.get(a.batchId)||fe()).add(l);i=i.insert(a.batchId,v)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),d=l.key,p=l.value,v=dM();p.forEach(S=>{if(!o.has(S)){let D=_M(n.get(S),r.get(S));D!==null&&v.set(S,D),o=o.add(S)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,v))}return U.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return mH(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):sM(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):U.resolve(Bs()),a=yd,l=o;return s.next(d=>U.forEach(d,(p,v)=>(a<v.largestBatchId&&(a=v.largestBatchId),o.get(p)?U.resolve():this.remoteDocumentCache.getEntry(e,p).next(S=>{l=l.insert(p,S)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,l,d,fe())).next(p=>({batchId:a,changes:lM(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(r=>{let i=fd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=fd();return this.indexManager.getCollectionParents(e,o).next(a=>U.forEach(a,l=>{let d=(function(v,S){return new Hc(S,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(n,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(p=>{p.forEach((v,S)=>{s=s.insert(v,S)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((l,d)=>{let p=d.getKey();s.get(p)===null&&(s=s.insert(p,ir.newInvalidDocument(p)))});let a=fd();return s.forEach((l,d)=>{let p=o.get(l);p!==void 0&&md(p.mutation,d,Ln.empty(),rt.now()),Dm(n,d)&&(a=a.insert(l,d))}),a})}};var zw=class{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return U.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Mr(i.createTime)}})(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(i){return{name:i.name,query:RM(i.bundledQuery),readTime:Mr(i.readTime)}})(n)),U.resolve()}};var qw=class{constructor(){this.overlays=new Je(Z.comparator),this.Lr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Bs();return U.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.bt(e,n,o)}),U.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Lr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Lr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){let i=Bs(),o=n.length+1,s=new Z(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let l=a.getNext().value,d=l.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return U.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Je((d,p)=>d-p),s=this.overlays.getIterator();for(;s.hasNext();){let d=s.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=o.get(d.largestBatchId);p===null&&(p=Bs(),o=o.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}let a=Bs(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((d,p)=>a.set(d,p)),!(a.size()>=i)););return U.resolve(a)}bt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Sw(n,r));let o=this.Lr.get(n);o===void 0&&(o=fe(),this.Lr.set(n,o)),this.Lr.set(n,o.add(r.key))}};var Hw=class{constructor(){this.sessionToken=xt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}};var Cd=class{constructor(){this.kr=new Tt(at.Kr),this.qr=new Tt(at.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){let r=new at(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new at(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){let n=new Z(new He([])),r=new at(n,e),i=new at(n,e+1),o=[];return this.qr.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){let n=new Z(new He([])),r=new at(n,e),i=new at(n,e+1),o=fe();return this.qr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new at(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},at=class{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Z.comparator(e.key,n.key)||ge(e.Hr,n.Hr)}static Ur(e,n){return ge(e.Hr,n.Hr)||Z.comparator(e.key,n.key)}};var Gw=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Tt(at.Kr)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Tw(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Jr=this.Jr.add(new at(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(s)}lookupMutationBatch(e,n){return U.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return U.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?xT:this.Yn-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new at(n,0),i=new at(n,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),U.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Tt(ge);return n.forEach(i=>{let o=new at(i,0),s=new at(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),U.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;Z.isDocumentKey(o)||(o=o.child(""));let s=new at(new Z(o),0),a=new Tt(ge);return this.Jr.forEachWhile(l=>{let d=l.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(l.Hr)),!0)},s),U.resolve(this.Yr(a))}Yr(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ke(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return U.forEach(n.mutations,i=>{let o=new at(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){let r=new at(n,0),i=this.Jr.firstAfterOrEqual(r);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Ww=class{constructor(e){this.ti=e,this.docs=(function(){return new Je(Z.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():ir.newInvalidDocument(n))}getEntries(e,n){let r=Ri();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ir.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Ri(),s=n.path,a=new Z(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:d,value:{document:p}}=l.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||Yq(Qq(p),r)<=0||(i.has(p.key)||Dm(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return U.resolve(o)}getAllFromCollectionGroup(e,n,r,i){re(9500)}ni(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Kw(this)}getSize(e){return U.resolve(this.size)}},Kw=class extends jw{constructor(e){super(),this.Mr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}};var Qw=class{constructor(e){this.persistence=e,this.ri=new Di(n=>kT(n),OT),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.ii=0,this.si=new Cd,this.targetCount=0,this.oi=Sd._r()}forEachTarget(e,n){return this.ri.forEach((r,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),U.resolve()}lr(e){this.ri.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.oi=new Sd(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.lr(n),U.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ri.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ri.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),U.waitFor(o).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){let r=this.ri.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),U.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){let r=this.si.jr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.si.containsKey(n))}};var im=class{constructor(e,n){this._i={},this.overlays={},this.ai=new RT(0),this.ui=!1,this.ui=!0,this.ci=new Hw,this.referenceDelegate=e(this),this.li=new Qw(this),this.indexManager=new Ow,this.remoteDocumentCache=(function(i){return new Ww(i)})(r=>this.referenceDelegate.hi(r)),this.serializer=new kw(n),this.Pi=new zw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new qw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new Gw(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);let i=new Yw(this.ai.next());return this.referenceDelegate.Ti(),r(i).next(o=>this.referenceDelegate.Ii(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return U.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}},Yw=class extends aw{constructor(e){super(),this.currentSequenceNumber=e}},Jw=class t{constructor(e){this.persistence=e,this.Ri=new Cd,this.Ai=null}static Vi(e){return new t(e)}get di(){if(this.Ai)return this.Ai;throw re(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(i=>this.di.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.di.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.di,r=>{let i=Z.fromPath(r);return this.mi(e,i).next(o=>{o||n.removeEntry(i,ue.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return U.or([()=>U.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},om=class t{constructor(e,n){this.persistence=e,this.fi=new Di(r=>eH(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=JH(this,n)}static Vi(e,n){return new t(e,n)}Ti(){}Ii(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){let n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return U.forEach(this.fi,(r,i)=>this.wr(e,r,i).next(o=>o?U.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ni(e,s=>this.wr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,ue.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),U.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Lg(e.data.value)),n}wr(e,n,r){return U.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.fi.get(n);return U.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Xw=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=fe(),i=fe();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var Zw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var eT=class{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return cP()?8:Xq(aP())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.gs(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ps(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Zw;return this.ys(e,n,s).next(a=>{if(o.result=a,this.As)return this.ws(e,n,s,a.size)})}).next(()=>o.result)}ws(e,n,r,i){return r.documentReadCount<this.Vs?(kc()<=ve.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Oc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),U.resolve()):(kc()<=ve.DEBUG&&q("QueryEngine","Query:",Oc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(kc()<=ve.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Oc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nr(n))):U.resolve())}gs(e,n){if(tN(n))return U.resolve(null);let r=Nr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Yg(n,null,"F"),r=Nr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=fe(...o);return this.fs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{let d=this.bs(n,a);return this.Ss(n,d,s,l.readTime)?this.gs(e,Yg(n,null,"F")):this.Ds(e,d,n,l)}))})))}ps(e,n,r,i){return tN(n)||i.isEqual(ue.min())?U.resolve(null):this.fs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ss(n,s,r,i)?U.resolve(null):(kc()<=ve.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Oc(n)),this.Ds(e,s,n,Kq(i,yd)).next(a=>a))})}bs(e,n){let r=new Tt(cM(e));return n.forEach((i,o)=>{Dm(e,o)&&(r=r.add(o))}),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ys(e,n,r){return kc()<=ve.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Oc(n)),this.fs.getDocumentsMatchingQuery(e,n,Hs.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var FT="LocalStore",XH=3e8,tT=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new Je(ge),this.Fs=new Di(o=>kT(o),OT),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $w(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}};function ZH(t,e,n,r){return new tT(t,e,n,r)}function PM(t,e){return R(this,null,function*(){let n=ae(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],l=fe();for(let d of i){s.push(d.batchId);for(let p of d.mutations)l=l.add(p.key)}for(let d of o){a.push(d.batchId);for(let p of d.mutations)l=l.add(p.key)}return n.localDocuments.getDocuments(r,l).next(d=>({Ns:d,removedBatchIds:s,addedBatchIds:a}))})})})}function e9(t,e){let n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.xs.newChangeBuffer({trackRemovals:!0});return(function(a,l,d,p){let v=d.batch,S=v.keys(),D=U.resolve();return S.forEach(P=>{D=D.next(()=>p.getEntry(l,P)).next(O=>{let L=d.docVersions.get(P);ke(L!==null,48541),O.version.compareTo(L)<0&&(v.applyToRemoteDocument(O,d),O.isValidDocument()&&(O.setReadTime(d.commitVersion),p.addEntry(O)))})}),D.next(()=>a.mutationQueue.removeMutationBatch(l,v))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let l=fe();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(l=l.add(a.batch.mutations[d].key));return l})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function NM(t){let e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function t9(t,e){let n=ae(t),r=e.snapshotVersion,i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;let a=[];e.targetChanges.forEach((p,v)=>{let S=i.get(v);if(!S)return;a.push(n.li.removeMatchingKeys(o,p.removedDocuments,v).next(()=>n.li.addMatchingKeys(o,p.addedDocuments,v)));let D=S.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?D=D.withResumeToken(xt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):p.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(p.resumeToken,r)),i=i.insert(v,D),(function(O,L,z){return O.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=XH?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(S,D,p)&&a.push(n.li.updateTargetData(o,D))});let l=Ri(),d=fe();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,p))}),a.push(n9(o,s,e.documentUpdates).next(p=>{l=p.Bs,d=p.Ls})),!r.isEqual(ue.min())){let p=n.li.getLastRemoteSnapshotVersion(o).next(v=>n.li.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(p)}return U.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,d)).next(()=>l)}).then(o=>(n.vs=i,o))}function n9(t,e,n){let r=fe(),i=fe();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Ri();return n.forEach((a,l)=>{let d=o.get(a);l.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ue.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!d.isValidDocument()||l.version.compareTo(d.version)>0||l.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):q(FT,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",l.version)}),{Bs:s,Ls:i}})}function r9(t,e){let n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=xT),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function i9(t,e){let n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.li.getTargetData(r,e).next(o=>o?(i=o,U.resolve(i)):n.li.allocateTargetId(r).next(s=>(i=new bd(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}function nT(t,e,n){return R(this,null,function*(){let r=ae(t),i=r.vs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!tu(s))throw s;q(FT,`Failed to update sequence numbers for target ${e}: ${s}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)})}function fN(t,e,n){let r=ae(t),i=ue.min(),o=fe();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(l,d,p){let v=ae(l),S=v.Fs.get(p);return S!==void 0?U.resolve(v.vs.get(S)):v.li.getTargetData(d,p)})(r,s,Nr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:ue.min(),n?o:fe())).next(a=>(o9(r,_H(e),a),{documents:a,ks:o})))}function o9(t,e,n){let r=t.Ms.get(e)||ue.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Ms.set(e,r)}var sm=class{constructor(){this.activeTargetIds=bH()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var rT=class{constructor(){this.vo=new sm,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new sm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var iT=class{Mo(e){}shutdown(){}};var pN="ConnectivityMonitor",am=class{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){q(pN,"Network connectivity changed: AVAILABLE");for(let e of this.Lo)e(0)}Bo(){q(pN,"Network connectivity changed: UNAVAILABLE");for(let e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Og=null;function oT(){return Og===null?Og=(function(){return 268435456+Math.round(2147483648*Math.random())})():Og++,"0x"+Og.toString(16)}var ew="RestConnection",s9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"},sT=class{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===Kg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=oT(),a=this.Qo(e,n.toUriEncodedString());q(ew,`Sending RPC '${e}' ${s}:`,a,r);let l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(l,i,o);let{host:d}=new URL(a),p=_g(d);return this.zo(e,a,l,r,p).then(v=>(q(ew,`Received RPC '${e}' ${s}: `,v),v),v=>{throw Si(ew,`RPC '${e}' ${s} failed with error: `,v,"url: ",a,"request:",r),v})}jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Xc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Qo(e,n){let r=s9[e],i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}};var aT=class{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}};var jt="WebChannelConnection",hd=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(i){setTimeout(()=>{throw i},0)}})},cm=class t extends sT{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!t.c_){let e=YI();hd(e,QI.STAT_EVENT,n=>{n.stat===Ng.PROXY?q(jt,"STAT_EVENT: detected buffering proxy"):n.stat===Ng.NOPROXY&&q(jt,"STAT_EVENT: detected no buffering proxy")}),t.c_=!0}}zo(e,n,r,i,o){let s=oT();return new Promise((a,l)=>{let d=new WI;d.setWithCredentials(!0),d.listenOnce(KI.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case dd.NO_ERROR:let v=d.getResponseJson();q(jt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(v)),a(v);break;case dd.TIMEOUT:q(jt,`RPC '${e}' ${s} timed out`),l(new G(F.DEADLINE_EXCEEDED,"Request time out"));break;case dd.HTTP_ERROR:let S=d.getStatus();if(q(jt,`RPC '${e}' ${s} failed with status:`,S,"response text:",d.getResponseText()),S>0){let D=d.getResponseJson();Array.isArray(D)&&(D=D[0]);let P=D?.error;if(P&&P.status&&P.message){let O=(function(z){let K=z.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(K)>=0?K:F.UNKNOWN})(P.status);l(new G(O,P.message))}else l(new G(F.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new G(F.UNAVAILABLE,"Connection failed."));break;default:re(9055,{l_:e,streamId:s,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{q(jt,`RPC '${e}' ${s} completed.`)}});let p=JSON.stringify(i);q(jt,`RPC '${e}' ${s} sending request:`,i),d.send(n,"POST",p,r,15)})}T_(e,n,r){let i=oT(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=this.createWebChannelTransport(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Go(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;let d=o.join("");q(jt,`Creating RPC '${e}' stream ${i}: ${d}`,a);let p=s.createWebChannel(d,a);this.I_(p);let v=!1,S=!1,D=new aT({Ho:P=>{S?q(jt,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(v||(q(jt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),v=!0),q(jt,`RPC '${e}' stream ${i} sending:`,P),p.send(P))},Jo:()=>p.close()});return hd(p,Mc.EventType.OPEN,()=>{S||(q(jt,`RPC '${e}' stream ${i} transport opened.`),D.i_())}),hd(p,Mc.EventType.CLOSE,()=>{S||(S=!0,q(jt,`RPC '${e}' stream ${i} transport closed`),D.o_(),this.E_(p))}),hd(p,Mc.EventType.ERROR,P=>{S||(S=!0,Si(jt,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),D.o_(new G(F.UNAVAILABLE,"The operation could not be completed")))}),hd(p,Mc.EventType.MESSAGE,P=>{if(!S){let O=P.data[0];ke(!!O,16349);let L=O,z=L?.error||L[0]?.error;if(z){q(jt,`RPC '${e}' stream ${i} received error:`,z);let K=z.status,ne=(function(be){let T=st[be];if(T!==void 0)return EM(T)})(K),Te=z.message;K==="NOT_FOUND"&&Te.includes("database")&&Te.includes("does not exist")&&Te.includes(this.databaseId.database)&&Si(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),ne===void 0&&(ne=F.INTERNAL,Te="Unknown error status: "+K+" with message "+z.message),S=!0,D.o_(new G(ne,Te)),p.close()}else q(jt,`RPC '${e}' stream ${i} received:`,O),D.__(O)}}),t.u_(),setTimeout(()=>{D.s_()},0),D}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return JI()}};function a9(t){return new cm(t)}function tw(){return typeof document<"u"?document:null}function Nd(t){return new Rw(t,!0)}cm.c_=!1;var um=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();let n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}};var gN="PersistentStream",lm=class{constructor(e,n,r,i,o,s,a,l){this.Ci=e,this.b_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new um(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return R(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}k_(){return R(this,null,function*(){if(this.O_())return this.close(0)})}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){return R(this,null,function*(){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(bi(n.toString()),bi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.t_(n)})}W_(){}auth(){this.state=1;let e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{let i=new G(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){let r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(()=>R(this,null,function*(){this.state=0,this.start()}))}z_(e){return q(gN,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(q(gN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},cT=class extends lm{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();let n=UH(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ue.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ue.min():s.readTime?Mr(s.readTime):ue.min()})(e);return this.listener.J_(n,r)}Z_(e){let n={};n.database=Mw(this.serializer),n.addTarget=(function(o,s){let a,l=s.target;if(a=Ew(l)?{documents:$H(o,l)}:{query:zH(o,l).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=IM(o,s.resumeToken);let d=xw(o,s.expectedCount);d!==null&&(a.expectedCount=d)}else if(s.snapshotVersion.compareTo(ue.min())>0){a.readTime=nm(o,s.snapshotVersion.toTimestamp());let d=xw(o,s.expectedCount);d!==null&&(a.expectedCount=d)}return a})(this.serializer,e);let r=HH(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){let n={};n.database=Mw(this.serializer),n.removeTarget=e,this.K_(n)}},uT=class extends lm{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let n=BH(e.writeResults,e.commitTime),r=Mr(e.commitTime);return this.listener.na(r,n)}ra(){let e={};e.database=Mw(this.serializer),this.K_(e)}ea(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>jH(this.serializer,r))};this.K_(n)}};var lT=class{},dT=class extends lT{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new G(F.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,Pw(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(F.UNKNOWN,o.toString())})}jo(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.jo(e,Pw(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(F.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}};function c9(t,e,n,r){return new dT(t,e,n,r)}var hT=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(bi(n),this.aa=!1):q("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Js="RemoteStore",fT=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo(s=>{r.enqueueAndForget(()=>R(this,null,function*(){ta(this)&&(q(Js,"Restarting streams for network reachability change."),yield(function(l){return R(this,null,function*(){let d=ae(l);d.Ea.add(4),yield Md(d),d.Va.set("Unknown"),d.Ea.delete(4),yield Rm(d)})})(this))}))}),this.Va=new hT(r,i)}};function Rm(t){return R(this,null,function*(){if(ta(t))for(let e of t.Ra)yield e(!0)})}function Md(t){return R(this,null,function*(){for(let e of t.Ra)yield e(!1)})}function MM(t,e){let n=ae(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),$T(n)?BT(n):nu(n).O_()&&jT(n,e))}function UT(t,e){let n=ae(t),r=nu(n);n.Ia.delete(e),r.O_()&&kM(n,e),n.Ia.size===0&&(r.O_()?r.L_():ta(n)&&n.Va.set("Unknown"))}function jT(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}nu(t).Z_(e)}function kM(t,e){t.da.$e(e),nu(t).X_(e)}function BT(t){t.da=new Dw({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),nu(t).start(),t.Va.ua()}function $T(t){return ta(t)&&!nu(t).x_()&&t.Ia.size>0}function ta(t){return ae(t).Ea.size===0}function OM(t){t.da=void 0}function u9(t){return R(this,null,function*(){t.Va.set("Online")})}function l9(t){return R(this,null,function*(){t.Ia.forEach((e,n)=>{jT(t,e)})})}function d9(t,e){return R(this,null,function*(){OM(t),$T(t)?(t.Va.ha(e),BT(t)):t.Va.set("Unknown")})}function h9(t,e,n){return R(this,null,function*(){if(t.Va.set("Online"),e instanceof em&&e.state===2&&e.cause)try{yield(function(i,o){return R(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.da.removeTarget(a))})})(t,e)}catch(r){q(Js,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield dm(t,r)}else if(e instanceof jc?t.da.Xe(e):e instanceof Zg?t.da.st(e):t.da.tt(e),!n.isEqual(ue.min()))try{let r=yield NM(t.localStore);n.compareTo(r)>=0&&(yield(function(o,s){let a=o.da.Tt(s);return a.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){let p=o.Ia.get(d);p&&o.Ia.set(d,p.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,d)=>{let p=o.Ia.get(l);if(!p)return;o.Ia.set(l,p.withResumeToken(xt.EMPTY_BYTE_STRING,p.snapshotVersion)),kM(o,l);let v=new bd(p.target,l,d,p.sequenceNumber);jT(o,v)}),o.remoteSyncer.applyRemoteEvent(a)})(t,n))}catch(r){q(Js,"Failed to raise snapshot:",r),yield dm(t,r)}})}function dm(t,e,n){return R(this,null,function*(){if(!tu(e))throw e;t.Ea.add(1),yield Md(t),t.Va.set("Offline"),n||(n=()=>NM(t.localStore)),t.asyncQueue.enqueueRetryable(()=>R(null,null,function*(){q(Js,"Retrying IndexedDB access"),yield n(),t.Ea.delete(1),yield Rm(t)}))})}function LM(t,e){return e().catch(n=>dm(t,n,e))}function xm(t){return R(this,null,function*(){let e=ae(t),n=Ro(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:xT;for(;f9(e);)try{let i=yield r9(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,p9(e,i)}catch(i){yield dm(e,i)}VM(e)&&FM(e)})}function f9(t){return ta(t)&&t.Ta.length<10}function p9(t,e){t.Ta.push(e);let n=Ro(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function VM(t){return ta(t)&&!Ro(t).x_()&&t.Ta.length>0}function FM(t){Ro(t).start()}function g9(t){return R(this,null,function*(){Ro(t).ra()})}function m9(t){return R(this,null,function*(){let e=Ro(t);for(let n of t.Ta)e.ea(n.mutations)})}function y9(t,e,n){return R(this,null,function*(){let r=t.Ta.shift(),i=bw.from(r,e,n);yield LM(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield xm(t)})}function _9(t,e){return R(this,null,function*(){e&&Ro(t).Y_&&(yield(function(r,i){return R(this,null,function*(){if((function(s){return xH(s)&&s!==F.ABORTED})(i.code)){let o=r.Ta.shift();Ro(r).B_(),yield LM(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield xm(r)}})})(t,e)),VM(t)&&FM(t)})}function mN(t,e){return R(this,null,function*(){let n=ae(t);n.asyncQueue.verifyOperationInProgress(),q(Js,"RemoteStore received new credentials");let r=ta(n);n.Ea.add(3),yield Md(n),r&&n.Va.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),yield Rm(n)})}function v9(t,e){return R(this,null,function*(){let n=ae(t);e?(n.Ea.delete(2),yield Rm(n)):e||(n.Ea.add(2),yield Md(n),n.Va.set("Unknown"))})}function nu(t){return t.ma||(t.ma=(function(n,r,i){let o=ae(n);return o.sa(),new cT(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:u9.bind(null,t),Yo:l9.bind(null,t),t_:d9.bind(null,t),J_:h9.bind(null,t)}),t.Ra.push(e=>R(null,null,function*(){e?(t.ma.B_(),$T(t)?BT(t):t.Va.set("Unknown")):(yield t.ma.stop(),OM(t))}))),t.ma}function Ro(t){return t.fa||(t.fa=(function(n,r,i){let o=ae(n);return o.sa(),new uT(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:g9.bind(null,t),t_:_9.bind(null,t),ta:m9.bind(null,t),na:y9.bind(null,t)}),t.Ra.push(e=>R(null,null,function*(){e?(t.fa.B_(),yield xm(t)):(yield t.fa.stop(),t.Ta.length>0&&(q(Js,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}var pT=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function zT(t,e){if(bi("AsyncQueue",`${e}: ${t}`),tu(t))return new G(F.UNAVAILABLE,`${e}: ${t}`);throw t}var Ad=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Z.comparator(n.key,r.key):(n,r)=>Z.comparator(n.key,r.key),this.keyedMap=fd(),this.sortedSet=new Je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var hm=class{constructor(){this.ga=new Je(Z.comparator)}track(e){let n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):re(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){let e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}},Xs=class t{constructor(e,n,r,i,o,s,a,l,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Ad.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Am(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var gT=class{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}},mT=class{constructor(){this.queries=yN(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){let i=ae(n),o=i.queries;i.queries=yN(),o.forEach((s,a)=>{for(let l of a.ba)l.onError(r)})})(this,new G(F.ABORTED,"Firestore shutting down"))}};function yN(){return new Di(t=>aM(t),Am)}function qT(t,e){return R(this,null,function*(){let n=ae(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.Da()&&(r=2):(o=new gT,r=e.Da()?0:1);try{switch(r){case 0:o.wa=yield n.onListen(i,!0);break;case 1:o.wa=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=zT(s,`Initialization of query '${Oc(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.ba.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&GT(n)})}function HT(t,e){return R(this,null,function*(){let n=ae(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.ba.indexOf(e);s>=0&&(o.ba.splice(s,1),o.ba.length===0?i=e.Da()?0:1:!o.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function E9(t,e){let n=ae(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.ba)a.Fa(i)&&(r=!0);s.wa=i}}r&&GT(n)}function I9(t,e,n){let r=ae(t),i=r.queries.get(e);if(i)for(let o of i.ba)o.onError(n);r.queries.delete(e)}function GT(t){t.Ca.forEach(e=>{e.next()})}var yT,_N;(_N=yT||(yT={})).Ma="default",_N.Cache="cache";var Dd=class{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Xs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;let r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Xs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==yT.Cache}};var fm=class{constructor(e){this.key=e}},pm=class{constructor(e){this.key=e}},_T=class{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=fe(),this.mutatedKeys=fe(),this.eu=cM(e),this.tu=new Ad(this.eu)}get nu(){return this.Za}ru(e,n){let r=n?n.iu:new hm,i=n?n.tu:this.tu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,v)=>{let S=i.get(p),D=Dm(this.query,v)?v:null,P=!!S&&this.mutatedKeys.has(S.key),O=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations),L=!1;S&&D?S.data.isEqual(D.data)?P!==O&&(r.track({type:3,doc:D}),L=!0):this.su(S,D)||(r.track({type:2,doc:D}),L=!0,(l&&this.eu(D,l)>0||d&&this.eu(D,d)<0)&&(a=!0)):!S&&D?(r.track({type:0,doc:D}),L=!0):S&&!D&&(r.track({type:1,doc:S}),L=!0,(l||d)&&(a=!0)),L&&(D?(s=s.add(D),o=O?o.add(p):o.delete(p)):(s=s.delete(p),o=o.delete(p)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let p=this.query.limitType==="F"?s.last():s.first();s=s.delete(p.key),o=o.delete(p.key),r.track({type:1,doc:p})}return{tu:s,iu:r,Ss:a,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((p,v)=>(function(D,P){let O=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re(20277,{Vt:L})}};return O(D)-O(P)})(p.type,v.type)||this.eu(p.doc,v.doc)),this.ou(r),i=i??!1;let a=n&&!i?this._u():[],l=this.Ya.size===0&&this.current&&!i?1:0,d=l!==this.Xa;return this.Xa=l,s.length!==0||d?{snapshot:new Xs(this.query,e.tu,o,s,e.mutatedKeys,l===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new hm,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Ya;this.Ya=fe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});let n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new pm(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new fm(r))}),n}cu(e){this.Za=e.ks,this.Ya=fe();let n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Xs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}},WT="SyncEngine",vT=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},ET=class{constructor(e){this.key=e,this.hu=!1}},IT=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Di(a=>aM(a),Am),this.Iu=new Map,this.Eu=new Set,this.Ru=new Je(Z.comparator),this.Au=new Map,this.Vu=new Cd,this.du={},this.mu=new Map,this.fu=Sd.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function w9(t,e,n=!0){return R(this,null,function*(){let r=qM(t),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=yield UM(r,e,n,!0),i})}function T9(t,e){return R(this,null,function*(){let n=qM(t);yield UM(n,e,!0,!1)})}function UM(t,e,n,r){return R(this,null,function*(){let i=yield i9(t.localStore,Nr(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=yield b9(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&MM(t.remoteStore,i),a})}function b9(t,e,n,r,i){return R(this,null,function*(){t.pu=(v,S,D)=>(function(O,L,z,K){return R(this,null,function*(){let ne=L.view.ru(z);ne.Ss&&(ne=yield fN(O.localStore,L.query,!1).then(({documents:T})=>L.view.ru(T,ne)));let Te=K&&K.targetChanges.get(L.targetId),Xe=K&&K.targetMismatches.get(L.targetId)!=null,be=L.view.applyChanges(ne,O.isPrimaryClient,Te,Xe);return EN(O,L.targetId,be.au),be.snapshot})})(t,v,S,D);let o=yield fN(t.localStore,e,!0),s=new _T(e,o.ks),a=s.ru(o.documents),l=Td.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=s.applyChanges(a,t.isPrimaryClient,l);EN(t,n,d.au);let p=new vT(e,n,s);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot})}function S9(t,e,n){return R(this,null,function*(){let r=ae(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!Am(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield nT(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&UT(r.remoteStore,i.targetId),wT(r,i.targetId)}).catch(eu))):(wT(r,i.targetId),yield nT(r.localStore,i.targetId,!0))})}function C9(t,e){return R(this,null,function*(){let n=ae(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),UT(n.remoteStore,r.targetId))})}function A9(t,e,n){return R(this,null,function*(){let r=k9(t);try{let i=yield(function(s,a){let l=ae(s),d=rt.now(),p=a.reduce((D,P)=>D.add(P.key),fe()),v,S;return l.persistence.runTransaction("Locally write mutations","readwrite",D=>{let P=Ri(),O=fe();return l.xs.getEntries(D,p).next(L=>{P=L,P.forEach((z,K)=>{K.isValidDocument()||(O=O.add(z))})}).next(()=>l.localDocuments.getOverlayedDocuments(D,P)).next(L=>{v=L;let z=[];for(let K of a){let ne=RH(K,v.get(K.key).overlayedDocument);ne!=null&&z.push(new Vr(K.key,ne,eM(ne.value.mapValue),Ii.exists(!0)))}return l.mutationQueue.addMutationBatch(D,d,z,a)}).next(L=>{S=L;let z=L.applyToLocalDocumentSet(v,O);return l.documentOverlayCache.saveOverlays(D,L.batchId,z)})}).then(()=>({batchId:S.batchId,changes:lM(v)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,l){let d=s.du[s.currentUser.toKey()];d||(d=new Je(ge)),d=d.insert(a,l),s.du[s.currentUser.toKey()]=d})(r,i.batchId,n),yield kd(r,i.changes),yield xm(r.remoteStore)}catch(i){let o=zT(i,"Failed to persist write");n.reject(o)}})}function jM(t,e){return R(this,null,function*(){let n=ae(t);try{let r=yield t9(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Au.get(o);s&&(ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?ke(s.hu,14607):i.removedDocuments.size>0&&(ke(s.hu,42227),s.hu=!1))}),yield kd(n,r,e)}catch(r){yield eu(r)}})}function vN(t,e,n){let r=ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let l=ae(s);l.onlineState=a;let d=!1;l.queries.forEach((p,v)=>{for(let S of v.ba)S.va(a)&&(d=!0)}),d&&GT(l)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function D9(t,e,n){return R(this,null,function*(){let r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Je(Z.comparator);s=s.insert(o,ir.newNoDocument(o,ue.min()));let a=fe().add(o),l=new Xg(ue.min(),new Map,new Je(ge),s,a);yield jM(r,l),r.Ru=r.Ru.remove(o),r.Au.delete(e),KT(r)}else yield nT(r.localStore,e,!1).then(()=>wT(r,e,n)).catch(eu)})}function R9(t,e){return R(this,null,function*(){let n=ae(t),r=e.batch.batchId;try{let i=yield e9(n.localStore,e);$M(n,r,null),BM(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield kd(n,i)}catch(i){yield eu(i)}})}function x9(t,e,n){return R(this,null,function*(){let r=ae(t);try{let i=yield(function(s,a){let l=ae(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return l.mutationQueue.lookupMutationBatch(d,a).next(v=>(ke(v!==null,37113),p=v.keys(),l.mutationQueue.removeMutationBatch(d,v))).next(()=>l.mutationQueue.performConsistencyCheck(d)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(d,p,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>l.localDocuments.getDocuments(d,p))})})(r.localStore,e);$M(r,e,n),BM(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield kd(r,i)}catch(i){yield eu(i)}})}function BM(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function $M(t,e,n){let r=ae(t),i=r.du[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function wT(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||zM(t,r)})}function zM(t,e){t.Eu.delete(e.path.canonicalString());let n=t.Ru.get(e);n!==null&&(UT(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),KT(t))}function EN(t,e,n){for(let r of n)r instanceof fm?(t.Vu.addReference(r.key,e),P9(t,r)):r instanceof pm?(q(WT,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||zM(t,r.key)):re(19791,{wu:r})}function P9(t,e){let n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(q(WT,"New document in limbo: "+n),t.Eu.add(r),KT(t))}function KT(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){let e=t.Eu.values().next().value;t.Eu.delete(e);let n=new Z(He.fromString(e)),r=t.fu.next();t.Au.set(r,new ET(n)),t.Ru=t.Ru.insert(n,r),MM(t.remoteStore,new bd(Nr(Pd(n.path)),r,"TargetPurposeLimboResolution",RT.ce))}}function kd(t,e,n){return R(this,null,function*(){let r=ae(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{s.push(r.pu(l,e,n).then(d=>{if((d||n)&&r.isPrimaryClient){let p=d?!d.fromCache:n?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(d){i.push(d);let p=Xw.Es(l.targetId,d);o.push(p)}}))}),yield Promise.all(s),r.Pu.J_(i),yield(function(l,d){return R(this,null,function*(){let p=ae(l);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>U.forEach(d,S=>U.forEach(S.Ts,D=>p.persistence.referenceDelegate.addReference(v,S.targetId,D)).next(()=>U.forEach(S.Is,D=>p.persistence.referenceDelegate.removeReference(v,S.targetId,D)))))}catch(v){if(!tu(v))throw v;q(FT,"Failed to update sequence numbers: "+v)}for(let v of d){let S=v.targetId;if(!v.fromCache){let D=p.vs.get(S),P=D.snapshotVersion,O=D.withLastLimboFreeSnapshotVersion(P);p.vs=p.vs.insert(S,O)}}})})(r.localStore,o))})}function N9(t,e){return R(this,null,function*(){let n=ae(t);if(!n.currentUser.isEqual(e)){q(WT,"User change. New user:",e.toKey());let r=yield PM(n.localStore,e);n.currentUser=e,(function(o,s){o.mu.forEach(a=>{a.forEach(l=>{l.reject(new G(F.CANCELLED,s))})}),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield kd(n,r.Ns)}})}function M9(t,e){let n=ae(t),r=n.Au.get(e);if(r&&r.hu)return fe().add(r.key);{let i=fe(),o=n.Iu.get(e);if(!o)return i;for(let s of o){let a=n.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function qM(t){let e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=jM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=M9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=D9.bind(null,e),e.Pu.J_=E9.bind(null,e.eventManager),e.Pu.yu=I9.bind(null,e.eventManager),e}function k9(t){let e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=R9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=x9.bind(null,e),e}var QT=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return R(this,null,function*(){this.serializer=Nd(n.databaseInfo.databaseId),this.sharedClientState=this.Du(n),this.persistence=this.Cu(n),yield this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Fu(n,this.localStore),this.indexBackfillerScheduler=this.Mu(n,this.localStore)})}Fu(n,r){return null}Mu(n,r){return null}vu(n){return ZH(this.persistence,new eT,n.initialUser,this.serializer)}Cu(n){return new im(Jw.Vi,this.serializer)}Du(n){return new rT}terminate(){return R(this,null,function*(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),gm=class extends QT{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ke(this.persistence.referenceDelegate instanceof om,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Fw(r,e.asyncQueue,n)}Cu(e){let n=this.cacheSizeBytes!==void 0?On.withCacheSize(this.cacheSizeBytes):On.DEFAULT;return new im(r=>om.Vi(r,n),this.serializer)}};var HM=(()=>{class t{initialize(n,r){return R(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>vN(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=N9.bind(null,this.syncEngine),yield v9(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return(function(){return new mT})()}createDatastore(n){let r=Nd(n.databaseInfo.databaseId),i=a9(n.databaseInfo);return c9(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,a,l){return new fT(i,o,s,a,l)})(this.localStore,this.datastore,n.asyncQueue,r=>vN(this.syncEngine,r,0),(function(){return am.v()?new am:new iT})())}createSyncEngine(n,r){return(function(o,s,a,l,d,p,v){let S=new IT(o,s,a,l,d,p);return v&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return R(this,null,function*(){yield(function(r){return R(this,null,function*(){let i=ae(r);q(Js,"RemoteStore shutting down."),i.Ea.add(5),yield Md(i),i.Aa.shutdown(),i.Va.set("Unknown")})})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()})}}return t.provider={build:()=>new t},t})();var Rd=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):bi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var xo="FirestoreClient",TT=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=wt.UNAUTHENTICATED,this.clientId=qs.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>R(this,null,function*(){q(xo,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(q(xo,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>R(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=zT(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function nw(t,e){return R(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),q(xo,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>R(null,null,function*(){r.isEqual(i)||(yield PM(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function IN(t,e){return R(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield O9(t);q(xo,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>mN(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>mN(e.remoteStore,i)),t._onlineComponents=e})}function O9(t){return R(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q(xo,"Using user provided OfflineComponentProvider");try{yield nw(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Si("Error using user provided cache. Falling back to memory cache: "+n),yield nw(t,new QT)}}else q(xo,"Using default OfflineComponentProvider"),yield nw(t,new gm(void 0));return t._offlineComponents})}function GM(t){return R(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(q(xo,"Using user provided OnlineComponentProvider"),yield IN(t,t._uninitializedComponentsProvider._online)):(q(xo,"Using default OnlineComponentProvider"),yield IN(t,new HM))),t._onlineComponents})}function L9(t){return GM(t).then(e=>e.syncEngine)}function mm(t){return R(this,null,function*(){let e=yield GM(t),n=e.eventManager;return n.onListen=w9.bind(null,e.syncEngine),n.onUnlisten=S9.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=T9.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=C9.bind(null,e.syncEngine),n})}function WM(t,e,n,r){let i=new Rd(r),o=new Dd(e,i,n);return t.asyncQueue.enqueueAndForget(()=>R(null,null,function*(){return qT(yield mm(t),o)})),()=>{i.Nu(),t.asyncQueue.enqueueAndForget(()=>R(null,null,function*(){return HT(yield mm(t),o)}))}}function KM(t,e,n={}){let r=new rr;return t.asyncQueue.enqueueAndForget(()=>R(null,null,function*(){return(function(o,s,a,l,d){let p=new Rd({next:S=>{p.Nu(),s.enqueueAndForget(()=>HT(o,v));let D=S.docs.has(a);!D&&S.fromCache?d.reject(new G(F.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&S.fromCache&&l&&l.source==="server"?d.reject(new G(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(S)},error:S=>d.reject(S)}),v=new Dd(Pd(a.path),p,{includeMetadataChanges:!0,Ka:!0});return qT(o,v)})(yield mm(t),t.asyncQueue,e,n,r)})),r.promise}function QM(t,e,n={}){let r=new rr;return t.asyncQueue.enqueueAndForget(()=>R(null,null,function*(){return(function(o,s,a,l,d){let p=new Rd({next:S=>{p.Nu(),s.enqueueAndForget(()=>HT(o,v)),S.fromCache&&l.source==="server"?d.reject(new G(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(S)},error:S=>d.reject(S)}),v=new Dd(a,p,{includeMetadataChanges:!0,Ka:!0});return qT(o,v)})(yield mm(t),t.asyncQueue,e,n,r)})),r.promise}function YM(t,e){let n=new rr;return t.asyncQueue.enqueueAndForget(()=>R(null,null,function*(){return A9(yield L9(t),e,n)})),n.promise}function JM(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var V9="ComponentProvider",wN=new Map;function F9(t,e,n,r,i){return new cw(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,JM(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}var XM="firestore.googleapis.com",TN=!0,ym=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new G(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XM,this.ssl=TN}else this.host=e.host,this.ssl=e.ssl??TN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xM;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<YH)throw new G(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JM(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Qc=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ym({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ym(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new jg;switch(r.type){case"firstParty":return new ow(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return R(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=wN.get(n);r&&(q(V9,"Removing Datastore"),wN.delete(n),r.terminate())})(this),Promise.resolve()}};function ZM(t,e,n,r={}){t=sn(t,Qc);let i=_g(e),o=t._getSettings(),s=_e(B({},o),{emulatorOptions:t._getEmulatorOptions()}),a=`${e}:${n}`;i&&(iP(`https://${a}`),sP("Firestore",!0)),o.host!==XM&&o.host!==a&&Si("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=_e(B({},o),{host:a,ssl:i,emulatorOptions:r});if(!To(l,s)&&(t._setSettings(l),r.mockUserToken)){let d,p;if(typeof r.mockUserToken=="string")d=r.mockUserToken,p=wt.MOCK_USER;else{d=oP(r.mockUserToken,t._app?.options.projectId);let v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new G(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new wt(v)}t._authCredentials=new rw(new Ug(d,p))}}var Zs=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},ut=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Zc(n,t._jsonSchema))return new t(e,r||null,new Z(He.fromString(n.referencePath)))}};ut._jsonSchemaVersion="firestore/documentReference/1.0",ut._jsonSchema={type:nt("string",ut._jsonSchemaVersion),referencePath:nt("string")};var wi=class t extends Zs{constructor(e,n,r){super(e,n,Pd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ut(this.firestore,null,new Z(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Mo(t,e,...n){if(t=tr(t),DN("collection","path",e),t instanceof Qc){let r=He.fromString(e,...n);return zP(r),new wi(t,null,r)}{if(!(t instanceof ut||t instanceof wi))throw new G(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(He.fromString(e,...n));return zP(r),new wi(t.firestore,null,r)}}function ko(t,e,...n){if(t=tr(t),arguments.length===1&&(e=qs.newId()),DN("doc","path",e),t instanceof Qc){let r=He.fromString(e,...n);return $P(r),new ut(t,null,new Z(r))}{if(!(t instanceof ut||t instanceof wi))throw new G(F.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(He.fromString(e,...n));return $P(r),new ut(t.firestore,t instanceof wi?t.converter:null,new Z(r))}}var bN="AsyncQueue",_m=class{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new um(this,"async_queue_retry"),this._c=()=>{let r=tw();r&&q(bN,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let n=tw();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let n=tw();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let n=new rr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}lc(){return R(this,null,function*(){if(this.Yu.length!==0){try{yield this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!tu(e))throw e;q(bN,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}})}cc(e){let n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,bi("INTERNAL UNHANDLED ERROR: ",SN(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);let i=pT.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&re(47125,{Pc:SN(this.nc)})}verifyOperationInProgress(){}Tc(){return R(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(let n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){let n=this.tc.indexOf(e);this.tc.splice(n,1)}};function SN(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var sr=class extends Qc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new _m,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return R(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new _m(e),this._firestoreClient=void 0,yield e}})}};function Vn(t,e){let n=typeof t=="object"?t:wn(),r=typeof t=="string"?t:e||Kg,i=gP(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=rP("firestore");o&&ZM(i,...o)}return i}function ru(t){if(t._terminated)throw new G(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||U9(t),t._firestoreClient}function U9(t){let e=t._freezeSettings(),n=F9(t._databaseId,t._app?.options.appId||"",t._persistenceKey,t._app?.options.apiKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new TT(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(t._componentsProvider))}var kr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(xt.fromBase64String(e))}catch(n){throw new G(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zc(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};kr._jsonSchemaVersion="firestore/bytes/1.0",kr._jsonSchema={type:nt("string",kr._jsonSchemaVersion),bytes:nt("string")};var ea=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Po=class{constructor(e){this._methodName=e}};var Ti=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(Zc(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Ti._jsonSchemaVersion="firestore/geoPoint/1.0",Ti._jsonSchema={type:nt("string",Ti._jsonSchemaVersion),latitude:nt("number"),longitude:nt("number")};var Or=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zc(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new G(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Or._jsonSchemaVersion="firestore/vectorValue/1.0",Or._jsonSchema={type:nt("string",Or._jsonSchemaVersion),vectorValues:nt("object")};var j9=/^__.*__$/,bT=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Vr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ys(e,this.data,n,this.fieldTransforms)}},vm=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Vr(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function ek(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re(40011,{dataSource:t})}}var Em=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new t(B(B({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){let n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){let n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return wm(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(ek(this.dataSource)&&j9.test(e))throw this.createError('Document fields cannot begin and end with "__"')}},ST=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Nd(e)}createContext(e,n,r,i=!1){return new Em({dataSource:e,methodName:n,targetDoc:r,path:on.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function YT(t){let e=t._freezeSettings(),n=Nd(t._databaseId);return new ST(t._databaseId,!!e.ignoreUndefinedProperties,n)}function tk(t,e,n,r,i,o={}){let s=t.createContext(o.merge||o.mergeFields?2:0,e,n,i);JT("Data must be an object, but it was:",s,r);let a=ik(r,s),l,d;if(o.merge)l=new Ln(s.fieldMask),d=s.fieldTransforms;else if(o.mergeFields){let p=[];for(let v of o.mergeFields){let S=Yc(e,v,n);if(!s.contains(S))throw new G(F.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);sk(p,S)||p.push(S)}l=new Ln(p),d=s.fieldTransforms.filter(v=>l.covers(v.field))}else l=null,d=s.fieldTransforms;return new bT(new rn(a),l,d)}var Im=class t extends Po{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function B9(t,e,n){return new Em({dataSource:3,targetDoc:e.settings.targetDoc,methodName:t._methodName,arrayElement:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var CT=class t extends Po{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){let n=B9(this,e,!0),r=this.Ac.map(o=>Od(o,n)),i=new Do(r);return new Jg(e.path,i)}isEqual(e){return e instanceof t&&To(this.Ac,e.Ac)}};var AT=class t extends Po{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){let n=new Qs(e.serializer,fM(e.serializer,this.Vc));return new Jg(e.path,n)}isEqual(e){return e instanceof t&&this.Vc===e.Vc}};function nk(t,e,n,r){let i=t.createContext(1,e,n);JT("Data must be an object, but it was:",i,r);let o=[],s=rn.empty();No(r,(l,d)=>{let p=XT(e,l,n);d=tr(d);let v=i.childContextForFieldPath(p);if(d instanceof Im)o.push(p);else{let S=Od(d,v);S!=null&&(o.push(p),s.set(p,S))}});let a=new Ln(o);return new vm(s,a,i.fieldTransforms)}function rk(t,e,n,r,i,o){let s=t.createContext(1,e,n),a=[Yc(e,r,n)],l=[i];if(o.length%2!=0)throw new G(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<o.length;S+=2)a.push(Yc(e,o[S])),l.push(o[S+1]);let d=[],p=rn.empty();for(let S=a.length-1;S>=0;--S)if(!sk(d,a[S])){let D=a[S],P=l[S];P=tr(P);let O=s.childContextForFieldPath(D);if(P instanceof Im)d.push(D);else{let L=Od(P,O);L!=null&&(d.push(D),p.set(D,L))}}let v=new Ln(d);return new vm(p,v,s.fieldTransforms)}function Od(t,e){if(ok(t=tr(t)))return JT("Unsupported field value:",e,t),ik(t,e);if(t instanceof Po)return(function(r,i){if(!ek(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let l=Od(a,i.childContextForArray(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=tr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return fM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=rt.fromDate(r);return{timestampValue:nm(i.serializer,o)}}if(r instanceof rt){let o=new rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nm(i.serializer,o)}}if(r instanceof Ti)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof kr)return{bytesValue:IM(i.serializer,r._byteString)};if(r instanceof ut){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.createError(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:VT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Or)return(function(s,a){let l=s instanceof Or?s.toArray():s;return{mapValue:{fields:{[PT]:{stringValue:NT},[$c]:{arrayValue:{values:l.map(p=>{if(typeof p!="number")throw a.createError("VectorValues must only contain numeric values.");return LT(a.serializer,p)})}}}}}})(r,i);if(DM(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${Tm(r)}`)})(t,e)}function ik(t,e){let n={};return HN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):No(t,(r,i)=>{let o=Od(i,e.childContextForField(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function ok(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof rt||t instanceof Ti||t instanceof kr||t instanceof ut||t instanceof Po||t instanceof Or||DM(t))}function JT(t,e,n){if(!ok(n)||!xN(n)){let r=Tm(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Yc(t,e,n){if((e=tr(e))instanceof ea)return e._internalPath;if(typeof e=="string")return XT(t,e);throw wm("Field path arguments must be of type string or ",t,!1,void 0,n)}var $9=new RegExp("[~\\*/\\[\\]]");function XT(t,e,n){if(e.search($9)>=0)throw wm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ea(...e.split("."))._internalPath}catch(r){throw wm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function wm(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new G(F.INVALID_ARGUMENT,a+t+l)}function sk(t,e){return t.some(n=>n.isEqual(e))}var xd=class{convertValue(e,n="none"){switch(Ao(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return No(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){let n=e.fields?.[$c].arrayValue?.values?.map(r=>qe(r.doubleValue));return new Or(n)}convertGeoPoint(e){return new Ti(qe(e.latitude),qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Cm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(vd(e));default:return null}}convertTimestamp(e){let n=Ci(e);return new rt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=He.fromString(e);ke(AM(r),9688,{name:e});let i=new Ed(r.get(1),r.get(3)),o=new Z(r.popFirst(5));return i.isEqual(n)||bi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};var Jc=class extends xd{constructor(e){super(),this.firestore=e}convertBytes(e){return new kr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ut(this.firestore,null,n)}};function ZT(...t){return new CT("arrayUnion",t)}function eb(t){return new AT("increment",t)}var ak="@firebase/firestore",ck="4.11.0";function uk(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}var Pm=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new tb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){let n=this._document.data.field(Yc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},tb=class extends Pm{data(){return super.data()}};function lk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function G9(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var na=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ra=class t extends Pm{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new iu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Yc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};ra._jsonSchemaVersion="firestore/documentSnapshot/1.0",ra._jsonSchema={type:nt("string",ra._jsonSchemaVersion),bundleSource:nt("string","DocumentSnapshot"),bundleName:nt("string"),bundle:nt("string")};var iu=class extends ra{data(e={}){return super.data(e)}},ia=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new na(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new iu(this._firestore,this._userDataWriter,r.key,r,new na(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let l=new iu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new na(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let l=new iu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new na(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,p=-1;return a.type!==0&&(d=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),p=s.indexOf(a.doc.key)),{type:W9(a.type),doc:l,oldIndex:d,newIndex:p}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qs.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function W9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re(61501,{type:t})}}ia._jsonSchemaVersion="firestore/querySnapshot/1.0",ia._jsonSchema={type:nt("string",ia._jsonSchemaVersion),bundleSource:nt("string","QuerySnapshot"),bundleName:nt("string"),bundle:nt("string")};function Nm(t){t=sn(t,ut);let e=sn(t.firestore,sr),n=ru(e);return KM(n,t._key).then(r=>hk(e,t,r))}function nb(t){t=sn(t,Zs);let e=sn(t.firestore,sr),n=ru(e),r=new Jc(e);return lk(t._query),QM(n,t._query).then(i=>new ia(e,r,t,i))}function Ld(t,e,n){t=sn(t,ut);let r=sn(t.firestore,sr),i=G9(t.converter,e,n),o=YT(r);return dk(r,[tk(o,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ii.none())])}function rb(t,e,n,...r){t=sn(t,ut);let i=sn(t.firestore,sr),o=YT(i),s;return s=typeof(e=tr(e))=="string"||e instanceof ea?rk(o,"updateDoc",t._key,e,n,r):nk(o,"updateDoc",t._key,e),dk(i,[s.toMutation(t._key,Ii.exists(!0))])}function Vd(t,...e){t=tr(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||uk(e[r])||(n=e[r++]);let i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(uk(e[r])){let d=e[r];e[r]=d.next?.bind(d),e[r+1]=d.error?.bind(d),e[r+2]=d.complete?.bind(d)}let o,s,a;if(t instanceof ut)s=sn(t.firestore,sr),a=Pd(t._key.path),o={next:d=>{e[r]&&e[r](hk(s,t,d))},error:e[r+1],complete:e[r+2]};else{let d=sn(t,Zs);s=sn(d.firestore,sr),a=d._query;let p=new Jc(s);o={next:v=>{e[r]&&e[r](new ia(s,p,d,v))},error:e[r+1],complete:e[r+2]},lk(t._query)}let l=ru(s);return WM(l,a,i,o)}function dk(t,e){let n=ru(t);return YM(n,e)}function hk(t,e,n){let r=n.docs.get(e._key),i=new Jc(t);return new ra(t,i,e._key,r,new na(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){CN(yP),id(new yi("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new sr(new Bg(r.getProvider("auth-internal")),new zg(s,r.getProvider("app-check-internal")),YN(s,i),s);return o=B({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),So(ak,ck,e),So(ak,ck,"esm2020")})();var fk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pk={};var ib,gk;(function(){var t;function e(T,y){function E(){}E.prototype=y.prototype,T.D=y.prototype,T.prototype=new E,T.prototype.constructor=T,T.C=function(w,I,A){for(var _=Array(arguments.length-2),je=2;je<arguments.length;je++)_[je-2]=arguments[je];return y.prototype[I].apply(w,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,y,E){E||(E=0);var w=Array(16);if(typeof y=="string")for(var I=0;16>I;++I)w[I]=y.charCodeAt(E++)|y.charCodeAt(E++)<<8|y.charCodeAt(E++)<<16|y.charCodeAt(E++)<<24;else for(I=0;16>I;++I)w[I]=y[E++]|y[E++]<<8|y[E++]<<16|y[E++]<<24;y=T.g[0],E=T.g[1],I=T.g[2];var A=T.g[3],_=y+(A^E&(I^A))+w[0]+3614090360&4294967295;y=E+(_<<7&4294967295|_>>>25),_=A+(I^y&(E^I))+w[1]+3905402710&4294967295,A=y+(_<<12&4294967295|_>>>20),_=I+(E^A&(y^E))+w[2]+606105819&4294967295,I=A+(_<<17&4294967295|_>>>15),_=E+(y^I&(A^y))+w[3]+3250441966&4294967295,E=I+(_<<22&4294967295|_>>>10),_=y+(A^E&(I^A))+w[4]+4118548399&4294967295,y=E+(_<<7&4294967295|_>>>25),_=A+(I^y&(E^I))+w[5]+1200080426&4294967295,A=y+(_<<12&4294967295|_>>>20),_=I+(E^A&(y^E))+w[6]+2821735955&4294967295,I=A+(_<<17&4294967295|_>>>15),_=E+(y^I&(A^y))+w[7]+4249261313&4294967295,E=I+(_<<22&4294967295|_>>>10),_=y+(A^E&(I^A))+w[8]+1770035416&4294967295,y=E+(_<<7&4294967295|_>>>25),_=A+(I^y&(E^I))+w[9]+2336552879&4294967295,A=y+(_<<12&4294967295|_>>>20),_=I+(E^A&(y^E))+w[10]+4294925233&4294967295,I=A+(_<<17&4294967295|_>>>15),_=E+(y^I&(A^y))+w[11]+2304563134&4294967295,E=I+(_<<22&4294967295|_>>>10),_=y+(A^E&(I^A))+w[12]+1804603682&4294967295,y=E+(_<<7&4294967295|_>>>25),_=A+(I^y&(E^I))+w[13]+4254626195&4294967295,A=y+(_<<12&4294967295|_>>>20),_=I+(E^A&(y^E))+w[14]+2792965006&4294967295,I=A+(_<<17&4294967295|_>>>15),_=E+(y^I&(A^y))+w[15]+1236535329&4294967295,E=I+(_<<22&4294967295|_>>>10),_=y+(I^A&(E^I))+w[1]+4129170786&4294967295,y=E+(_<<5&4294967295|_>>>27),_=A+(E^I&(y^E))+w[6]+3225465664&4294967295,A=y+(_<<9&4294967295|_>>>23),_=I+(y^E&(A^y))+w[11]+643717713&4294967295,I=A+(_<<14&4294967295|_>>>18),_=E+(A^y&(I^A))+w[0]+3921069994&4294967295,E=I+(_<<20&4294967295|_>>>12),_=y+(I^A&(E^I))+w[5]+3593408605&4294967295,y=E+(_<<5&4294967295|_>>>27),_=A+(E^I&(y^E))+w[10]+38016083&4294967295,A=y+(_<<9&4294967295|_>>>23),_=I+(y^E&(A^y))+w[15]+3634488961&4294967295,I=A+(_<<14&4294967295|_>>>18),_=E+(A^y&(I^A))+w[4]+3889429448&4294967295,E=I+(_<<20&4294967295|_>>>12),_=y+(I^A&(E^I))+w[9]+568446438&4294967295,y=E+(_<<5&4294967295|_>>>27),_=A+(E^I&(y^E))+w[14]+3275163606&4294967295,A=y+(_<<9&4294967295|_>>>23),_=I+(y^E&(A^y))+w[3]+4107603335&4294967295,I=A+(_<<14&4294967295|_>>>18),_=E+(A^y&(I^A))+w[8]+1163531501&4294967295,E=I+(_<<20&4294967295|_>>>12),_=y+(I^A&(E^I))+w[13]+2850285829&4294967295,y=E+(_<<5&4294967295|_>>>27),_=A+(E^I&(y^E))+w[2]+4243563512&4294967295,A=y+(_<<9&4294967295|_>>>23),_=I+(y^E&(A^y))+w[7]+1735328473&4294967295,I=A+(_<<14&4294967295|_>>>18),_=E+(A^y&(I^A))+w[12]+2368359562&4294967295,E=I+(_<<20&4294967295|_>>>12),_=y+(E^I^A)+w[5]+4294588738&4294967295,y=E+(_<<4&4294967295|_>>>28),_=A+(y^E^I)+w[8]+2272392833&4294967295,A=y+(_<<11&4294967295|_>>>21),_=I+(A^y^E)+w[11]+1839030562&4294967295,I=A+(_<<16&4294967295|_>>>16),_=E+(I^A^y)+w[14]+4259657740&4294967295,E=I+(_<<23&4294967295|_>>>9),_=y+(E^I^A)+w[1]+2763975236&4294967295,y=E+(_<<4&4294967295|_>>>28),_=A+(y^E^I)+w[4]+1272893353&4294967295,A=y+(_<<11&4294967295|_>>>21),_=I+(A^y^E)+w[7]+4139469664&4294967295,I=A+(_<<16&4294967295|_>>>16),_=E+(I^A^y)+w[10]+3200236656&4294967295,E=I+(_<<23&4294967295|_>>>9),_=y+(E^I^A)+w[13]+681279174&4294967295,y=E+(_<<4&4294967295|_>>>28),_=A+(y^E^I)+w[0]+3936430074&4294967295,A=y+(_<<11&4294967295|_>>>21),_=I+(A^y^E)+w[3]+3572445317&4294967295,I=A+(_<<16&4294967295|_>>>16),_=E+(I^A^y)+w[6]+76029189&4294967295,E=I+(_<<23&4294967295|_>>>9),_=y+(E^I^A)+w[9]+3654602809&4294967295,y=E+(_<<4&4294967295|_>>>28),_=A+(y^E^I)+w[12]+3873151461&4294967295,A=y+(_<<11&4294967295|_>>>21),_=I+(A^y^E)+w[15]+530742520&4294967295,I=A+(_<<16&4294967295|_>>>16),_=E+(I^A^y)+w[2]+3299628645&4294967295,E=I+(_<<23&4294967295|_>>>9),_=y+(I^(E|~A))+w[0]+4096336452&4294967295,y=E+(_<<6&4294967295|_>>>26),_=A+(E^(y|~I))+w[7]+1126891415&4294967295,A=y+(_<<10&4294967295|_>>>22),_=I+(y^(A|~E))+w[14]+2878612391&4294967295,I=A+(_<<15&4294967295|_>>>17),_=E+(A^(I|~y))+w[5]+4237533241&4294967295,E=I+(_<<21&4294967295|_>>>11),_=y+(I^(E|~A))+w[12]+1700485571&4294967295,y=E+(_<<6&4294967295|_>>>26),_=A+(E^(y|~I))+w[3]+2399980690&4294967295,A=y+(_<<10&4294967295|_>>>22),_=I+(y^(A|~E))+w[10]+4293915773&4294967295,I=A+(_<<15&4294967295|_>>>17),_=E+(A^(I|~y))+w[1]+2240044497&4294967295,E=I+(_<<21&4294967295|_>>>11),_=y+(I^(E|~A))+w[8]+1873313359&4294967295,y=E+(_<<6&4294967295|_>>>26),_=A+(E^(y|~I))+w[15]+4264355552&4294967295,A=y+(_<<10&4294967295|_>>>22),_=I+(y^(A|~E))+w[6]+2734768916&4294967295,I=A+(_<<15&4294967295|_>>>17),_=E+(A^(I|~y))+w[13]+1309151649&4294967295,E=I+(_<<21&4294967295|_>>>11),_=y+(I^(E|~A))+w[4]+4149444226&4294967295,y=E+(_<<6&4294967295|_>>>26),_=A+(E^(y|~I))+w[11]+3174756917&4294967295,A=y+(_<<10&4294967295|_>>>22),_=I+(y^(A|~E))+w[2]+718787259&4294967295,I=A+(_<<15&4294967295|_>>>17),_=E+(A^(I|~y))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+y&4294967295,T.g[1]=T.g[1]+(I+(_<<21&4294967295|_>>>11))&4294967295,T.g[2]=T.g[2]+I&4294967295,T.g[3]=T.g[3]+A&4294967295}r.prototype.u=function(T,y){y===void 0&&(y=T.length);for(var E=y-this.blockSize,w=this.B,I=this.h,A=0;A<y;){if(I==0)for(;A<=E;)i(this,T,A),A+=this.blockSize;if(typeof T=="string"){for(;A<y;)if(w[I++]=T.charCodeAt(A++),I==this.blockSize){i(this,w),I=0;break}}else for(;A<y;)if(w[I++]=T[A++],I==this.blockSize){i(this,w),I=0;break}}this.h=I,this.o+=y},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var y=1;y<T.length-8;++y)T[y]=0;var E=8*this.o;for(y=T.length-8;y<T.length;++y)T[y]=E&255,E/=256;for(this.u(T),T=Array(16),y=E=0;4>y;++y)for(var w=0;32>w;w+=8)T[E++]=this.g[y]>>>w&255;return T};function o(T,y){var E=a;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=y(T)}function s(T,y){this.h=y;for(var E=[],w=!0,I=T.length-1;0<=I;I--){var A=T[I]|0;w&&A==y||(E[I]=A,w=!1)}this.g=E}var a={};function l(T){return-128<=T&&128>T?o(T,function(y){return new s([y|0],0>y?-1:0)}):new s([T|0],0>T?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return v;if(0>T)return L(d(-T));for(var y=[],E=1,w=0;T>=E;w++)y[w]=T/E|0,E*=4294967296;return new s(y,0)}function p(T,y){if(T.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(T.charAt(0)=="-")return L(p(T.substring(1),y));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=d(Math.pow(y,8)),w=v,I=0;I<T.length;I+=8){var A=Math.min(8,T.length-I),_=parseInt(T.substring(I,I+A),y);8>A?(A=d(Math.pow(y,A)),w=w.j(A).add(d(_))):(w=w.j(E),w=w.add(d(_)))}return w}var v=l(0),S=l(1),D=l(16777216);t=s.prototype,t.m=function(){if(O(this))return-L(this).m();for(var T=0,y=1,E=0;E<this.g.length;E++){var w=this.i(E);T+=(0<=w?w:4294967296+w)*y,y*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(P(this))return"0";if(O(this))return"-"+L(this).toString(T);for(var y=d(Math.pow(T,6)),E=this,w="";;){var I=Te(E,y).g;E=z(E,I.j(y));var A=((0<E.g.length?E.g[0]:E.h)>>>0).toString(T);if(E=I,P(E))return A+w;for(;6>A.length;)A="0"+A;w=A+w}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function P(T){if(T.h!=0)return!1;for(var y=0;y<T.g.length;y++)if(T.g[y]!=0)return!1;return!0}function O(T){return T.h==-1}t.l=function(T){return T=z(this,T),O(T)?-1:P(T)?0:1};function L(T){for(var y=T.g.length,E=[],w=0;w<y;w++)E[w]=~T.g[w];return new s(E,~T.h).add(S)}t.abs=function(){return O(this)?L(this):this},t.add=function(T){for(var y=Math.max(this.g.length,T.g.length),E=[],w=0,I=0;I<=y;I++){var A=w+(this.i(I)&65535)+(T.i(I)&65535),_=(A>>>16)+(this.i(I)>>>16)+(T.i(I)>>>16);w=_>>>16,A&=65535,_&=65535,E[I]=_<<16|A}return new s(E,E[E.length-1]&-2147483648?-1:0)};function z(T,y){return T.add(L(y))}t.j=function(T){if(P(this)||P(T))return v;if(O(this))return O(T)?L(this).j(L(T)):L(L(this).j(T));if(O(T))return L(this.j(L(T)));if(0>this.l(D)&&0>T.l(D))return d(this.m()*T.m());for(var y=this.g.length+T.g.length,E=[],w=0;w<2*y;w++)E[w]=0;for(w=0;w<this.g.length;w++)for(var I=0;I<T.g.length;I++){var A=this.i(w)>>>16,_=this.i(w)&65535,je=T.i(I)>>>16,Wt=T.i(I)&65535;E[2*w+2*I]+=_*Wt,K(E,2*w+2*I),E[2*w+2*I+1]+=A*Wt,K(E,2*w+2*I+1),E[2*w+2*I+1]+=_*je,K(E,2*w+2*I+1),E[2*w+2*I+2]+=A*je,K(E,2*w+2*I+2)}for(w=0;w<y;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=y;w<2*y;w++)E[w]=0;return new s(E,0)};function K(T,y){for(;(T[y]&65535)!=T[y];)T[y+1]+=T[y]>>>16,T[y]&=65535,y++}function ne(T,y){this.g=T,this.h=y}function Te(T,y){if(P(y))throw Error("division by zero");if(P(T))return new ne(v,v);if(O(T))return y=Te(L(T),y),new ne(L(y.g),L(y.h));if(O(y))return y=Te(T,L(y)),new ne(L(y.g),y.h);if(30<T.g.length){if(O(T)||O(y))throw Error("slowDivide_ only works with positive integers.");for(var E=S,w=y;0>=w.l(T);)E=Xe(E),w=Xe(w);var I=be(E,1),A=be(w,1);for(w=be(w,2),E=be(E,2);!P(w);){var _=A.add(w);0>=_.l(T)&&(I=I.add(E),A=_),w=be(w,1),E=be(E,1)}return y=z(T,I.j(y)),new ne(I,y)}for(I=v;0<=T.l(y);){for(E=Math.max(1,Math.floor(T.m()/y.m())),w=Math.ceil(Math.log(E)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),A=d(E),_=A.j(y);O(_)||0<_.l(T);)E-=w,A=d(E),_=A.j(y);P(A)&&(A=S),I=I.add(A),T=z(T,_)}return new ne(I,T)}t.A=function(T){return Te(this,T).h},t.and=function(T){for(var y=Math.max(this.g.length,T.g.length),E=[],w=0;w<y;w++)E[w]=this.i(w)&T.i(w);return new s(E,this.h&T.h)},t.or=function(T){for(var y=Math.max(this.g.length,T.g.length),E=[],w=0;w<y;w++)E[w]=this.i(w)|T.i(w);return new s(E,this.h|T.h)},t.xor=function(T){for(var y=Math.max(this.g.length,T.g.length),E=[],w=0;w<y;w++)E[w]=this.i(w)^T.i(w);return new s(E,this.h^T.h)};function Xe(T){for(var y=T.g.length+1,E=[],w=0;w<y;w++)E[w]=T.i(w)<<1|T.i(w-1)>>>31;return new s(E,T.h)}function be(T,y){var E=y>>5;y%=32;for(var w=T.g.length-E,I=[],A=0;A<w;A++)I[A]=0<y?T.i(A+E)>>>y|T.i(A+E+1)<<32-y:T.i(A+E);return new s(I,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,gk=pk.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=p,ib=pk.Integer=s}).apply(typeof fk<"u"?fk:typeof self<"u"?self:typeof window<"u"?window:{});var Mm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xi={};var mk,K9,yk,_k,vk,Ek,Ik,wk,Tk;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,h,g){return c==Array.prototype||c==Object.prototype||(c[h]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mm=="object"&&Mm];for(var h=0;h<c.length;++h){var g=c[h];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(c,h){if(h)e:{var g=r;c=c.split(".");for(var b=0;b<c.length-1;b++){var N=c[b];if(!(N in g))break e;g=g[N]}c=c[c.length-1],b=g[c],h=h(b),h!=b&&h!=null&&e(g,c,{configurable:!0,writable:!0,value:h})}}function o(c,h){c instanceof String&&(c+="");var g=0,b=!1,N={next:function(){if(!b&&g<c.length){var k=g++;return{value:h(k,c[k]),done:!1}}return b=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}i("Array.prototype.values",function(c){return c||function(){return o(this,function(h,g){return g})}});var s=s||{},a=this||self;function l(c){var h=typeof c;return h=h!="object"?h:c?Array.isArray(c)?"array":h:"null",h=="array"||h=="object"&&typeof c.length=="number"}function d(c){var h=typeof c;return h=="object"&&c!=null||h=="function"}function p(c,h,g){return c.call.apply(c.bind,arguments)}function v(c,h,g){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,b),c.apply(h,N)}}return function(){return c.apply(h,arguments)}}function S(c,h,g){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:v,S.apply(null,arguments)}function D(c,h){var g=Array.prototype.slice.call(arguments,1);return function(){var b=g.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function P(c,h){function g(){}g.prototype=h.prototype,c.aa=h.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(b,N,k){for(var j=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)j[Se-2]=arguments[Se];return h.prototype[N].apply(b,j)}}function O(c){let h=c.length;if(0<h){let g=Array(h);for(let b=0;b<h;b++)g[b]=c[b];return g}return[]}function L(c,h){for(let g=1;g<arguments.length;g++){let b=arguments[g];if(l(b)){let N=c.length||0,k=b.length||0;c.length=N+k;for(let j=0;j<k;j++)c[N+j]=b[j]}else c.push(b)}}class z{constructor(h,g){this.i=h,this.j=g,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function K(c){return/^[\s\xa0]*$/.test(c)}function ne(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Te(c){return Te[" "](c),c}Te[" "]=function(){};var Xe=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function be(c,h,g){for(let b in c)h.call(g,c[b],b,c)}function T(c,h){for(let g in c)h.call(void 0,c[g],g,c)}function y(c){let h={};for(let g in c)h[g]=c[g];return h}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(c,h){let g,b;for(let N=1;N<arguments.length;N++){b=arguments[N];for(g in b)c[g]=b[g];for(let k=0;k<E.length;k++)g=E[k],Object.prototype.hasOwnProperty.call(b,g)&&(c[g]=b[g])}}function I(c){var h=1;c=c.split(":");let g=[];for(;0<h&&c.length;)g.push(c.shift()),h--;return c.length&&g.push(c.join(":")),g}function A(c){a.setTimeout(()=>{throw c},0)}function _(){var c=Pi;let h=null;return c.g&&(h=c.g,c.g=c.g.next,c.g||(c.h=null),h.next=null),h}class je{constructor(){this.h=this.g=null}add(h,g){let b=Wt.get();b.set(h,g),this.h?this.h.next=b:this.g=b,this.h=b}}var Wt=new z(()=>new zm,c=>c.reset());class zm{constructor(){this.next=this.g=this.h=null}set(h,g){this.h=h,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Lo,cr=!1,Pi=new je,Bd=()=>{let c=a.Promise.resolve(void 0);Lo=()=>{c.then($d)}};var $d=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(g){A(g)}var h=Wt;h.j(c),100>h.h&&(h.h++,c.next=h.g,h.g=c)}cr=!1};function Fn(){this.s=this.s,this.C=this.C}Fn.prototype.s=!1,Fn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Fn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function lt(c,h){this.type=c,this.g=this.target=h,this.defaultPrevented=!1}lt.prototype.h=function(){this.defaultPrevented=!0};var ca=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,h=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let g=()=>{};a.addEventListener("test",g,h),a.removeEventListener("test",g,h)}catch(g){}return c})();function jr(c,h){if(lt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=h,h=c.relatedTarget){if(Xe){e:{try{Te(h.nodeName);var N=!0;break e}catch(k){}N=!1}N||(h=null)}}else g=="mouseover"?h=c.fromElement:g=="mouseout"&&(h=c.toElement);this.relatedTarget=h,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:uu[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&jr.aa.h.call(this)}}P(jr,lt);var uu={2:"touch",3:"pen",4:"mouse"};jr.prototype.h=function(){jr.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Br="closure_listenable_"+(1e6*Math.random()|0),lu=0;function zd(c,h,g,b,N){this.listener=c,this.proxy=null,this.src=h,this.type=g,this.capture=!!b,this.ha=N,this.key=++lu,this.da=this.fa=!1}function Vo(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ua(c){this.src=c,this.g={},this.h=0}ua.prototype.add=function(c,h,g,b,N){var k=c.toString();c=this.g[k],c||(c=this.g[k]=[],this.h++);var j=da(c,h,b,N);return-1<j?(h=c[j],g||(h.fa=!1)):(h=new zd(h,this.src,k,!!b,N),h.fa=g,c.push(h)),h};function la(c,h){var g=h.type;if(g in c.g){var b=c.g[g],N=Array.prototype.indexOf.call(b,h,void 0),k;(k=0<=N)&&Array.prototype.splice.call(b,N,1),k&&(Vo(h),c.g[g].length==0&&(delete c.g[g],c.h--))}}function da(c,h,g,b){for(var N=0;N<c.length;++N){var k=c[N];if(!k.da&&k.listener==h&&k.capture==!!g&&k.ha==b)return N}return-1}var Fo="closure_lm_"+(1e6*Math.random()|0),ha={};function qd(c,h,g,b,N){if(b&&b.once)return pa(c,h,g,b,N);if(Array.isArray(h)){for(var k=0;k<h.length;k++)qd(c,h[k],g,b,N);return null}return g=$r(g),c&&c[Br]?c.K(h,g,d(b)?!!b.capture:!!b,N):fa(c,h,g,!1,b,N)}function fa(c,h,g,b,N,k){if(!h)throw Error("Invalid event type");var j=d(N)?!!N.capture:!!N,Se=ga(c);if(Se||(c[Fo]=Se=new ua(c)),g=Se.add(h,g,b,j,k),g.proxy)return g;if(b=du(),g.proxy=b,b.src=c,b.listener=g,c.addEventListener)ca||(N=j),N===void 0&&(N=!1),c.addEventListener(h.toString(),b,N);else if(c.attachEvent)c.attachEvent(Uo(h.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return g}function du(){function c(g){return h.call(c.src,c.listener,g)}let h=qm;return c}function pa(c,h,g,b,N){if(Array.isArray(h)){for(var k=0;k<h.length;k++)pa(c,h[k],g,b,N);return null}return g=$r(g),c&&c[Br]?c.L(h,g,d(b)?!!b.capture:!!b,N):fa(c,h,g,!0,b,N)}function dt(c,h,g,b,N){if(Array.isArray(h))for(var k=0;k<h.length;k++)dt(c,h[k],g,b,N);else b=d(b)?!!b.capture:!!b,g=$r(g),c&&c[Br]?(c=c.i,h=String(h).toString(),h in c.g&&(k=c.g[h],g=da(k,g,b,N),-1<g&&(Vo(k[g]),Array.prototype.splice.call(k,g,1),k.length==0&&(delete c.g[h],c.h--)))):c&&(c=ga(c))&&(h=c.g[h.toString()],c=-1,h&&(c=da(h,g,b,N)),(g=-1<c?h[c]:null)&&ht(g))}function ht(c){if(typeof c!="number"&&c&&!c.da){var h=c.src;if(h&&h[Br])la(h.i,c);else{var g=c.type,b=c.proxy;h.removeEventListener?h.removeEventListener(g,b,c.capture):h.detachEvent?h.detachEvent(Uo(g),b):h.addListener&&h.removeListener&&h.removeListener(b),(g=ga(h))?(la(g,c),g.h==0&&(g.src=null,h[Fo]=null)):Vo(c)}}}function Uo(c){return c in ha?ha[c]:ha[c]="on"+c}function qm(c,h){if(c.da)c=!0;else{h=new jr(h,this);var g=c.listener,b=c.ha||c.src;c.fa&&ht(c),c=g.call(b,h)}return c}function ga(c){return c=c[Fo],c instanceof ua?c:null}var hu="__closure_events_fn_"+(1e9*Math.random()>>>0);function $r(c){return typeof c=="function"?c:(c[hu]||(c[hu]=function(h){return c.handleEvent(h)}),c[hu])}function ft(){Fn.call(this),this.i=new ua(this),this.M=this,this.F=null}P(ft,Fn),ft.prototype[Br]=!0,ft.prototype.removeEventListener=function(c,h,g,b){dt(this,c,h,g,b)};function gt(c,h){var g,b=c.F;if(b)for(g=[];b;b=b.F)g.push(b);if(c=c.M,b=h.type||h,typeof h=="string")h=new lt(h,c);else if(h instanceof lt)h.target=h.target||c;else{var N=h;h=new lt(b,c),w(h,N)}if(N=!0,g)for(var k=g.length-1;0<=k;k--){var j=h.g=g[k];N=Ni(j,b,!0,h)&&N}if(j=h.g=c,N=Ni(j,b,!0,h)&&N,N=Ni(j,b,!1,h)&&N,g)for(k=0;k<g.length;k++)j=h.g=g[k],N=Ni(j,b,!1,h)&&N}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var c=this.i,h;for(h in c.g){for(var g=c.g[h],b=0;b<g.length;b++)Vo(g[b]);delete c.g[h],c.h--}}this.F=null},ft.prototype.K=function(c,h,g,b){return this.i.add(String(c),h,!1,g,b)},ft.prototype.L=function(c,h,g,b){return this.i.add(String(c),h,!0,g,b)};function Ni(c,h,g,b){if(h=c.i.g[String(h)],!h)return!0;h=h.concat();for(var N=!0,k=0;k<h.length;++k){var j=h[k];if(j&&!j.da&&j.capture==g){var Se=j.listener,Ze=j.ha||j.src;j.fa&&la(c.i,j),N=Se.call(Ze,b)!==!1&&N}}return N&&!b.defaultPrevented}function Hd(c,h,g){if(typeof c=="function")g&&(c=S(c,g));else if(c&&typeof c.handleEvent=="function")c=S(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(c,h||0)}function Gd(c){c.g=Hd(()=>{c.g=null,c.i&&(c.i=!1,Gd(c))},c.l);let h=c.h;c.h=null,c.m.apply(null,h)}class Wd extends Fn{constructor(h,g){super(),this.m=h,this.l=g,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Gd(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mi(c){Fn.call(this),this.h=c,this.g={}}P(Mi,Fn);var ki=[];function ma(c){be(c.g,function(h,g){this.g.hasOwnProperty(g)&&ht(h)},c),c.g={}}Mi.prototype.N=function(){Mi.aa.N.call(this),ma(this)},Mi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jo=a.JSON.stringify,zr=a.JSON.parse,Kd=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Oi(){}Oi.prototype.h=null;function fu(c){return c.h||(c.h=c.i())}function Li(){}var Vi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pt(){lt.call(this,"d")}P(pt,lt);function ya(){lt.call(this,"c")}P(ya,lt);var cn={},Fi=null;function _a(){return Fi=Fi||new ft}cn.La="serverreachability";function Qd(c){lt.call(this,cn.La,c)}P(Qd,lt);function Tn(c){let h=_a();gt(h,new Qd(h))}cn.STAT_EVENT="statevent";function Yd(c,h){lt.call(this,cn.STAT_EVENT,c),this.stat=h}P(Yd,lt);function bt(c){let h=_a();gt(h,new Yd(h,c))}cn.Ma="timingevent";function Bo(c,h){lt.call(this,cn.Ma,c),this.size=h}P(Bo,lt);function Ui(c,h){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},h)}function ji(){this.g=!0}ji.prototype.xa=function(){this.g=!1};function pu(c,h,g,b,N,k){c.info(function(){if(c.g)if(k)for(var j="",Se=k.split("&"),Ze=0;Ze<Se.length;Ze++){var Ce=Se[Ze].split("=");if(1<Ce.length){var kt=Ce[0];Ce=Ce[1];var Ot=kt.split("_");j=2<=Ot.length&&Ot[1]=="type"?j+(kt+"="+Ce+"&"):j+(kt+"=redacted&")}}else j=null;else j=k;return"XMLHTTP REQ ("+b+") [attempt "+N+"]: "+h+`
`+g+`
`+j})}function $o(c,h,g,b,N,k,j){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+N+"]: "+h+`
`+g+`
`+k+" "+j})}function Bi(c,h,g,b){c.info(function(){return"XMLHTTP TEXT ("+h+"): "+Jd(c,g)+(b?" "+b:"")})}function ur(c,h){c.info(function(){return"TIMEOUT: "+h})}ji.prototype.info=function(){};function Jd(c,h){if(!c.g)return h;if(!h)return null;try{var g=JSON.parse(h);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var b=g[c];if(!(2>b.length)){var N=b[1];if(Array.isArray(N)&&!(1>N.length)){var k=N[0];if(k!="noop"&&k!="stop"&&k!="close")for(var j=1;j<N.length;j++)N[j]=""}}}}return jo(g)}catch(Se){return h}}var zo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},va={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qo;function Ho(){}P(Ho,Oi),Ho.prototype.g=function(){return new XMLHttpRequest},Ho.prototype.i=function(){return{}},qo=new Ho;function lr(c,h,g,b){this.j=c,this.i=h,this.l=g,this.R=b||1,this.U=new Mi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gu}function gu(){this.i=null,this.g="",this.h=!1}var Xd={},$i={};function Ea(c,h,g){c.L=1,c.v=ba(Un(h)),c.m=g,c.P=!0,Ia(c,null)}function Ia(c,h){c.F=Date.now(),qi(c),c.A=Un(c.v);var g=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),sh(g.i,"t",b),c.C=0,g=c.j.J,c.h=new gu,c.g=f(c.j,g?h:null,!c.m),0<c.O&&(c.M=new Wd(S(c.Y,c,c.g),c.O)),h=c.U,g=c.g,b=c.ca;var N="readystatechange";Array.isArray(N)||(N&&(ki[0]=N.toString()),N=ki);for(var k=0;k<N.length;k++){var j=qd(g,N[k],b||h.handleEvent,!1,h.h||h);if(!j)break;h.g[j.key]=j}h=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,h)):(c.u="GET",c.g.ea(c.A,c.u,null,h)),Tn(),pu(c.i,c.u,c.A,c.l,c.R,c.m)}lr.prototype.ca=function(c){c=c.target;let h=this.M;h&&Qt(c)==3?h.j():this.Y(c)},lr.prototype.Y=function(c){try{if(c==this.g)e:{let Ot=Qt(this.g);var h=this.g.Ba();let Ma=this.g.Z();if(!(3>Ot)&&(Ot!=3||this.g&&(this.h.h||this.g.oa()||dh(this.g)))){this.J||Ot!=4||h==7||(h==8||0>=Ma?Tn(3):Tn(2)),wa(this);var g=this.g.Z();this.X=g;t:if(zi(this)){var b=dh(this.g);c="";var N=b.length,k=Qt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){dr(this),Hi(this);var j="";break t}this.h.i=new a.TextDecoder}for(h=0;h<N;h++)this.h.h=!0,c+=this.h.i.decode(b[h],{stream:!(k&&h==N-1)});b.length=0,this.h.g+=c,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=g==200,$o(this.i,this.u,this.A,this.l,this.R,Ot,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Se,Ze=this.g;if((Se=Ze.g?Ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(Se)){var Ce=Se;break t}}Ce=null}if(g=Ce)Bi(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Go(this,g);else{this.o=!1,this.s=3,bt(12),dr(this),Hi(this);break e}}if(this.P){g=!0;let qn;for(;!this.J&&this.C<j.length;)if(qn=qr(this,j),qn==$i){Ot==4&&(this.s=4,bt(14),g=!1),Bi(this.i,this.l,null,"[Incomplete Response]");break}else if(qn==Xd){this.s=4,bt(15),Bi(this.i,this.l,j,"[Invalid Chunk]"),g=!1;break}else Bi(this.i,this.l,qn,null),Go(this,qn);if(zi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||j.length!=0||this.h.h||(this.s=1,bt(16),g=!1),this.o=this.o&&g,!g)Bi(this.i,this.l,j,"[Invalid Chunked Response]"),dr(this),Hi(this);else if(0<j.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),Na(kt),kt.M=!0,bt(11))}}else Bi(this.i,this.l,j,null),Go(this,j);Ot==4&&dr(this),this.o&&!this.J&&(Ot==4?Mt(this.j,this):(this.o=!1,qi(this)))}else hh(this.g),g==400&&0<j.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),dr(this),Hi(this)}}}catch(Ot){}};function zi(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function qr(c,h){var g=c.C,b=h.indexOf(`
`,g);return b==-1?$i:(g=Number(h.substring(g,b)),isNaN(g)?Xd:(b+=1,b+g>h.length?$i:(h=h.slice(b,b+g),c.C=b+g,h)))}lr.prototype.cancel=function(){this.J=!0,dr(this)};function qi(c){c.S=Date.now()+c.I,Zd(c,c.I)}function Zd(c,h){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ui(S(c.ba,c),h)}function wa(c){c.B&&(a.clearTimeout(c.B),c.B=null)}lr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(ur(this.i,this.A),this.L!=2&&(Tn(),bt(17)),dr(this),this.s=2,Hi(this)):Zd(this,this.S-c)};function Hi(c){c.j.G==0||c.J||Mt(c.j,c)}function dr(c){wa(c);var h=c.M;h&&typeof h.ma=="function"&&h.ma(),c.M=null,ma(c.U),c.g&&(h=c.g,c.g=null,h.abort(),h.ma())}function Go(c,h){try{var g=c.j;if(g.G!=0&&(g.g==c||Eu(g.h,c))){if(!c.K&&Eu(g.h,c)&&g.G==3){try{var b=g.Da.g.parse(h)}catch(Ce){b=null}if(Array.isArray(b)&&b.length==3){var N=b;if(N[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)Gr(g),Xi(g);else break e;Pa(g),bt(18)}}else g.za=N[1],0<g.za-g.T&&37500>N[2]&&g.F&&g.v==0&&!g.C&&(g.C=Ui(S(g.Za,g),6e3));if(1>=vu(g.h)&&g.ca){try{g.ca()}catch(Ce){}g.ca=void 0}}else pr(g,11)}else if((c.K||g.g==c)&&Gr(g),!K(h))for(N=g.Da.g.parse(h),h=0;h<N.length;h++){let Ce=N[h];if(g.T=Ce[0],Ce=Ce[1],g.G==2)if(Ce[0]=="c"){g.K=Ce[1],g.ia=Ce[2];let kt=Ce[3];kt!=null&&(g.la=kt,g.j.info("VER="+g.la));let Ot=Ce[4];Ot!=null&&(g.Aa=Ot,g.j.info("SVER="+g.Aa));let Ma=Ce[5];Ma!=null&&typeof Ma=="number"&&0<Ma&&(b=1.5*Ma,g.L=b,g.j.info("backChannelRequestTimeoutMs_="+b)),b=g;let qn=c.g;if(qn){let fh=qn.g?qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fh){var k=b.h;k.g||fh.indexOf("spdy")==-1&&fh.indexOf("quic")==-1&&fh.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(bn(k,k.h),k.h=null))}if(b.D){let Gm=qn.g?qn.g.getResponseHeader("X-HTTP-Session-Id"):null;Gm&&(b.ya=Gm,Fe(b.I,b.D,Gm))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),b=g;var j=c;if(b.qa=u(b,b.J?b.ia:null,b.W),j.K){un(b.h,j);var Se=j,Ze=b.L;Ze&&(Se.I=Ze),Se.B&&(wa(Se),qi(Se)),b.g=j}else Ru(b);0<g.i.length&&Zo(g)}else Ce[0]!="stop"&&Ce[0]!="close"||pr(g,7);else g.G==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?pr(g,7):Da(g):Ce[0]!="noop"&&g.l&&g.l.ta(Ce),g.v=0)}}Tn(4)}catch(Ce){}}var mu=class{constructor(c,h){this.g=c,this.map=h}};function yu(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _u(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function vu(c){return c.h?1:c.g?c.g.size:0}function Eu(c,h){return c.h?c.h==h:c.g?c.g.has(h):!1}function bn(c,h){c.g?c.g.add(h):c.h=h}function un(c,h){c.h&&c.h==h?c.h=null:c.g&&c.g.has(h)&&c.g.delete(h)}yu.prototype.cancel=function(){if(this.i=Gi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function Gi(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let h=c.i;for(let g of c.g.values())h=h.concat(g.D);return h}return O(c.i)}function Wo(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var h=[],g=c.length,b=0;b<g;b++)h.push(c[b]);return h}h=[],g=0;for(b in c)h[g++]=c[b];return h}function Iu(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var h=[];c=c.length;for(var g=0;g<c;g++)h.push(g);return h}h=[],g=0;for(let b in c)h[g++]=b;return h}}}function Oe(c,h){if(c.forEach&&typeof c.forEach=="function")c.forEach(h,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,h,void 0);else for(var g=Iu(c),b=Wo(c),N=b.length,k=0;k<N;k++)h.call(void 0,b[k],g&&g[k],c)}var Ko=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qo(c,h){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var b=c[g].indexOf("="),N=null;if(0<=b){var k=c[g].substring(0,b);N=c[g].substring(b+1)}else k=c[g];h(k,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function ln(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ln){this.h=c.h,Yo(this,c.j),this.o=c.o,this.g=c.g,Ta(this,c.s),this.l=c.l;var h=c.i,g=new Jo;g.i=h.i,h.g&&(g.g=new Map(h.g),g.h=h.h),eh(this,g),this.m=c.m}else c&&(h=String(c).match(Ko))?(this.h=!1,Yo(this,h[1]||"",!0),this.o=jn(h[2]||""),this.g=jn(h[3]||"",!0),Ta(this,h[4]),this.l=jn(h[5]||"",!0),eh(this,h[6]||"",!0),this.m=jn(h[7]||"")):(this.h=!1,this.i=new Jo(null,this.h))}ln.prototype.toString=function(){var c=[],h=this.j;h&&c.push(dn(h,wu,!0),":");var g=this.g;return(g||h=="file")&&(c.push("//"),(h=this.o)&&c.push(dn(h,wu,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(dn(g,g.charAt(0)=="/"?rh:nh,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",dn(g,Wi)),c.join("")};function Un(c){return new ln(c)}function Yo(c,h,g){c.j=g?jn(h,!0):h,c.j&&(c.j=c.j.replace(/:$/,""))}function Ta(c,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);c.s=h}else c.s=null}function eh(c,h,g){h instanceof Jo?(c.i=h,Sa(c.i,c.h)):(g||(h=dn(h,ih)),c.i=new Jo(h,c.h))}function Fe(c,h,g){c.i.set(h,g)}function ba(c){return Fe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function jn(c,h){return c?h?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function dn(c,h,g){return typeof c=="string"?(c=encodeURI(c).replace(h,th),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function th(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var wu=/[#\/\?@]/g,nh=/[#\?:]/g,rh=/[#\?]/g,ih=/[#\?@]/g,Wi=/#/g;function Jo(c,h){this.h=this.g=null,this.i=c||null,this.j=!!h}function hr(c){c.g||(c.g=new Map,c.h=0,c.i&&Qo(c.i,function(h,g){c.add(decodeURIComponent(h.replace(/\+/g," ")),g)}))}t=Jo.prototype,t.add=function(c,h){hr(this),this.i=null,c=$n(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(h),this.h+=1,this};function oh(c,h){hr(c),h=$n(c,h),c.g.has(h)&&(c.i=null,c.h-=c.g.get(h).length,c.g.delete(h))}function Bn(c,h){return hr(c),h=$n(c,h),c.g.has(h)}t.forEach=function(c,h){hr(this),this.g.forEach(function(g,b){g.forEach(function(N){c.call(h,N,b,this)},this)},this)},t.na=function(){hr(this);let c=Array.from(this.g.values()),h=Array.from(this.g.keys()),g=[];for(let b=0;b<h.length;b++){let N=c[b];for(let k=0;k<N.length;k++)g.push(h[b])}return g},t.V=function(c){hr(this);let h=[];if(typeof c=="string")Bn(this,c)&&(h=h.concat(this.g.get($n(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)h=h.concat(c[g])}return h},t.set=function(c,h){return hr(this),this.i=null,c=$n(this,c),Bn(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[h]),this.h+=1,this},t.get=function(c,h){return c?(c=this.V(c),0<c.length?String(c[0]):h):h};function sh(c,h,g){oh(c,h),0<g.length&&(c.i=null,c.g.set($n(c,h),O(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],h=Array.from(this.g.keys());for(var g=0;g<h.length;g++){var b=h[g];let k=encodeURIComponent(String(b)),j=this.V(b);for(b=0;b<j.length;b++){var N=k;j[b]!==""&&(N+="="+encodeURIComponent(String(j[b]))),c.push(N)}}return this.i=c.join("&")};function $n(c,h){return h=String(h),c.j&&(h=h.toLowerCase()),h}function Sa(c,h){h&&!c.j&&(hr(c),c.i=null,c.g.forEach(function(g,b){var N=b.toLowerCase();b!=N&&(oh(this,b),sh(this,N,g))},c)),c.j=h}function ah(c,h){let g=new ji;if(a.Image){let b=new Image;b.onload=D(Kt,g,"TestLoadImage: loaded",!0,h,b),b.onerror=D(Kt,g,"TestLoadImage: error",!1,h,b),b.onabort=D(Kt,g,"TestLoadImage: abort",!1,h,b),b.ontimeout=D(Kt,g,"TestLoadImage: timeout",!1,h,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else h(!1)}function Xo(c,h){let g=new ji,b=new AbortController,N=setTimeout(()=>{b.abort(),Kt(g,"TestPingServer: timeout",!1,h)},1e4);fetch(c,{signal:b.signal}).then(k=>{clearTimeout(N),k.ok?Kt(g,"TestPingServer: ok",!0,h):Kt(g,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(N),Kt(g,"TestPingServer: error",!1,h)})}function Kt(c,h,g,b,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),b(g)}catch(k){}}function ch(){this.g=new Kd}function Tu(c,h,g){let b=g||"";try{Oe(c,function(N,k){let j=N;d(N)&&(j=jo(N)),h.push(b+k+"="+encodeURIComponent(j))})}catch(N){throw h.push(b+"type="+encodeURIComponent("_badmap")),N}}function Le(c){this.l=c.Ub||null,this.j=c.eb||!1}P(Le,Oi),Le.prototype.g=function(){return new Ca(this.l,this.j)},Le.prototype.i=(function(c){return function(){return c}})({});function Ca(c,h){ft.call(this),this.D=c,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Ca,ft),t=Ca.prototype,t.open=function(c,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=h,this.readyState=1,Qi(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(h.body=c),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ki(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Qi(this)),this.g&&(this.readyState=3,Qi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;uh(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function uh(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var h=c.value?c.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!c.done}))&&(this.response=this.responseText+=h)}c.done?Ki(this):Qi(this),this.readyState==3&&uh(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ki(this))},t.Qa=function(c){this.g&&(this.response=c,Ki(this))},t.ga=function(){this.g&&Ki(this)};function Ki(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Qi(c)}t.setRequestHeader=function(c,h){this.u.append(c,h)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],h=this.h.entries();for(var g=h.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=h.next();return c.join(`\r
`)};function Qi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ca.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function bu(c){let h="";return be(c,function(g,b){h+=b,h+=":",h+=g,h+=`\r
`}),h}function Yi(c,h,g){e:{for(b in g){var b=!1;break e}b=!0}b||(g=bu(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):Fe(c,h,g))}function De(c){ft.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(De,ft);var lh=/^https?$/i,Hm=["POST","PUT"];t=De.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,h,g,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);h=h?h.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qo.g(),this.v=this.o?fu(this.o):fu(qo),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(h,String(c),!0),this.B=!1}catch(k){Ji(this,k);return}if(c=g||"",g=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var N in b)g.set(N,b[N]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(let k of b.keys())g.set(k,b.get(k));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(g.keys()).find(k=>k.toLowerCase()=="content-type"),N=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Hm,h,void 0))||b||N||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[k,j]of g)this.g.setRequestHeader(k,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cu(this),this.u=!0,this.g.send(c),this.u=!1}catch(k){Ji(this,k)}};function Ji(c,h){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=h,c.m=5,Su(c),Hr(c)}function Su(c){c.A||(c.A=!0,gt(c,"complete"),gt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,gt(this,"complete"),gt(this,"abort"),Hr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hr(this,!0)),De.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Aa(this):this.bb())},t.bb=function(){Aa(this)};function Aa(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Qt(c)!=4||c.Z()!=2)){if(c.u&&Qt(c)==4)Hd(c.Ea,0,c);else if(gt(c,"readystatechange"),Qt(c)==4){c.h=!1;try{let j=c.Z();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var g;if(!(g=h)){var b;if(b=j===0){var N=String(c.D).match(Ko)[1]||null;!N&&a.self&&a.self.location&&(N=a.self.location.protocol.slice(0,-1)),b=!lh.test(N?N.toLowerCase():"")}g=b}if(g)gt(c,"complete"),gt(c,"success");else{c.m=6;try{var k=2<Qt(c)?c.g.statusText:""}catch(Se){k=""}c.l=k+" ["+c.Z()+"]",Su(c)}}finally{Hr(c)}}}}function Hr(c,h){if(c.g){Cu(c);let g=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,h||gt(c,"ready");try{g.onreadystatechange=b}catch(N){}}}function Cu(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Qt(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Qt(this)?this.g.status:-1}catch(c){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(c){return""}},t.Oa=function(c){if(this.g){var h=this.g.responseText;return c&&h.indexOf(c)==0&&(h=h.substring(c.length)),zr(h)}};function dh(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch(h){return null}}function hh(c){let h={};c=(c.g&&2<=Qt(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(K(c[b]))continue;var g=I(c[b]);let N=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();let k=h[N]||[];h[N]=k,k.push(g)}T(h,function(b){return b.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zn(c,h,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||h}function Au(c){this.Aa=0,this.i=[],this.j=new ji,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zn("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zn("baseRetryDelayMs",5e3,c),this.cb=zn("retryDelaySeedMs",1e4,c),this.Wa=zn("forwardChannelMaxRetries",2,c),this.wa=zn("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new yu(c&&c.concurrentRequestLimit),this.Da=new ch,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Au.prototype,t.la=8,t.G=1,t.connect=function(c,h,g,b){bt(0),this.W=c,this.H=h||{},g&&b!==void 0&&(this.H.OSID=g,this.H.OAID=b),this.F=this.X,this.I=u(this,null,this.W),Zo(this)};function Da(c){if(Ra(c),c.G==3){var h=c.U++,g=Un(c.I);if(Fe(g,"SID",c.K),Fe(g,"RID",h),Fe(g,"TYPE","terminate"),Zi(c,g),h=new lr(c,c.j,h),h.L=2,h.v=ba(Un(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(h.v.toString(),"")}catch(b){}!g&&a.Image&&(new Image().src=h.v,g=!0),g||(h.g=f(h.j,null),h.g.ea(h.v)),h.F=Date.now(),qi(h)}Wr(c)}function Xi(c){c.g&&(Na(c),c.g.cancel(),c.g=null)}function Ra(c){Xi(c),c.u&&(a.clearTimeout(c.u),c.u=null),Gr(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Zo(c){if(!_u(c.h)&&!c.s){c.s=!0;var h=c.Ga;Lo||Bd(),cr||(Lo(),cr=!0),Pi.add(h,c),c.B=0}}function xa(c,h){return vu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=h.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ui(S(c.Ga,c,h),Pu(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let N=new lr(this,this.j,c),k=this.o;if(this.S&&(k?(k=y(k),w(k,this.S)):k=this.S),this.m!==null||this.O||(N.H=k,k=null),this.P)e:{for(var h=0,g=0;g<this.i.length;g++){t:{var b=this.i[g];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(h+=b,4096<h){h=g;break e}if(h===4096||g===this.i.length-1){h=g+1;break e}}h=1e3}else h=1e3;h=fr(this,N,h),g=Un(this.I),Fe(g,"RID",c),Fe(g,"CVER",22),this.D&&Fe(g,"X-HTTP-Session-Id",this.D),Zi(this,g),k&&(this.O?h="headers="+encodeURIComponent(String(bu(k)))+"&"+h:this.m&&Yi(g,this.m,k)),bn(this.h,N),this.Ua&&Fe(g,"TYPE","init"),this.P?(Fe(g,"$req",h),Fe(g,"SID","null"),N.T=!0,Ea(N,g,null)):Ea(N,g,h),this.G=2}}else this.G==3&&(c?Du(this,c):this.i.length==0||_u(this.h)||Du(this))};function Du(c,h){var g;h?g=h.l:g=c.U++;let b=Un(c.I);Fe(b,"SID",c.K),Fe(b,"RID",g),Fe(b,"AID",c.T),Zi(c,b),c.m&&c.o&&Yi(b,c.m,c.o),g=new lr(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),h&&(c.i=h.D.concat(c.i)),h=fr(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),bn(c.h,g),Ea(g,b,h)}function Zi(c,h){c.H&&be(c.H,function(g,b){Fe(h,b,g)}),c.l&&Oe({},function(g,b){Fe(h,b,g)})}function fr(c,h,g){g=Math.min(c.i.length,g);var b=c.l?S(c.l.Na,c.l,c):null;e:{var N=c.i;let k=-1;for(;;){let j=["count="+g];k==-1?0<g?(k=N[0].g,j.push("ofs="+k)):k=0:j.push("ofs="+k);let Se=!0;for(let Ze=0;Ze<g;Ze++){let Ce=N[Ze].g,kt=N[Ze].map;if(Ce-=k,0>Ce)k=Math.max(0,N[Ze].g-100),Se=!1;else try{Tu(kt,j,"req"+Ce+"_")}catch(Ot){b&&b(kt)}}if(Se){b=j.join("&");break e}}}return c=c.i.splice(0,g),h.D=c,b}function Ru(c){if(!c.g&&!c.u){c.Y=1;var h=c.Fa;Lo||Bd(),cr||(Lo(),cr=!0),Pi.add(h,c),c.v=0}}function Pa(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ui(S(c.Fa,c),Pu(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,xu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ui(S(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),Xi(this),xu(this))};function Na(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function xu(c){c.g=new lr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var h=Un(c.qa);Fe(h,"RID","rpc"),Fe(h,"SID",c.K),Fe(h,"AID",c.T),Fe(h,"CI",c.F?"0":"1"),!c.F&&c.ja&&Fe(h,"TO",c.ja),Fe(h,"TYPE","xmlhttp"),Zi(c,h),c.m&&c.o&&Yi(h,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=ba(Un(h)),g.m=null,g.P=!0,Ia(g,c)}t.Za=function(){this.C!=null&&(this.C=null,Xi(this),Pa(this),bt(19))};function Gr(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Mt(c,h){var g=null;if(c.g==h){Gr(c),Na(c),c.g=null;var b=2}else if(Eu(c.h,h))g=h.D,un(c.h,h),b=1;else return;if(c.G!=0){if(h.o)if(b==1){g=h.m?h.m.length:0,h=Date.now()-h.F;var N=c.B;b=_a(),gt(b,new Bo(b,g)),Zo(c)}else Ru(c);else if(N=h.s,N==3||N==0&&0<h.X||!(b==1&&xa(c,h)||b==2&&Pa(c)))switch(g&&0<g.length&&(h=c.h,h.i=h.i.concat(g)),N){case 1:pr(c,5);break;case 4:pr(c,10);break;case 3:pr(c,6);break;default:pr(c,2)}}}function Pu(c,h){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*h}function pr(c,h){if(c.j.info("Error code "+h),h==2){var g=S(c.fb,c),b=c.Xa;let N=!b;b=new ln(b||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Yo(b,"https"),ba(b),N?ah(b.toString(),g):Xo(b.toString(),g)}else bt(2);c.G=0,c.l&&c.l.sa(h),Wr(c),Ra(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function Wr(c){if(c.G=0,c.ka=[],c.l){let h=Gi(c.h);(h.length!=0||c.i.length!=0)&&(L(c.ka,h),L(c.ka,c.i),c.h.i.length=0,O(c.i),c.i.length=0),c.l.ra()}}function u(c,h,g){var b=g instanceof ln?Un(g):new ln(g);if(b.g!="")h&&(b.g=h+"."+b.g),Ta(b,b.s);else{var N=a.location;b=N.protocol,h=h?h+"."+N.hostname:N.hostname,N=+N.port;var k=new ln(null);b&&Yo(k,b),h&&(k.g=h),N&&Ta(k,N),g&&(k.l=g),b=k}return g=c.D,h=c.ya,g&&h&&Fe(b,g,h),Fe(b,"VER",c.la),Zi(c,b),b}function f(c,h,g){if(h&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=c.Ca&&!c.pa?new De(new Le({eb:g})):new De(c.pa),h.Ha(c.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function m(){}t=m.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function C(){}C.prototype.g=function(c,h){return new x(c,h)};function x(c,h){ft.call(this),this.g=new Au(h),this.l=c,this.h=h&&h.messageUrlParams||null,c=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(c?c["X-WebChannel-Content-Type"]=h.messageContentType:c={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(c?c["X-WebChannel-Client-Profile"]=h.va:c={"X-WebChannel-Client-Profile":h.va}),this.g.S=c,(c=h&&h.Sb)&&!K(c)&&(this.g.m=c),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!K(h)&&(this.g.D=h,c=this.h,c!==null&&h in c&&(c=this.h,h in c&&delete c[h])),this.j=new ie(this)}P(x,ft),x.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},x.prototype.close=function(){Da(this.g)},x.prototype.o=function(c){var h=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=jo(c),c=g);h.i.push(new mu(h.Ya++,c)),h.G==3&&Zo(h)},x.prototype.N=function(){this.g.l=null,delete this.j,Da(this.g),delete this.g,x.aa.N.call(this)};function M(c){pt.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var h=c.__sm__;if(h){e:{for(let g in h){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,h=h!==null&&c in h?h[c]:void 0),this.data=h}else this.data=c}P(M,pt);function $(){ya.call(this),this.status=1}P($,ya);function ie(c){this.g=c}P(ie,m),ie.prototype.ua=function(){gt(this.g,"a")},ie.prototype.ta=function(c){gt(this.g,new M(c))},ie.prototype.sa=function(c){gt(this.g,new $)},ie.prototype.ra=function(){gt(this.g,"b")},C.prototype.createWebChannel=C.prototype.g,x.prototype.send=x.prototype.o,x.prototype.open=x.prototype.m,x.prototype.close=x.prototype.close,Tk=xi.createWebChannelTransport=function(){return new C},wk=xi.getStatEventTarget=function(){return _a()},Ik=xi.Event=cn,Ek=xi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zo.NO_ERROR=0,zo.TIMEOUT=8,zo.HTTP_ERROR=6,vk=xi.ErrorCode=zo,va.COMPLETE="complete",_k=xi.EventType=va,Li.EventType=Vi,Vi.OPEN="a",Vi.CLOSE="b",Vi.ERROR="c",Vi.MESSAGE="d",ft.prototype.listen=ft.prototype.K,yk=xi.WebChannel=Li,K9=xi.FetchXmlHttpFactory=Le,De.prototype.listenOnce=De.prototype.L,De.prototype.getLastError=De.prototype.Ka,De.prototype.getLastErrorCode=De.prototype.Ba,De.prototype.getStatus=De.prototype.Z,De.prototype.getResponseJson=De.prototype.Oa,De.prototype.getResponseText=De.prototype.oa,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Ha,mk=xi.XhrIo=De}).apply(typeof Mm<"u"?Mm:typeof self<"u"?self:typeof window<"u"?window:{});var bk="@firebase/firestore";var Pt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Pt.UNAUTHENTICATED=new Pt(null),Pt.GOOGLE_CREDENTIALS=new Pt("google-credentials-uid"),Pt.FIRST_PARTY=new Pt("first-party-uid"),Pt.MOCK_USER=new Pt("mock-user");var Ud="10.14.0";var su=new Eo("@firebase/firestore");function ar(t,...e){if(su.logLevel<=xe.DEBUG){let n=e.map(Eb);su.debug(`Firestore (${Ud}): ${t}`,...n)}}function Rk(t,...e){if(su.logLevel<=xe.ERROR){let n=e.map(Eb);su.error(`Firestore (${Ud}): ${t}`,...n)}}function Q9(t,...e){if(su.logLevel<=xe.WARN){let n=e.map(Eb);su.warn(`Firestore (${Ud}): ${t}`,...n)}}function Eb(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch(e){return t}}function an(t="Unexpected state"){let e=`FIRESTORE (${Ud}) INTERNAL ASSERTION FAILED: `+t;throw Rk(e),new Error(e)}function oa(t,e){t||an()}var Gt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Nt=class extends Pn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var sa=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var km=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},sb=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Pt.UNAUTHENTICATED))}shutdown(){}},ab=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},cb=class{constructor(e){this.t=e,this.currentUser=Pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){oa(this.o===void 0);let r=this.i,i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve(),o=new sa;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new sa,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let l=o;e.enqueueRetryable(()=>R(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},a=l=>{ar("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(ar("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new sa)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ar("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(oa(typeof r.accessToken=="string"),new km(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return oa(e===null||typeof e=="string"),new Pt(e)}},ub=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Pt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},lb=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new ub(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},db=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},hb=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){oa(this.o===void 0);let r=o=>{o.error!=null&&ar("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,ar("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{ar("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):ar("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(oa(typeof n.token=="string"),this.R=n.token,new db(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function xk(t,e){return t<e?-1:t>e?1:0}var fb=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&an(),r===void 0?r=e.length-n:r>e.length-n&&an(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Oo=class t extends fb{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new Nt(Gt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}};var aa=class t{constructor(e){this.path=e}static fromPath(e){return new t(Oo.fromString(e))}static fromName(e){return new t(Oo.fromString(e).popFirst(5))}static empty(){return new t(Oo.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Oo.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Oo.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Oo(e.slice()))}};var pb=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};pb.UNKNOWN_ID=-1;function Y9(t){return t.name==="IndexedDbTransactionError"}function J9(t){return t===0&&1/t==-1/0}var X9=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Nce=[...X9,"documentOverlays"],Z9=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],e6=Z9,t6=[...e6,"indexConfiguration","indexState","indexEntries"];var Mce=[...t6,"globals"];var au=class t{constructor(e,n){this.comparator=e,this.root=n||Ur.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ur.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ur.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ou(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ou(this.root,e,this.comparator,!1)}getReverseIterator(){return new ou(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ou(this.root,e,this.comparator,!0)}},ou=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ur=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw an();let e=this.left.check();if(e!==this.right.check())throw an();return e+(this.isRed()?0:1)}};Ur.EMPTY=null,Ur.RED=!0,Ur.BLACK=!1;Ur.EMPTY=new class{constructor(){this.size=0}get key(){throw an()}get value(){throw an()}get color(){throw an()}get left(){throw an()}get right(){throw an()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Ur(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Om=class t{constructor(e){this.comparator=e,this.data=new au(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Lm(this.data.getIterator())}getIteratorFrom(e){return new Lm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Lm=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var gb=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var cu=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new gb("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xk(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};cu.EMPTY_BYTE_STRING=new cu("");var n6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function r6(t){if(oa(!!t),typeof t=="string"){let e=0,n=n6.exec(t);if(oa(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fd(t.seconds),nanos:Fd(t.nanos)}}function Fd(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function i6(t){return typeof t=="string"?cu.fromBase64String(t):cu.fromUint8Array(t)}var mb=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};function o6(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function s6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Oce=new au(aa.comparator);var Lce=new au(aa.comparator);var Vce=new au(aa.comparator),Fce=new Om(aa.comparator);var Uce=new Om(xk);var Sk,Ie;(Ie=Sk||(Sk={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";var jce=new ib([4294967295,4294967295],0);var Vm=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Fd(e.integerValue));else if("doubleValue"in e){let r=Fd(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),J9(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=r6(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(i6(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?s6(e)?this.dt(n,Number.MAX_SAFE_INTEGER):o6(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):an()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let o=e.fields||{};this.dt(n,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Fd(a)),this.Vt(s,n),this.Tt(o[s],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),aa.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};Vm.vt=new Vm;var Bce=new Uint8Array(0);var Fr=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Fr.DEFAULT_COLLECTION_PERCENTILE=10,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fr.DEFAULT=new Fr(41943040,Fr.DEFAULT_COLLECTION_PERCENTILE,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fr.DISABLED=new Fr(-1,0,0);function ob(){return typeof document<"u"?document:null}var yb=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ar("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var _b=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new sa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Nt(Gt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var Ck,Ak;(Ak=Ck||(Ck={})).ea="default",Ak.Cache="cache";function a6(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var Dk=new Map;function c6(t,e,n,r){if(e===!0&&r===!0)throw new Nt(Gt.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function u6(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":an()}function l6(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Nt(Gt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=u6(t);throw new Nt(Gt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Fm=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Nt(Gt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Nt(Gt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}c6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=a6((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Nt(Gt.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Nt(Gt.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Nt(Gt.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Um=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Nt(Gt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Nt(Gt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fm(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new sb;switch(r.type){case"firstParty":return new lb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Nt(Gt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return R(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=Dk.get(n);r&&(ar("ComponentProvider","Removing Datastore"),Dk.delete(n),r.terminate())})(this),Promise.resolve()}};function Pk(t,e,n,r={}){var i;let o=(t=l6(t,Um))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Q9("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Pt.MOCK_USER;else{a=yx(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new Nt(Gt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Pt(d)}t._authCredentials=new ab(new km(a,l))}}var jm=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new yb(this,"async_queue_retry"),this.Vu=()=>{let r=ob();r&&ar("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let n=ob();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let n=ob();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new sa;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return R(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Y9(e))throw e;ar("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=(function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a})(r);throw Rk("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);let i=_b.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&an()}verifyOperationInProgress(){}wu(){return R(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let n=this.Tu.indexOf(e);this.Tu.splice(n,1)}};var vb=class extends Um{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new jm,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return R(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new jm(e),this._firestoreClient=void 0,yield e}})}};function Nk(t,e){let n=typeof t=="object"?t:Gl(),r=typeof t=="string"?t:e||"(default)",i=iI(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=gx("firestore");o&&Pk(i,...o)}return i}var $ce=new RegExp("[~\\*/\\[\\]]");(function(e,n=!0){(function(i){Ud=i})(Tc),wo(new Mn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new vb(new cb(r.getProvider("auth-internal")),new hb(r.getProvider("app-check-internal")),(function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Nt(Gt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mb(d.options.projectId,p)})(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),It(bk,"4.7.3",e),It(bk,"4.7.3","esm2017")})();var jd=class{constructor(e){return e}},Mk="firestore",Ib=class{constructor(){return Yl(Mk)}};var wb=new H("angularfire2.firestore-instances");function d6(t,e){let n=yI(Mk,t,e);return n&&new jd(n)}function h6(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new jd(r)}}var f6={provide:Ib,deps:[[new Cr,wb]]},p6={provide:jd,useFactory:d6,deps:[[new Cr,wb],Vs]};function kk(t,...e){return It("angularfire",Pc.full,"fst"),Xt([p6,f6,{provide:wb,useFactory:h6(t),multi:!0,deps:[Ge,Dt,Jl,Zl,[new Cr,xg],[new Cr,Ql],...e]}])}var Ok=Xl(Nk,!0);var Lk=[];var Vk={providers:[g_(),OE(Lk),hR(dR()),Kx(()=>Qx(In.firebase)),kk(()=>Ok())]};var g6="firebase",m6="12.9.0";So(g6,m6,"app");var Bm=class t{hashPassword(e){return R(this,null,function*(){let r=new TextEncoder().encode(e),i=yield crypto.subtle.digest("SHA-256",r);return Array.from(new Uint8Array(i)).map(a=>a.toString(16).padStart(2,"0")).join("")})}registerPlayer(e,n){return R(this,null,function*(){try{let r=nr().length===0?kn(In.firebase):wn(),i=Vn(r),o=Mo(i,"usuarios");if((yield nb(o)).docs.find(v=>v.data().nombre?.toLowerCase()===e.toLowerCase()))return{success:!1,error:"El nombre ya est\xE1 en uso"};let l="player_"+Date.now()+"_"+Math.random().toString(36).substring(2,9),d=yield this.hashPassword(n),p=ko(i,"usuarios",l);return yield Ld(p,{nombre:e,password:d,puntos:0,unlockedMysteries:[],fechaCreacion:new Date}),console.log("\u2705 Jugador registrado:",e),{success:!0,userId:l}}catch(r){return console.error("\u274C Error al registrar jugador:",r),{success:!1,error:"Error al registrar"}}})}loginPlayer(e,n){return R(this,null,function*(){try{let r=nr().length===0?kn(In.firebase):wn(),i=Vn(r),o=Mo(i,"usuarios"),s=yield this.hashPassword(n),l=(yield nb(o)).docs.find(p=>p.data().nombre?.toLowerCase()===e.toLowerCase());if(!l)return{success:!1,error:"Usuario no encontrado"};let d=l.data();return d.password!==s?{success:!1,error:"Contrase\xF1a incorrecta"}:{success:!0,userId:l.id,userData:{nombre:d.nombre,puntos:d.puntos||0,unlockedMysteries:d.unlockedMysteries||[]}}}catch(r){return console.error("\u274C Error en login:",r),{success:!1,error:"Error al iniciar sesi\xF3n"}}})}addPoints(e,n){return R(this,null,function*(){try{let r=nr().length===0?kn(In.firebase):wn(),i=Vn(r),o=ko(i,"usuarios",e);(yield Nm(o)).exists()?(yield rb(o,{puntos:eb(n)}),console.log(`\u2705 +${n} puntos para ${e}`)):(yield Ld(o,{puntos:n,nombre:e,fechaCreacion:new Date,unlockedMysteries:[]}),console.log(`\u2705 Usuario ${e} creado con ${n} puntos`))}catch(r){console.error("\u274C Error al a\xF1adir puntos:",r)}})}unlockMystery(e,n){return R(this,null,function*(){try{let r=nr().length===0?kn(In.firebase):wn(),i=Vn(r),o=ko(i,"usuarios",e);return(yield Nm(o)).exists()?(yield rb(o,{unlockedMysteries:ZT(n)}),console.log(`\u2705 Misterio ${n} a\xF1adido a ${e}`)):(yield Ld(o,{puntos:0,nombre:e,fechaCreacion:new Date,unlockedMysteries:[n]}),console.log(`\u2705 Usuario creado y misterio ${n} desbloqueado`)),!0}catch(r){throw console.error("\u274C Error al desbloquear misterio:",r),r}})}getUserProgress(e){return R(this,null,function*(){try{let n=nr().length===0?kn(In.firebase):wn(),r=Vn(n),i=ko(r,"usuarios",e),o=yield Nm(i);if(o.exists()){let s=o.data();return{puntos:s.puntos||0,unlockedMysteries:s.unlockedMysteries||[]}}return{puntos:0,unlockedMysteries:[]}}catch(n){return console.error("\u274C Error al obtener progreso:",n),{puntos:0,unlockedMysteries:[]}}})}getMysteries(){return new we(e=>{let n=nr().length===0?kn(In.firebase):wn(),r=Vn(n),i=Mo(r,"misterios"),o=Vd(i,s=>{let a=s.docs.map(l=>B({id:l.id},l.data()));e.next(a)},s=>{e.error(s)});return()=>o()})}getTopPlayers(e=10){return R(this,null,function*(){try{let n=nr().length===0?kn(In.firebase):wn(),r=Vn(n),i=Mo(r,"usuarios");return new Promise((o,s)=>{Vd(i,a=>{let l=a.docs.map(d=>_e(B({id:d.id},d.data()),{misteriosResueltos:(d.data().unlockedMysteries||[]).length}));l.sort((d,p)=>(p.puntos||0)-(d.puntos||0)),o(l.slice(0,e))},s)})}catch(n){return console.error("\u274C Error al obtener top jugadores:",n),[]}})}getAllPlayers(){return R(this,null,function*(){try{let e=nr().length===0?kn(In.firebase):wn(),n=Vn(e),r=Mo(n,"usuarios");return new Promise((i,o)=>{Vd(r,s=>{let a=s.docs.map(l=>B({id:l.id},l.data()));a.sort((l,d)=>(d.puntos||0)-(l.puntos||0)),i(a)},o)})}catch(e){return console.error("\u274C Error al obtener jugadores:",e),[]}})}getPlayerByName(e){return R(this,null,function*(){try{let n=nr().length===0?kn(In.firebase):wn(),r=Vn(n),i=Mo(r,"usuarios");return new Promise((o,s)=>{Vd(i,a=>{let l=a.docs.find(d=>d.data().nombre?.toLowerCase()===e.toLowerCase());o(l?{id:l.id,nombre:l.data().nombre}:null)},s)})}catch(n){return console.error("\u274C Error al buscar jugador:",n),null}})}updatePlayerName(e,n){return R(this,null,function*(){try{let r=nr().length===0?kn(In.firebase):wn(),i=Vn(r),o=ko(i,"usuarios",e);yield Ld(o,{nombre:n,puntos:0,unlockedMysteries:[],fechaCreacion:new Date},{merge:!0}),console.log("\u2705 Jugador registrado:",n)}catch(r){console.error("\u274C Error al registrar jugador:",r)}})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})};var y6=(t,e)=>e.id;function _6(t,e){t&1&&J(0," Iniciar Sesi\xF3n ")}function v6(t,e){t&1&&J(0," Crear Cuenta ")}function E6(t,e){if(t&1&&(W(0,"div",24),J(1),Y()),t&2){let n=We(2);ye(),ci(n.nameError())}}function I6(t,e){if(t&1&&(W(0,"div",24),J(1),Y()),t&2){let n=We(2);ye(),ci(n.passwordError())}}function w6(t,e){t&1&&(J(0," \xBFNo tienes cuenta? "),W(1,"strong"),J(2,"Reg\xEDstrate"),Y())}function T6(t,e){t&1&&(J(0," \xBFYa tienes cuenta? "),W(1,"strong"),J(2,"Inicia sesi\xF3n"),Y())}function b6(t,e){if(t&1){let n=fo();W(0,"div",3)(1,"div",15),Jn(2,"img",16),W(3,"h1",17),J(4," Mystery "),W(5,"span",18),J(6,"Hunter"),Y()(),W(7,"div",19)(8,"p"),J(9,"Bienvenido al desaf\xEDo definitivo. Explora tu entorno, resuelve enigmas hist\xF3ricos y compite por ser el mejor investigador."),Y(),Jn(10,"br"),W(11,"ul",20)(12,"li"),J(13,"Encuentra puntos de inter\xE9s en el mapa."),Y(),W(14,"li"),J(15,"Ac\xE9rcate f\xEDsicamente para desbloquear el misterio."),Y(),W(16,"li"),J(17,"Resuelve el acertijo y gana puntos para el ranking."),Y()(),Jn(18,"hr",21),W(19,"h3",22),_t(20,_6,1,0)(21,v6,1,0),Y(),Jn(22,"input",23,0),_t(24,E6,2,1,"div",24),W(25,"input",25,1),Ht("keyup.enter",function(){en(n);let i=po(23),o=po(26),s=We();return tn(s.handleAuth(i.value,o.value))}),Y(),_t(27,I6,2,1,"div",24),Y(),W(28,"button",26),Ht("click",function(){en(n);let i=po(23),o=po(26),s=We();return tn(s.handleAuth(i.value,o.value))}),J(29),Y(),W(30,"button",27),Ht("click",function(){en(n);let i=We();return tn(i.toggleMode())}),_t(31,w6,3,0)(32,T6,3,0),Y()()()}if(t&2){let n=We();ye(20),vt(n.isLoginMode()?20:21),ye(4),vt(n.nameError()?24:-1),ye(3),vt(n.passwordError()?27:-1),ye(2),nn(" ",n.isLoginMode()?"Entrar":"Registrarse"," "),ye(2),vt(n.isLoginMode()?31:32)}}function S6(t,e){if(t&1){let n=fo();W(0,"button",28),Ht("click",function(){en(n);let i=We();return tn(i.goToCurrentLocation())}),J(1," \u{1F3AF} "),Y()}}function C6(t,e){if(t&1){let n=fo();W(0,"button",29),Ht("click",function(){en(n);let i=We();return tn(i.logout())}),J(1," \u{1F6AA} Salir "),Y()}}function A6(t,e){t&1&&(W(0,"div",31),J(1,"Cargando..."),Y())}function D6(t,e){t&1&&(W(0,"div",32),J(1,"No hay jugadores a\xFAn"),Y())}function R6(t,e){t&1&&(W(0,"span",39),J(1,"\u{1F947}"),Y())}function x6(t,e){t&1&&(W(0,"span",40),J(1,"\u{1F948}"),Y())}function P6(t,e){t&1&&(W(0,"span",41),J(1,"\u{1F949}"),Y())}function N6(t,e){if(t&1&&(W(0,"span",42),J(1),Y()),t&2){let n=We().$index;ye(),nn("#",n+1)}}function M6(t,e){t&1&&(W(0,"span",45),J(1,"(T\xFA)"),Y())}function k6(t,e){if(t&1&&(W(0,"div",37)(1,"div",38),_t(2,R6,2,0,"span",39)(3,x6,2,0,"span",40)(4,P6,2,0,"span",41)(5,N6,2,1,"span",42),Y(),W(6,"div",43)(7,"span",44),J(8),_t(9,M6,2,0,"span",45),Y(),W(10,"span",46),J(11),Y()(),W(12,"div",47),J(13),W(14,"span",48),J(15,"pts"),Y()()()),t&2){let n=e.$implicit,r=e.$index,i=We(3);yl("current-user",n.id===i.userId),ye(2),vt(r===0?2:r===1?3:r===2?4:5),ye(6),nn(" ",n.nombre," "),ye(),vt(n.id===i.userId?9:-1),ye(2),nn(" ",n.misteriosResueltos||0," misterios "),ye(2),nn(" ",n.puntos," ")}}function O6(t,e){t&1&&(W(0,"span"),J(1,"\u25B2 Mostrar menos"),Y())}function L6(t,e){t&1&&(W(0,"span"),J(1,"\u25BC Ver m\xE1s jugadores"),Y())}function V6(t,e){if(t&1){let n=fo();W(0,"button",49),Ht("click",function(){en(n);let i=We(3);return tn(i.toggleShowAllPlayers())}),_t(1,O6,2,0,"span")(2,L6,2,0,"span"),Y()}if(t&2){let n=We(3);ye(),vt(n.showAllPlayers()?1:2)}}function F6(t,e){if(t&1&&(W(0,"div",34),Fv(1,k6,16,7,"div",35,y6),Y(),_t(3,V6,3,1,"button",36)),t&2){let n=We(2);ye(),Uv(n.getVisiblePlayers()),ye(2),vt(n.topPlayers().length>6?3:-1)}}function U6(t,e){if(t&1&&(W(0,"div",33)(1,"div",50),J(2,"..."),Y(),W(3,"div",51)(4,"div",38)(5,"span",42),J(6),Y()(),W(7,"div",43)(8,"span",44),J(9),W(10,"span",45),J(11,"(T\xFA)"),Y()()(),W(12,"div",47),J(13),W(14,"span",48),J(15,"pts"),Y()()()()),t&2){let n=We(2);ye(6),nn("#",n.userRank()),ye(3),nn(" ",n.userId," "),ye(4),nn(" ",n.totalPoints()," ")}}function j6(t,e){if(t&1&&(W(0,"div",12)(1,"h3",30),J(2,"\u{1F3C6} Top Jugadores"),Y(),_t(3,A6,2,0,"div",31)(4,D6,2,0,"div",32)(5,F6,4,1),_t(6,U6,16,3,"div",33),Y()),t&2){let n=We();ye(3),vt(n.loadingRanking()?3:n.topPlayers().length===0?4:5),ye(3),vt(n.userRank()&&n.userRank()>10?6:-1)}}function B6(t,e){if(t&1){let n=fo();W(0,"div",13)(1,"div",52),Ht("click",function(i){return en(n),tn(i.stopPropagation())}),W(2,"div",53),J(3,"\u{1F389}"),Y(),W(4,"h2",54),J(5,"\xA1Felicidades!"),Y(),W(6,"p",55),J(7,"Has resuelto el misterio de"),Y(),W(8,"p",56),J(9),Y(),W(10,"div",57),J(11),Y(),W(12,"button",58),Ht("click",function(){en(n);let i=We();return tn(i.closeSuccessModal())}),J(13,"Continuar"),Y()()()}if(t&2){let n=We();ye(9),ci(n.solvedMysteryTitle()),ye(2),nn("+",n.earnedPoints()," puntos")}}function $6(t,e){if(t&1){let n=fo();W(0,"div",14)(1,"div",59)(2,"button",60),Ht("click",function(){en(n);let i=We();return tn(i.selectedMystery.set(null))}),J(3,"\xD7"),Y(),W(4,"div",61)(5,"h2"),J(6),Y()(),W(7,"div",62)(8,"p",63),J(9),Y(),W(10,"div",64)(11,"span",65),J(12,"\u{1F50D} El Acertijo:"),Y(),W(13,"p",66),J(14),Y()(),W(15,"div",67)(16,"input",68,2),Ht("keyup.enter",function(){en(n);let i=po(17),o=We();return tn(o.checkAnswer(i.value))}),Y(),W(18,"button",69),Ht("click",function(){en(n);let i=po(17),o=We();return tn(o.checkAnswer(i.value))}),J(19,"Comprobar"),Y()()()()()}if(t&2){let n=We();ye(6),ci(n.selectedMystery().titulo),ye(3),ci(n.selectedMystery().descripcion),ye(5),ci(n.selectedMystery().acertijo)}}var $m=class t{showWelcome=ze(!0);mysteryService=V(Bm);cdr=V(pp);ngZone=V(Ge);lastAccuracy=0;userId="";playerName=ze("");totalPoints=ze(0);selectedMystery=ze(null);notifiedMysteries=new Set;showSuccessModal=ze(!1);solvedMysteryTitle=ze("");earnedPoints=ze(0);showRanking=ze(!1);topPlayers=ze([]);loadingRanking=ze(!1);userRank=ze(null);showAllPlayers=ze(!1);isLoginMode=ze(!0);nameError=ze("");passwordError=ze("");showUserMenu=ze(!1);map;playerMarker;L;misteriosList=[];markers=new Map;userProgress={puntos:0,unlockedMysteries:[]};watchId=null;locationAttempts=0;maxLocationAttempts=3;loadedMysteries=new Set;LOAD_MORE_DISTANCE=1e4;BATCH_SIZE=5;currentUserLocation=null;constructor(){window.checkAnswerPopup=e=>{this.ngZone.run(()=>{let n=document.getElementById(`ans-${e}`);if(!n)return;let r=n.value.trim();this.validarDesdePopup(e,r)})},oc(()=>R(this,null,function*(){let e=yield import("./chunk-Q3FENJVP.js");this.L=e.default||e;let n=localStorage.getItem("mysteryHunterUserId"),r=localStorage.getItem("mysteryHunterPlayerName");n&&r&&(this.userId=n,this.playerName.set(r),this.userProgress=yield this.mysteryService.getUserProgress(this.userId),this.totalPoints.set(this.userProgress.puntos),this.showWelcome.set(!1),console.log("\u{1F44B} Sesi\xF3n recuperada:",r)),yield this.initMap(this.L),this.loadMysteries(this.L),this.loadRanking()}))}toggleMode(){this.isLoginMode.update(e=>!e),this.nameError.set(""),this.passwordError.set("")}toggleUserMenu(){this.showUserMenu.update(e=>!e)}goToCurrentLocation(){this.currentUserLocation&&this.map?this.map.setView(this.currentUserLocation,16,{animate:!0,duration:1}):navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{let{latitude:n,longitude:r}=e.coords,i=this.L.latLng(n,r);this.map.setView(i,16)},e=>{console.error("Error al obtener ubicaci\xF3n:",e)},{enableHighAccuracy:!0})}logout(){confirm("\xBFEst\xE1s seguro de que quieres cerrar sesi\xF3n?")&&(localStorage.removeItem("mysteryHunterUserId"),localStorage.removeItem("mysteryHunterPlayerName"),this.userId="",this.playerName.set(""),this.totalPoints.set(0),this.userProgress={puntos:0,unlockedMysteries:[]},this.showRanking.set(!1),this.markers.forEach(e=>{if(this.L){let n=this.L.icon({iconUrl:"assets/locked.png",iconSize:[32,32],iconAnchor:[16,32]});e.setIcon(n),e.bindPopup(`
          <div style="text-align: center; padding: 10px;">
            <b>\u{1F512} Bloqueado</b><br>
            <span style="font-size: 12px;">Ac\xE9rcate para desbloquear</span>
          </div>`)}}),this.misteriosList.forEach(e=>{e.desbloqueado=!1}),this.showWelcome.set(!0),console.log("\u{1F44B} Sesi\xF3n cerrada"))}handleAuth(e,n){return R(this,null,function*(){if(this.nameError.set(""),this.passwordError.set(""),!e||!e.trim()){this.nameError.set("Por favor, escribe tu nombre");return}if(!n||n.length<4){this.passwordError.set("La contrase\xF1a debe tener al menos 4 caracteres");return}let r=e.trim();if(this.isLoginMode()){let i=yield this.mysteryService.loginPlayer(r,n);i.success&&i.userId?(this.userId=i.userId,this.playerName.set(r),localStorage.setItem("mysteryHunterUserId",i.userId),localStorage.setItem("mysteryHunterPlayerName",r),this.userProgress=yield this.mysteryService.getUserProgress(i.userId),this.totalPoints.set(this.userProgress.puntos),console.log("\u2705 Login exitoso:",r),this.showWelcome.set(!1),"Notification"in window&&Notification.requestPermission(),this.L&&this.loadMysteries(this.L)):i.error==="Usuario no encontrado"?this.nameError.set("\u274C Usuario no encontrado"):i.error==="Contrase\xF1a incorrecta"?this.passwordError.set("\u274C Contrase\xF1a incorrecta"):this.nameError.set("\u274C Error al iniciar sesi\xF3n")}else{let i=yield this.mysteryService.registerPlayer(r,n);i.success&&i.userId?(this.userId=i.userId,this.playerName.set(r),localStorage.setItem("mysteryHunterUserId",i.userId),localStorage.setItem("mysteryHunterPlayerName",r),this.userProgress={puntos:0,unlockedMysteries:[]},this.totalPoints.set(0),console.log("\u2705 Registro exitoso:",r),this.showWelcome.set(!1)):i.error==="El nombre ya est\xE1 en uso"?this.nameError.set("\u26A0\uFE0F Este nombre ya est\xE1 en uso"):this.nameError.set("\u274C Error al registrarse")}})}toggleRanking(){this.showRanking.update(e=>!e),this.showRanking()&&(this.showAllPlayers.set(!1),this.loadRanking(),this.showUserMenu.set(!1))}toggleShowAllPlayers(){this.showAllPlayers.update(e=>!e)}getVisiblePlayers(){let e=this.showAllPlayers()?10:6;return this.topPlayers().slice(0,e)}loadRanking(){return R(this,null,function*(){this.loadingRanking.set(!0);try{let e=yield this.mysteryService.getTopPlayers(10);this.topPlayers.set(e);let r=(yield this.mysteryService.getAllPlayers()).findIndex(i=>i.id===this.userId);this.userRank.set(r>=0?r+1:null),console.log("\u{1F3C6} Ranking cargado:",e)}catch(e){console.error("\u274C Error al cargar ranking:",e)}finally{this.loadingRanking.set(!1)}})}validarDesdePopup(e,n){let r=this.misteriosList.find(i=>i.titulo===e);if(!r){alert("Error: Misterio no encontrado");return}if(console.log("\u{1F50D} Validando:"),console.log("   Usuario escribi\xF3:",n.toLowerCase()),console.log("   Respuesta correcta:",r.respuesta.toLowerCase()),n.toLowerCase()===r.respuesta.toLowerCase()){console.log("\u2705 \xA1Respuesta correcta!"),this.map.closePopup(),r.desbloqueado=!0,this.ngZone.run(()=>{this.solvedMysteryTitle.set(r.titulo),this.earnedPoints.set(50),this.showSuccessModal.set(!0),console.log("\u{1F389} Modal activado:",{show:this.showSuccessModal(),title:this.solvedMysteryTitle(),points:this.earnedPoints()}),this.totalPoints.update(o=>o+50),this.cdr.detectChanges()});let i=this.markers.get(r.id);if(i&&this.L){let o=this.L.icon({iconUrl:"assets/unlocked.png",iconSize:[32,32],iconAnchor:[16,32]});i.setIcon(o);let s=`
          <div class="popup-info" style="width: 220px; padding: 10px;">
            <div style="width: 100%; height: 120px; background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%); border-radius: 8px; margin-bottom: 8px; display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden;">
              <div style="position: absolute; color: #d4af37; font-size: 32px;">\u{1F513}</div>
              <img src="${r.imagen}" 
                   loading="lazy"
                   style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px; position: absolute; top: 0; left: 0; opacity: 0; transition: opacity 0.3s;"
                   onload="this.style.opacity='1'"
                   onerror="this.style.display='none'"
                   alt="${r.titulo}">
            </div>
            <h3 style="margin: 0 0 8px 0; color: #d4af37;">${r.titulo}</h3>
            <p style="font-size: 13px; line-height: 1.4; margin: 0;">${r.descripcion}</p>
          </div>`;i.bindPopup(s)}Promise.all([this.mysteryService.unlockMystery(this.userId,r.id),this.mysteryService.addPoints(this.userId,50)]).then(()=>{console.log("\u2705 Progreso guardado en Firebase"),this.loadRanking()}).catch(o=>{console.error("\u274C Error al guardar:",o)})}else{console.log("\u274C Respuesta incorrecta"),alert("Respuesta incorrecta. \xA1Sigue intent\xE1ndolo!");let i=document.getElementById(`ans-${e}`);i&&(i.value="",i.focus())}}closeSuccessModal(){this.showSuccessModal.set(!1);let e=this.misteriosList.find(n=>n.titulo===this.solvedMysteryTitle());if(e){let n=this.markers.get(e.id);n&&setTimeout(()=>{this.map.setView(n.getLatLng(),17,{animate:!0,duration:.5}),n.openPopup()},300)}}initMap(e){return R(this,null,function*(){return new Promise(n=>{navigator.geolocation?(console.log("\u{1F50D} Solicitando permisos de geolocalizaci\xF3n..."),navigator.geolocation.getCurrentPosition(r=>{let{latitude:i,longitude:o}=r.coords;console.log("\u2705 Ubicaci\xF3n inicial obtenida:",i,o),this.finishMapSetup(e,i,o),n()},r=>{console.error("\u274C Error de geolocalizaci\xF3n:",r.message,r.code),this.finishMapSetup(e,43.263,-2.935),n()},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})):(console.warn("\u26A0\uFE0F Geolocalizaci\xF3n no disponible en este navegador"),this.finishMapSetup(e,43.263,-2.935),n())})})}finishMapSetup(e,n,r){console.log("\u{1F5FA}\uFE0F Configurando mapa en:",n,r),this.map=e.map("map",{center:[n,r],zoom:14,zoomControl:!1});let i=e.icon({iconRetinaUrl:"/leaflet/marker-icon-2x.png",iconUrl:"/leaflet/marker-icon.png",shadowUrl:"/leaflet/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});e.Marker.prototype.options.icon=i,e.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",{attribution:"&copy; OpenStreetMap",className:"map-lighter"}).addTo(this.map),console.log("\u{1F4CD} Creando marcador de jugador en:",n,r),this.playerMarker=e.circleMarker([n,r],{radius:10,color:"#ffffff",fillColor:"#007bff",fillOpacity:1,weight:3}).addTo(this.map),this.currentUserLocation=e.latLng(n,r),this.map.locate({setView:!1,watch:!0,enableHighAccuracy:!0,maximumAge:3e4,timeout:3e4}),this.map.on("locationfound",o=>{console.log("\u{1F4CD} Ubicaci\xF3n actualizada:",o.latlng.lat,o.latlng.lng,"Precisi\xF3n:",o.accuracy+"m"),this.playerMarker&&this.playerMarker.setLatLng(o.latlng),this.currentUserLocation=o.latlng,this.lastAccuracy=o.accuracy,this.updateMysteriesDistance(o.latlng),this.loadNearbyMysteries(o.latlng)}),this.map.on("locationerror",o=>{console.warn("\u26A0\uFE0F Timeout de ubicaci\xF3n (es normal, seguir\xE1 intentando):",o.message)}),this.map.on("moveend",()=>{this.loadVisibleMysteries()})}startLocationTracking(){if(!navigator.geolocation){console.warn("\u26A0\uFE0F No se puede rastrear ubicaci\xF3n: geolocalizaci\xF3n no disponible");return}console.log("\u{1F3AF} Iniciando rastreo continuo de ubicaci\xF3n..."),this.watchId=navigator.geolocation.watchPosition(e=>{let{latitude:n,longitude:r,accuracy:i}=e.coords;if(console.log("\u{1F4CD} Ubicaci\xF3n actualizada:",n,r,"Precisi\xF3n:",i+"m"),this.locationAttempts=0,this.playerMarker&&this.L){let o=this.L.latLng(n,r);this.playerMarker.setLatLng(o),this.currentUserLocation=o,this.updateMysteriesDistance(o),this.loadNearbyMysteries(o)}},e=>{this.locationAttempts++,console.error(`\u274C Error al rastrear ubicaci\xF3n (intento ${this.locationAttempts}):`,e.message),this.locationAttempts>=this.maxLocationAttempts&&(console.warn("\u26A0\uFE0F Reiniciando rastreo..."),this.stopLocationTracking(),setTimeout(()=>{this.locationAttempts=0,this.startLocationTracking()},5e3))},{enableHighAccuracy:!0,timeout:15e3,maximumAge:5e3}),console.log("\u2705 Rastreo iniciado")}stopLocationTracking(){this.watchId!==null&&(navigator.geolocation.clearWatch(this.watchId),console.log("\u{1F6D1} Rastreo detenido"),this.watchId=null)}calculateDistance(e,n,r,i){if(this.L){let o=this.L.latLng(e,n),s=this.L.latLng(r,i);return o.distanceTo(s)}return 1/0}loadNearbyMysteries(e){if(!this.L||this.misteriosList.length===0)return;let n=this.misteriosList.filter(r=>!this.loadedMysteries.has(r.id)).map(r=>_e(B({},r),{distance:this.calculateDistance(e.lat,e.lng,r.latitud,r.longitud)})).filter(r=>r.distance<this.LOAD_MORE_DISTANCE).sort((r,i)=>r.distance-i.distance).slice(0,this.BATCH_SIZE);n.length>0&&(console.log(`\u{1F3AF} Cargando ${n.length} misterios cercanos...`),n.forEach(r=>{this.addMysteryMarker(r),this.loadedMysteries.add(r.id)}))}loadVisibleMysteries(){if(!this.map||!this.L||this.misteriosList.length===0)return;let e=this.map.getBounds(),n=0;this.misteriosList.forEach(r=>{if(!this.loadedMysteries.has(r.id)){let i=this.L.latLng(r.latitud,r.longitud);e.contains(i)&&(this.addMysteryMarker(r),this.loadedMysteries.add(r.id),n++)}}),n>0&&console.log(`\u{1F5FA}\uFE0F Cargados ${n} misterios en viewport`)}addMysteryMarker(e){if(!this.L||!this.map||this.markers.has(e.id))return;let n=this.L.icon({iconUrl:"assets/locked.png",iconSize:[32,32],iconAnchor:[16,32]}),r=this.L.icon({iconUrl:"assets/unlocked.png",iconSize:[32,32],iconAnchor:[16,32]}),i=this.L.latLng(e.latitud,e.longitud),o=e.desbloqueado?r:n,s=this.L.marker(i,{icon:o}).addTo(this.map);if(this.markers.set(e.id,s),e.desbloqueado){let a=`
        <div class="popup-info" style="width: 220px; padding: 10px;">
          <div style="width: 100%; height: 120px; background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%); border-radius: 8px; margin-bottom: 8px; display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden;">
            <div style="position: absolute; color: #d4af37; font-size: 32px;">\u{1F513}</div>
            <img src="${e.imagen}" 
                 loading="lazy"
                 style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px; position: absolute; top: 0; left: 0;"
                 onload="this.style.opacity='1'"
                 onerror="this.style.display='none'"
                 alt="${e.titulo}">
          </div>
          <h3 style="margin: 0 0 8px 0; color: #d4af37;">${e.titulo}</h3>
          <p style="font-size: 13px; line-height: 1.4; margin: 0;">${e.descripcion}</p>
        </div>`;s.bindPopup(a)}else s.bindPopup(`
        <div style="text-align: center; padding: 10px;">
          <b>\u{1F512} Bloqueado</b><br>
          <span style="font-size: 12px;">Ac\xE9rcate a ${e.radioDesbloqueo||50}m para desbloquear</span>
        </div>`);console.log(`\u{1F4CD} Marcador a\xF1adido: ${e.titulo}`)}updateMysteriesDistance(e){if(!this.L||this.misteriosList.length===0)return;let n=this.L.icon({iconUrl:"assets/locked.png",iconSize:[32,32],iconAnchor:[16,32]});this.loadedMysteries.forEach(r=>{let i=this.misteriosList.find(p=>p.id===r);if(!i||i.desbloqueado)return;let o=this.markers.get(i.id);if(!o)return;let s=this.L.latLng(i.latitud,i.longitud),a=e.distanceTo(s),l=i.radioDesbloqueo||50;o.setIcon(n);let d=this.lastAccuracy>.1&&this.lastAccuracy<100;if(a<l){this.notifiedMysteries.has(i.id)||(navigator.vibrate&&navigator.vibrate([300,100,300]),Notification.permission==="granted"&&new Notification("\u{1F4CD} Misterio Detectado",{body:`\xA1Est\xE1s sobre ${i.titulo}! Abre el mapa para resolver el acertijo.`,icon:"assets/logoMistery.png"}),this.notifiedMysteries.add(i.id));let p=`
          <div class="popup-mystery" style="padding: 12px; text-align: center; min-width: 200px;">
            <h3 style="color: #d4af37; margin: 0 0 10px 0; font-size: 16px;">\u{1F50D} ${i.titulo}</h3>
            <p style="font-style: italic; margin: 10px 0; font-size: 14px; line-height: 1.4;">"${i.acertijo}"</p>
            <p style="font-size: 11px; color: #4ade80; margin: 5px 0; font-weight: bold;">\u2713 Est\xE1s en el lugar correcto</p>
            <input type="text" id="ans-${i.titulo}" placeholder="Respuesta..." 
                   style="width: calc(100% - 16px); padding: 8px; margin: 10px 0; border: 2px solid #d4af37; border-radius: 6px;">
            <button onclick="window.checkAnswerPopup('${i.titulo}')" 
                    style="padding: 10px 20px; background: #d4af37; color: #1a1a1a; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; width: 100%;">
              Resolver
            </button>
          </div>`;o.bindPopup(p)}else a<l&&!d?o.bindPopup(`
          <div style="text-align: center; padding: 10px;">
            <b>\u26A0\uFE0F Se\xF1al inestable</b><br>
            <span style="font-size: 11px;">M\xE9vete un poco para mejorar la precisi\xF3n del GPS y desbloquear el misterio.</span>
          </div>`):(a>l+10&&this.notifiedMysteries.delete(i.id),o.bindPopup(`
          <div style="text-align: center; padding: 10px;">
            <b>\u{1F512} Bloqueado</b><br>
            <span style="font-size: 12px;">Est\xE1s a ${Math.round(a)}m</span><br>
            <span style="font-size: 11px; color: #666;">Ac\xE9rcate a ${l}m</span>
          </div>`))})}checkAnswer(e){let n=this.selectedMystery();n&&this.validarDesdePopup(n.titulo,e)}loadMysteries(e){if(!this.map){console.error("\u274C El mapa no est\xE1 inicializado");return}this.mysteryService.getMysteries().subscribe(n=>{if(console.log("\u{1F4E6} Misterios cargados desde Firebase:",n.length),this.misteriosList=n.map(r=>_e(B({},r),{desbloqueado:this.userProgress.unlockedMysteries.includes(r.id)})),this.markers.forEach(r=>{this.map.removeLayer(r)}),this.markers.clear(),this.loadedMysteries.clear(),this.currentUserLocation){let r=this.misteriosList.filter(i=>i.desbloqueado);r.forEach(i=>{this.addMysteryMarker(i),this.loadedMysteries.add(i.id)}),this.loadNearbyMysteries(this.currentUserLocation),console.log(`\u2705 Carga inicial: ${r.length} desbloqueados + misterios cercanos`)}else this.misteriosList.slice(0,10).forEach(r=>{this.addMysteryMarker(r),this.loadedMysteries.add(r.id)}),console.log("\u2705 Carga inicial: primeros 10 misterios (sin ubicaci\xF3n)");if(this.playerMarker){let r=this.playerMarker.getLatLng();this.updateMysteriesDistance(r)}})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=hl({type:t,selectors:[["app-root"]],decls:16,vars:9,consts:[["playerNameInput",""],["passwordInput",""],["userAnswer",""],[1,"welcome-overlay"],["id","map",2,"height","100vh","width","100%"],[1,"locate-button"],[1,"score-container"],[1,"logout-button"],[1,"ranking-container"],[1,"ranking-toggle",3,"click"],[1,"icon"],[1,"text"],[1,"ranking-content"],[1,"success-modal-overlay"],[1,"mystery-card-overlay"],[1,"welcome-card"],["src","/assets/logoMistery.png","alt","Mystery Hunter Logo",1,"mystery-logo"],[1,"mystery-title"],[1,"gold"],[1,"description-box"],[2,"text-align","left","list-style","'\u2728 '","padding-left","20px","color","#ccc","font-size","0.9rem","margin-bottom","20px"],[2,"border","0","border-top","1px solid rgba(212, 175, 55, 0.3)","margin","20px 0"],[2,"color","#d4af37","margin-bottom","20px"],["type","text","placeholder","Nombre de usuario...",1,"auth-input",2,"width","100%","padding","12px","margin","10px 0","border","2px solid #d4af37","border-radius","8px","background","rgba(255,255,255,0.1)","color","white","font-size","1rem"],[1,"error-message"],["type","password","placeholder","Contrase\xF1a...",1,"auth-input",2,"width","100%","padding","12px","margin","10px 0","border","2px solid #d4af37","border-radius","8px","background","rgba(255,255,255,0.1)","color","white","font-size","1rem",3,"keyup.enter"],[1,"start-button",3,"click"],[1,"toggle-mode-btn",3,"click"],[1,"locate-button",3,"click"],[1,"logout-button",3,"click"],[1,"ranking-title"],[1,"loading"],[1,"no-players"],[1,"user-position"],[1,"players-list"],[1,"player-item",3,"current-user"],[1,"show-more-btn"],[1,"player-item"],[1,"rank"],[1,"medal","gold"],[1,"medal","silver"],[1,"medal","bronze"],[1,"position"],[1,"player-info"],[1,"player-name"],[1,"you-badge"],[1,"mysteries-count"],[1,"player-points"],[1,"pts"],[1,"show-more-btn",3,"click"],[1,"separator"],[1,"player-item","current-user"],[1,"success-modal",3,"click"],[1,"success-emoji"],[1,"success-title"],[1,"success-subtitle"],[1,"success-mystery-title"],[1,"success-points"],[1,"success-close-btn",3,"click"],[1,"mystery-card"],[1,"close-btn",3,"click"],[1,"card-header"],[1,"card-body"],[1,"description"],[1,"riddle-section"],[1,"riddle-label"],[1,"riddle-text"],[1,"answer-section"],["type","text","placeholder","Escribe la respuesta...",3,"keyup.enter"],[3,"click"]],template:function(n,r){n&1&&(_t(0,b6,33,5,"div",3),Jn(1,"div",4),_t(2,S6,2,0,"button",5),W(3,"div",6),J(4),Y(),_t(5,C6,2,0,"button",7),W(6,"div",8)(7,"button",9),Ht("click",function(){return r.toggleRanking()}),W(8,"span",10),J(9,"\u{1F3C6}"),Y(),W(10,"span",11),J(11,"Ranking"),Y()(),_t(12,j6,7,2,"div",12),Y(),_t(13,B6,14,2,"div",13),_t(14,$6,20,3,"div",14),Jn(15,"router-outlet")),n&2&&(vt(r.showWelcome()?0:-1),ye(2),vt(r.showWelcome()?-1:2),ye(2),nn("\u{1F3C6} Puntos: ",r.totalPoints()),ye(),vt(r.showWelcome()?-1:5),ye(),yl("expanded",r.showRanking()),ye(6),vt(r.showRanking()?12:-1),ye(),vt(r.showSuccessModal()?13:-1),ye(),vt(r.selectedMystery()?14:-1))},dependencies:[Ul],styles:['@charset "UTF-8";.score-container[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:10000;background:#1a1a1ae6;color:#d4af37;padding:12px 20px;border-radius:12px;font-weight:700;font-size:1.1rem;border:2px solid #d4af37;box-shadow:0 4px 15px #00000080}.locate-button[_ngcontent-%COMP%]{position:fixed;top:20px;left:20px;width:50px;height:50px;background:#1a1a1af2;border:2px solid #d4af37;color:#d4af37;border-radius:50%;cursor:pointer;font-size:1.5rem;display:flex;align-items:center;justify-content:center;z-index:10000;transition:all .3s ease;box-shadow:0 4px 15px #00000080}.locate-button[_ngcontent-%COMP%]:hover{background:#d4af37;color:#1a1a1a;transform:scale(1.1)}@media(max-width:480px){.locate-button[_ngcontent-%COMP%]{top:15px;left:15px;width:42px;height:42px;font-size:1.2rem}}.welcome-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#000c;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);display:flex;justify-content:center;align-items:center;z-index:99999}.welcome-card[_ngcontent-%COMP%]{background:#1a1a1a;border:3px solid #d4af37;border-radius:20px;padding:40px;max-width:450px;width:90%;text-align:center;box-shadow:0 0 20px #d4af371a}.welcome-card[_ngcontent-%COMP%]   .mystery-logo[_ngcontent-%COMP%]{width:120px;height:auto;margin:0 auto 20px;display:block;filter:drop-shadow(0 0 5px rgba(212,175,55,.15));animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}.welcome-card[_ngcontent-%COMP%]   .mystery-title[_ngcontent-%COMP%]{color:#fff;font-size:2.8rem;margin-bottom:15px;text-shadow:0 0 5px rgba(212,175,55,.25)}.welcome-card[_ngcontent-%COMP%]   .mystery-title[_ngcontent-%COMP%]   .gold[_ngcontent-%COMP%]{color:#d4af37}.welcome-card[_ngcontent-%COMP%]   .name-input[_ngcontent-%COMP%]{width:100%;padding:12px;margin:15px 0;border:2px solid #d4af37;border-radius:8px;background:#ffffff1a;color:#fff;font-size:1rem;transition:all .3s ease}.welcome-card[_ngcontent-%COMP%]   .name-input[_ngcontent-%COMP%]::placeholder{color:#ffffff80}.welcome-card[_ngcontent-%COMP%]   .name-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#f1c40f;background:#ffffff26;box-shadow:0 0 15px #d4af374d}.welcome-card[_ngcontent-%COMP%]   .description-box[_ngcontent-%COMP%]{color:#e0e0e0;font-size:1.05rem;line-height:1.6;margin:20px 0}.welcome-card[_ngcontent-%COMP%]   .description-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:15px}.welcome-card[_ngcontent-%COMP%]   .description-box[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-align:left;padding-left:20px}.welcome-card[_ngcontent-%COMP%]   .description-box[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px;list-style:"\\2728  "}.welcome-card[_ngcontent-%COMP%]   .start-button[_ngcontent-%COMP%]{background:#d4af37;color:#1a1a1a;border:none;padding:15px 40px;font-size:1.1rem;font-weight:800;border-radius:10px;cursor:pointer;text-transform:uppercase;transition:all .3s ease}.welcome-card[_ngcontent-%COMP%]   .start-button[_ngcontent-%COMP%]:hover{background:#f1c40f;box-shadow:0 0 10px #d4af374d;transform:translateY(-2px)}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.ranking-container[_ngcontent-%COMP%]{position:fixed;top:80px;right:20px;z-index:10000;transition:all .3s ease}.ranking-container[_ngcontent-%COMP%]   .ranking-toggle[_ngcontent-%COMP%]{background:#1a1a1af2;border:2px solid #d4af37;color:#d4af37;padding:10px 18px;border-radius:12px;cursor:pointer;font-weight:700;font-size:1rem;display:flex;align-items:center;gap:8px;transition:all .3s ease;box-shadow:0 4px 15px #00000080}.ranking-container[_ngcontent-%COMP%]   .ranking-toggle[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.3rem}.ranking-container[_ngcontent-%COMP%]   .ranking-toggle[_ngcontent-%COMP%]:hover{background:#d4af3733;transform:translateY(-2px);box-shadow:0 6px 20px #d4af3726}.ranking-container[_ngcontent-%COMP%]   .ranking-toggle[_ngcontent-%COMP%]:active{transform:translateY(0)}.ranking-container[_ngcontent-%COMP%]   .ranking-content[_ngcontent-%COMP%]{background:#1a1a1afa;border:2px solid #d4af37;border-radius:12px;margin-top:10px;padding:15px;min-width:320px;max-width:380px;max-height:500px;overflow-y:auto;box-shadow:0 8px 30px #000000b3;animation:_ngcontent-%COMP%_slideDown .3s ease}.ranking-container[_ngcontent-%COMP%]   .ranking-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.ranking-container[_ngcontent-%COMP%]   .ranking-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff0d;border-radius:4px}.ranking-container[_ngcontent-%COMP%]   .ranking-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#d4af37;border-radius:4px}.ranking-container[_ngcontent-%COMP%]   .ranking-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#f1c40f}.ranking-container[_ngcontent-%COMP%]   .ranking-title[_ngcontent-%COMP%]{color:#d4af37;font-size:1.3rem;margin:0 0 15px;text-align:center;text-shadow:0 0 5px rgba(212,175,55,.25)}.ranking-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{text-align:center;color:#d4af37;padding:20px;font-size:.95rem}.ranking-container[_ngcontent-%COMP%]   .no-players[_ngcontent-%COMP%]{text-align:center;color:#888;padding:20px;font-size:.9rem}.ranking-container[_ngcontent-%COMP%]   .players-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.ranking-container[_ngcontent-%COMP%]   .player-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px;background:#ffffff0d;border-radius:8px;transition:all .2s ease}.ranking-container[_ngcontent-%COMP%]   .player-item[_ngcontent-%COMP%]:hover{background:#ffffff14;transform:translate(3px)}.ranking-container[_ngcontent-%COMP%]   .player-item.current-user[_ngcontent-%COMP%]{background:#d4af3726;border:1px solid rgba(212,175,55,.3)}.ranking-container[_ngcontent-%COMP%]   .player-item.current-user[_ngcontent-%COMP%]:hover{background:#d4af3733}.ranking-container[_ngcontent-%COMP%]   .player-item[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%]{min-width:40px;text-align:center}.ranking-container[_ngcontent-%COMP%]   .player-item[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%]   .medal[_ngcontent-%COMP%]{font-size:1.8rem}.ranking-container[_ngcontent-%COMP%]   .player-item[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%]   .medal.gold[_ngcontent-%COMP%]{filter:drop-shadow(0 0 4px rgba(255,215,0,.3))}.ranking-container[_ngcontent-%COMP%]   .player-item[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%]   .medal.silver[_ngcontent-%COMP%]{filter:drop-shadow(0 0 4px rgba(192,192,192,.3))}.ranking-container[_ngcontent-%COMP%]   .player-item[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%]   .medal.bronze[_ngcontent-%COMP%]{filter:drop-shadow(0 0 4px rgba(205,127,50,.3))}.ranking-container[_ngcontent-%COMP%]   .player-item[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]{color:#d4af37;font-weight:700;font-size:1.1rem}.ranking-container[_ngcontent-%COMP%]   .player-item[_ngcontent-%COMP%]   .player-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:2px}.ranking-container[_ngcontent-%COMP%]   .player-item[_ngcontent-%COMP%]   .player-info[_ngcontent-%COMP%]   .player-name[_ngcontent-%COMP%]{color:#fff;font-weight:600;font-size:.95rem;display:flex;align-items:center;gap:6px}.ranking-container[_ngcontent-%COMP%]   .player-item[_ngcontent-%COMP%]   .player-info[_ngcontent-%COMP%]   .player-name[_ngcontent-%COMP%]   .you-badge[_ngcontent-%COMP%]{background:#d4af37;color:#1a1a1a;font-size:.7rem;padding:2px 6px;border-radius:4px;font-weight:800}.ranking-container[_ngcontent-%COMP%]   .player-item[_ngcontent-%COMP%]   .player-info[_ngcontent-%COMP%]   .mysteries-count[_ngcontent-%COMP%]{color:#888;font-size:.8rem}.ranking-container[_ngcontent-%COMP%]   .player-item[_ngcontent-%COMP%]   .player-points[_ngcontent-%COMP%]{color:#d4af37;font-weight:700;font-size:1.1rem;display:flex;align-items:baseline;gap:3px}.ranking-container[_ngcontent-%COMP%]   .player-item[_ngcontent-%COMP%]   .player-points[_ngcontent-%COMP%]   .pts[_ngcontent-%COMP%]{font-size:.75rem;color:#999}.ranking-container[_ngcontent-%COMP%]   .user-position[_ngcontent-%COMP%]{margin-top:15px;padding-top:15px;border-top:1px solid rgba(212,175,55,.3)}.ranking-container[_ngcontent-%COMP%]   .user-position[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{text-align:center;color:#666;font-size:1.2rem;margin-bottom:10px}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.show-more-btn[_ngcontent-%COMP%]{width:100%;margin-top:12px;padding:10px;background:#d4af371a;border:1px solid rgba(212,175,55,.3);color:#d4af37;border-radius:8px;cursor:pointer;font-size:.9rem;font-weight:600;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:6px}.show-more-btn[_ngcontent-%COMP%]:hover{background:#d4af3733;border-color:#d4af3780;transform:translateY(-1px)}.show-more-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.show-more-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.toggle-mode-btn[_ngcontent-%COMP%]{width:100%;margin-top:15px;padding:12px;background:transparent;border:1px solid rgba(212,175,55,.3);color:#ccc;border-radius:8px;cursor:pointer;font-size:.9rem;transition:all .3s ease}.toggle-mode-btn[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#d4af37;font-weight:700}.toggle-mode-btn[_ngcontent-%COMP%]:hover{background:#d4af370d;border-color:#d4af3780;transform:translateY(-1px)}.toggle-mode-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.error-message[_ngcontent-%COMP%]{background:#ef444426;border:1px solid #ef4444;color:#fca5a5;padding:10px;border-radius:6px;margin-top:8px;font-size:.85rem;text-align:center;animation:_ngcontent-%COMP%_shake .3s ease}.auth-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#f1c40f!important;background:#ffffff26!important;box-shadow:0 0 15px #d4af374d}.auth-input[_ngcontent-%COMP%]::placeholder{color:#ffffff80}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-5px)}75%{transform:translate(5px)}}.logout-button[_ngcontent-%COMP%]{position:fixed;bottom:20px;left:20px;background:#dc2626;color:#fff;border:none;padding:10px 18px;border-radius:8px;cursor:pointer;font-weight:600;font-size:13px;z-index:10000;transition:all .3s ease;box-shadow:0 4px 12px #dc262666;display:flex;align-items:center;gap:6px}.logout-button[_ngcontent-%COMP%]:hover{background:#b91c1c;transform:translateY(-2px);box-shadow:0 6px 16px #dc262699}.logout-button[_ngcontent-%COMP%]:active{transform:translateY(0)}.unlockable-marker-gentle[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-gentle 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse-gentle{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.05);opacity:.9}}.unlockable-marker[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-unlock 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse-unlock{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.15);opacity:.85}}.very-close-marker[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-intense .8s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse-intense{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.25);opacity:.75}}@media(max-width:350px){.score-container[_ngcontent-%COMP%]{top:10px;right:10px;padding:8px 14px;font-size:.9rem}.welcome-card[_ngcontent-%COMP%]{padding:20px;width:95%;border-width:2px}.welcome-card[_ngcontent-%COMP%]   .mystery-logo[_ngcontent-%COMP%]{width:80px;margin-bottom:15px}.welcome-card[_ngcontent-%COMP%]   .mystery-title[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:10px}.welcome-card[_ngcontent-%COMP%]   .name-input[_ngcontent-%COMP%]{padding:10px;font-size:.85rem;margin:12px 0}.welcome-card[_ngcontent-%COMP%]   .description-box[_ngcontent-%COMP%]{font-size:.85rem;margin:15px 0}.welcome-card[_ngcontent-%COMP%]   .description-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px}.welcome-card[_ngcontent-%COMP%]   .description-box[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:15px}.welcome-card[_ngcontent-%COMP%]   .description-box[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:6px}.welcome-card[_ngcontent-%COMP%]   .start-button[_ngcontent-%COMP%]{padding:12px 30px;font-size:.9rem}.ranking-container[_ngcontent-%COMP%]{right:10px;top:60px}.ranking-container[_ngcontent-%COMP%]   .ranking-toggle[_ngcontent-%COMP%]{padding:8px 12px;font-size:.85rem}.ranking-container[_ngcontent-%COMP%]   .ranking-toggle[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.1rem}.ranking-container[_ngcontent-%COMP%]   .ranking-content[_ngcontent-%COMP%]{min-width:280px;max-width:calc(100vw - 20px);padding:12px;max-height:400px}.ranking-container[_ngcontent-%COMP%]   .ranking-title[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:12px}.ranking-container[_ngcontent-%COMP%]   .player-item[_ngcontent-%COMP%]{padding:10px;gap:10px}.ranking-container[_ngcontent-%COMP%]   .player-item[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%]   .medal[_ngcontent-%COMP%]{font-size:1.5rem}.ranking-container[_ngcontent-%COMP%]   .player-item[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]{font-size:1rem}.ranking-container[_ngcontent-%COMP%]   .player-item[_ngcontent-%COMP%]   .player-info[_ngcontent-%COMP%]   .player-name[_ngcontent-%COMP%]{font-size:.85rem}.ranking-container[_ngcontent-%COMP%]   .player-item[_ngcontent-%COMP%]   .player-info[_ngcontent-%COMP%]   .mysteries-count[_ngcontent-%COMP%]{font-size:.75rem}.ranking-container[_ngcontent-%COMP%]   .player-item[_ngcontent-%COMP%]   .player-points[_ngcontent-%COMP%]{font-size:1rem}.toggle-mode-btn[_ngcontent-%COMP%]{font-size:.8rem;padding:10px}.logout-button[_ngcontent-%COMP%]{bottom:10px;left:10px;padding:8px 14px;font-size:11px}}@media(min-width:351px)and (max-width:480px){.score-container[_ngcontent-%COMP%]{top:12px;right:12px;padding:10px 16px;font-size:.95rem}.welcome-card[_ngcontent-%COMP%]{padding:25px;width:92%}.welcome-card[_ngcontent-%COMP%]   .mystery-logo[_ngcontent-%COMP%]{width:100px;margin-bottom:18px}.welcome-card[_ngcontent-%COMP%]   .mystery-title[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:12px}.welcome-card[_ngcontent-%COMP%]   .name-input[_ngcontent-%COMP%]{padding:11px;font-size:.9rem;margin:13px 0}.welcome-card[_ngcontent-%COMP%]   .description-box[_ngcontent-%COMP%]{font-size:.9rem;margin:18px 0}.welcome-card[_ngcontent-%COMP%]   .description-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:12px}.welcome-card[_ngcontent-%COMP%]   .start-button[_ngcontent-%COMP%]{padding:13px 35px;font-size:.95rem}.ranking-container[_ngcontent-%COMP%]{top:70px}.ranking-container[_ngcontent-%COMP%]   .ranking-toggle[_ngcontent-%COMP%]{font-size:.9rem}.ranking-container[_ngcontent-%COMP%]   .ranking-content[_ngcontent-%COMP%]{min-width:300px;max-height:450px}}@media(min-width:360px)and (max-width:375px)and (min-height:640px)and (max-height:812px){.welcome-card[_ngcontent-%COMP%]   .name-input[_ngcontent-%COMP%]{padding:10px;font-size:.9rem}.ranking-container[_ngcontent-%COMP%]{top:70px}.ranking-container[_ngcontent-%COMP%]   .ranking-toggle[_ngcontent-%COMP%]{padding:8px 14px;font-size:.85rem}.ranking-container[_ngcontent-%COMP%]   .ranking-toggle[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.1rem}.ranking-container[_ngcontent-%COMP%]   .ranking-content[_ngcontent-%COMP%]{min-width:280px;max-width:320px}.ranking-container[_ngcontent-%COMP%]   .ranking-title[_ngcontent-%COMP%]{font-size:1.15rem}}@media(min-width:481px)and (max-width:767px){.score-container[_ngcontent-%COMP%]{top:15px;right:15px;padding:10px 18px;font-size:1rem}.welcome-card[_ngcontent-%COMP%]{padding:30px;max-width:400px}.welcome-card[_ngcontent-%COMP%]   .mystery-title[_ngcontent-%COMP%]{font-size:2.3rem}.welcome-card[_ngcontent-%COMP%]   .name-input[_ngcontent-%COMP%]{padding:11px;font-size:.95rem;margin:14px 0}.welcome-card[_ngcontent-%COMP%]   .description-box[_ngcontent-%COMP%]{font-size:.95rem}.welcome-card[_ngcontent-%COMP%]   .start-button[_ngcontent-%COMP%]{padding:14px 38px;font-size:1rem}.ranking-container[_ngcontent-%COMP%]   .ranking-content[_ngcontent-%COMP%]{min-width:320px}}@media(min-width:390px)and (max-width:430px)and (min-height:844px)and (max-height:932px){.welcome-card[_ngcontent-%COMP%]   .name-input[_ngcontent-%COMP%]{padding:11px;font-size:.95rem}.ranking-container[_ngcontent-%COMP%]   .ranking-toggle[_ngcontent-%COMP%]{padding:8px 14px;font-size:.9rem}.ranking-container[_ngcontent-%COMP%]   .ranking-toggle[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.1rem}.ranking-container[_ngcontent-%COMP%]   .ranking-content[_ngcontent-%COMP%]{min-width:300px;max-width:340px}.ranking-container[_ngcontent-%COMP%]   .ranking-title[_ngcontent-%COMP%]{font-size:1.2rem}}@media(min-width:768px)and (max-width:1024px){.score-container[_ngcontent-%COMP%]{top:18px;right:18px;padding:11px 20px;font-size:1.05rem}.welcome-card[_ngcontent-%COMP%]{padding:35px;max-width:500px}.welcome-card[_ngcontent-%COMP%]   .mystery-title[_ngcontent-%COMP%]{font-size:2.5rem}.welcome-card[_ngcontent-%COMP%]   .name-input[_ngcontent-%COMP%]{padding:12px;font-size:1rem;margin:15px 0}.welcome-card[_ngcontent-%COMP%]   .description-box[_ngcontent-%COMP%]{font-size:1rem}.welcome-card[_ngcontent-%COMP%]   .start-button[_ngcontent-%COMP%]{padding:15px 40px;font-size:1.05rem}}@media(min-width:1025px)and (max-width:1366px){.score-container[_ngcontent-%COMP%]{top:20px;right:20px}.welcome-card[_ngcontent-%COMP%]{max-width:520px}}@media(min-width:1367px){.welcome-card[_ngcontent-%COMP%]{max-width:550px;padding:45px}.welcome-card[_ngcontent-%COMP%]   .mystery-title[_ngcontent-%COMP%]{font-size:3rem}.welcome-card[_ngcontent-%COMP%]   .description-box[_ngcontent-%COMP%]{font-size:1.1rem}}@media(orientation:landscape)and (max-height:600px){.welcome-card[_ngcontent-%COMP%]{padding:20px 30px;max-height:90vh;overflow-y:auto}.welcome-card[_ngcontent-%COMP%]   .mystery-logo[_ngcontent-%COMP%]{width:70px;margin-bottom:10px}.welcome-card[_ngcontent-%COMP%]   .mystery-title[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:8px}.welcome-card[_ngcontent-%COMP%]   .name-input[_ngcontent-%COMP%]{padding:8px;font-size:.85rem;margin:10px 0}.welcome-card[_ngcontent-%COMP%]   .description-box[_ngcontent-%COMP%]{font-size:.85rem;margin:12px 0;line-height:1.4}.welcome-card[_ngcontent-%COMP%]   .description-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:8px}.welcome-card[_ngcontent-%COMP%]   .description-box[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px}.welcome-card[_ngcontent-%COMP%]   .start-button[_ngcontent-%COMP%]{padding:10px 30px;font-size:.9rem}.ranking-container[_ngcontent-%COMP%]   .ranking-content[_ngcontent-%COMP%]{max-height:60vh}}@media(orientation:landscape)and (min-height:601px)and (max-height:800px){.welcome-card[_ngcontent-%COMP%]{max-height:85vh;overflow-y:auto}.welcome-card[_ngcontent-%COMP%]   .name-input[_ngcontent-%COMP%]{padding:10px;font-size:.9rem;margin:12px 0}.ranking-container[_ngcontent-%COMP%]   .ranking-content[_ngcontent-%COMP%]{max-height:70vh}}']})};aE($m,Vk).catch(t=>console.error(t));
